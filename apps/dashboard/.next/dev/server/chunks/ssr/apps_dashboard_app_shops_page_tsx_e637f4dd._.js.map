{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/81704/bookyo/apps/dashboard/app/shops/page.tsx"],"sourcesContent":["// apps/dashboard/app/my-shop/page.tsx\r\n// \"My Shop\" page for owners to manage their shop\r\n\r\n\"use client\";\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '@/lib/useAuth';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useTranslations } from 'next-intl';\r\n\r\ninterface Shop {\r\n  id: string;\r\n  name: string;\r\n  address: string;\r\n  phone: string;\r\n  email: string;\r\n  website?: string | null;\r\n  google_place_id?: string | null;\r\n  city?: string | null;\r\n  country?: string | null;\r\n  zip_code?: string | null;\r\n  description?: string | null;\r\n  language_code?: string | null;\r\n  logo_url?: string | null;\r\n  cover_photo_url?: string | null;\r\n  latitude?: number | null;\r\n  longitude?: number | null;\r\n  opening_hours?: any | null;\r\n  business_status?: string | null;\r\n  category_id?: string | null;\r\n  category?: string | null; // Computed from categories join\r\n  subcategory?: string | null; // Computed field, not a column\r\n  owner_user_id?: string | null;\r\n  claim_status?: 'unclaimed' | 'pending' | 'approved' | 'rejected' | null;\r\n  claimed_at?: string | null;\r\n  created_at?: string | null;\r\n  updated_at?: string | null;\r\n}\r\n\r\ninterface Service {\r\n  id: string;\r\n  shop_id?: string;\r\n  name: string;\r\n  description?: string | null;\r\n  price: number;\r\n  duration_minutes?: number | null;\r\n  duration?: number | null;\r\n  is_active?: boolean;\r\n}\r\n\r\ninterface Staff {\r\n  id: string;\r\n  shop_id?: string;\r\n  first_name: string;\r\n  last_name: string;\r\n  phone?: string | null;\r\n  email?: string | null;\r\n  role?: string | null;\r\n  is_active?: boolean;\r\n}\r\n\r\ninterface Booking {\r\n  id: string;\r\n  shop_id?: string;\r\n  customer_name?: string | null;\r\n  customer_email?: string | null;\r\n  customer_phone?: string | null;\r\n  start_time: string;\r\n  end_time: string;\r\n  status?: string | null;\r\n  services?: { name: string } | null;\r\n}\r\n\r\nconst MyShopPage = () => {\r\n  const { user, loading } = useAuth();\r\n  const authLoading = Boolean(loading); // Ensure it's always a boolean for stable dependency array\r\n  const router = useRouter();\r\n  const apiUrl = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3000';\r\n  const t = useTranslations();\r\n\r\n  const [shop, setShop] = useState<Shop | null>(null);\r\n  const [pageLoading, setPageLoading] = useState(true);\r\n  const [activeTab, setActiveTab] = useState<'overview' | 'services' | 'staff' | 'bookings' | 'photos'>('overview');\r\n  \r\n  // Form states\r\n  const [editingShop, setEditingShop] = useState(false);\r\n  const [shopForm, setShopForm] = useState<Partial<Shop>>({\r\n    name: '',\r\n    address: '',\r\n    phone: '',\r\n    email: '',\r\n    website: '',\r\n    google_place_id: '',\r\n    city: '',\r\n    country: '',\r\n    zip_code: '',\r\n    description: '',\r\n    language_code: '',\r\n  });\r\n  const [showCreateShop, setShowCreateShop] = useState(false);\r\n  const [showClaimShop, setShowClaimShop] = useState(false);\r\n  const [unclaimedShops, setUnclaimedShops] = useState<Shop[]>([]);\r\n  const [claimLoading, setClaimLoading] = useState(false);\r\n\r\n  // Data states\r\n  const [services, setServices] = useState<Service[]>([]);\r\n  const [staff, setStaff] = useState<Staff[]>([]);\r\n  const [bookings, setBookings] = useState<Booking[]>([]);\r\n  const [photos, setPhotos] = useState<Array<{ id: string; shop_id: string; type: string; url: string; created_at: string }>>([]);\r\n  \r\n  // Service form state\r\n  const [editingService, setEditingService] = useState<Service | null>(null);\r\n  const [serviceForm, setServiceForm] = useState({\r\n    name: '',\r\n    description: '',\r\n    price: 0,\r\n    duration_minutes: 0,\r\n  });\r\n  const [serviceError, setServiceError] = useState<string | null>(null);\r\n  \r\n  // Staff form state\r\n  const [editingStaff, setEditingStaff] = useState<Staff | null>(null);\r\n  const [staffForm, setStaffForm] = useState({\r\n    first_name: '',\r\n    last_name: '',\r\n    phone: '',\r\n    email: '',\r\n  });\r\n  const [staffError, setStaffError] = useState<string | null>(null);\r\n\r\n  // Booking status update state\r\n  const [statusUpdateModal, setStatusUpdateModal] = useState<{\r\n    isOpen: boolean;\r\n    bookingId: string | null;\r\n    newStatus: 'confirmed' | 'rejected' | null;\r\n    bookingCustomerName: string | null;\r\n  }>({\r\n    isOpen: false,\r\n    bookingId: null,\r\n    newStatus: null,\r\n    bookingCustomerName: null,\r\n  });\r\n  const [statusUpdateLoading, setStatusUpdateLoading] = useState(false);\r\n  const [statusUpdateMessage, setStatusUpdateMessage] = useState<{ type: 'success' | 'error'; text: string } | null>(null);\r\n  \r\n  // Cancel booking modal state\r\n  const [cancelModal, setCancelModal] = useState<{\r\n    isOpen: boolean;\r\n    bookingId: string | null;\r\n    bookingCustomerName: string | null;\r\n  }>({\r\n    isOpen: false,\r\n    bookingId: null,\r\n    bookingCustomerName: null,\r\n  });\r\n  const [cancelLoading, setCancelLoading] = useState(false);\r\n  const [cancelMessage, setCancelMessage] = useState<{ type: 'success' | 'error'; text: string } | null>(null);\r\n  \r\n  // Reschedule booking modal state\r\n  const [rescheduleModal, setRescheduleModal] = useState<{\r\n    isOpen: boolean;\r\n    bookingId: string | null;\r\n    bookingCustomerName: string | null;\r\n    currentDateTime: string | null;\r\n  }>({\r\n    isOpen: false,\r\n    bookingId: null,\r\n    bookingCustomerName: null,\r\n    currentDateTime: null,\r\n  });\r\n  const [rescheduleLoading, setRescheduleLoading] = useState(false);\r\n  const [rescheduleMessage, setRescheduleMessage] = useState<{ type: 'success' | 'error'; text: string } | null>(null);\r\n  const [newDateTime, setNewDateTime] = useState('');\r\n  \r\n  // Photo upload toast notification\r\n  const [photoToast, setPhotoToast] = useState<{ type: 'success' | 'error'; message: string } | null>(null);\r\n\r\n  // Fetch unclaimed shops when claim modal opens\r\n  useEffect(() => {\r\n    if (showClaimShop && user && !authLoading) {\r\n      const fetchUnclaimedShops = async () => {\r\n        try {\r\n          setClaimLoading(true);\r\n          const res = await fetch(`${apiUrl}/shops?unclaimed=true`, {\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n            },\r\n          });\r\n          \r\n          if (res.ok) {\r\n            const contentType = res.headers.get('content-type');\r\n            if (contentType && contentType.includes('application/json')) {\r\n              const data = await res.json();\r\n              setUnclaimedShops(Array.isArray(data) ? data : []);\r\n            } else {\r\n              console.error('Expected JSON but received:', contentType);\r\n              setUnclaimedShops([]);\r\n            }\r\n          } else {\r\n            console.error('Failed to fetch unclaimed shops:', res.status, res.statusText);\r\n            setUnclaimedShops([]);\r\n          }\r\n        } catch (error: any) {\r\n          // Silently handle connection errors (API server not running)\r\n          if (!error?.message?.includes('Failed to fetch') && !error?.message?.includes('ERR_CONNECTION_REFUSED')) {\r\n            console.error('Error fetching unclaimed shops:', error);\r\n          }\r\n          setUnclaimedShops([]);\r\n        } finally {\r\n          setClaimLoading(false);\r\n        }\r\n      };\r\n      fetchUnclaimedShops();\r\n    }\r\n  }, [showClaimShop, user, authLoading, apiUrl]);\r\n\r\n  // Fetch user's shop\r\n  useEffect(() => {\r\n    // Wait for auth to finish loading and ensure user exists with valid ID\r\n    if (authLoading || !user || !user.id) {\r\n      if (authLoading) {\r\n        setPageLoading(true);\r\n      } else if (!user) {\r\n        setPageLoading(false);\r\n      }\r\n      return;\r\n    }\r\n\r\n    const fetchMyShop = async () => {\r\n      try {\r\n        setPageLoading(true);\r\n        // Validate user.id is a valid UUID before making request\r\n        if (!user.id || typeof user.id !== 'string' || user.id === 'undefined' || user.id === 'null') {\r\n          console.error('Invalid user ID:', user.id);\r\n          setShop(null);\r\n          setShopForm({});\r\n          setPageLoading(false);\r\n          return;\r\n        }\r\n\r\n        // Fetch shops owned by user - backend now filters by owner_user_id\r\n        const url = `${apiUrl}/shops?owner_user_id=${encodeURIComponent(user.id)}`;\r\n        console.log('Fetching shop from:', url);\r\n        console.log('User ID:', user.id);\r\n        \r\n        let res;\r\n        try {\r\n          res = await fetch(url, {\r\n            headers: {\r\n              'x-user-id': user.id,\r\n              'Content-Type': 'application/json',\r\n            },\r\n          });\r\n        } catch (fetchError: any) {\r\n          // Handle connection errors gracefully\r\n          if (fetchError?.message?.includes('Failed to fetch') || fetchError?.message?.includes('ERR_CONNECTION_REFUSED')) {\r\n            // API server is not running - silently handle\r\n            setShop(null);\r\n            setShopForm({});\r\n            setPageLoading(false);\r\n            return;\r\n          }\r\n          throw fetchError;\r\n        }\r\n        \r\n        if (res.status === 404) {\r\n          // User owns no shop\r\n          console.log('No shop found for user');\r\n          setShop(null);\r\n          setShopForm({});\r\n          return;\r\n        }\r\n        \r\n        if (res.ok) {\r\n          const contentType = res.headers.get('content-type');\r\n          if (contentType && contentType.includes('application/json')) {\r\n            const data = await res.json();\r\n            if (Array.isArray(data) && data.length > 0) {\r\n              // Use the first shop if multiple exist\r\n              const userShop = data[0];\r\n              setShop(userShop);\r\n              setShopForm({\r\n                name: userShop.name || '',\r\n                address: userShop.address || '',\r\n                phone: userShop.phone || '',\r\n                email: userShop.email || '',\r\n                website: userShop.website || '',\r\n                google_place_id: userShop.google_place_id || '',\r\n                city: userShop.city || '',\r\n                country: userShop.country || '',\r\n                zip_code: userShop.zip_code || '',\r\n                description: userShop.description || '',\r\n                language_code: userShop.language_code || '',\r\n                category: userShop.category || null,\r\n                subcategory: userShop.subcategory || null,\r\n                logo_url: userShop.logo_url || null,\r\n                cover_photo_url: userShop.cover_photo_url || null,\r\n              });\r\n              // Fetch related data\r\n              fetchServices(userShop.id);\r\n              fetchStaff(userShop.id);\r\n              fetchBookings(userShop.id);\r\n              fetchPhotos(userShop.id);\r\n            } else {\r\n              setShop(null);\r\n              setShopForm({});\r\n            }\r\n          } else {\r\n            console.error('Expected JSON but received:', contentType);\r\n            setShop(null);\r\n            setShopForm({});\r\n          }\r\n        } else {\r\n          const errorText = await res.text().catch(() => 'Unknown error');\r\n          console.error('Error fetching shop:', res.status, res.statusText, errorText);\r\n          setShop(null);\r\n          setShopForm({});\r\n        }\r\n      } catch (error: any) {\r\n        // Silently handle connection errors (API server not running)\r\n        if (!error?.message?.includes('Failed to fetch') && !error?.message?.includes('ERR_CONNECTION_REFUSED')) {\r\n          console.error('Error fetching shop:', error);\r\n        }\r\n        setShop(null);\r\n        setShopForm({});\r\n      } finally {\r\n        setPageLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchMyShop();\r\n  }, [user, authLoading, apiUrl]);\r\n\r\n  const fetchServices = async (shopId: string) => {\r\n    if (!shopId || !user) return;\r\n    try {\r\n      const res = await fetch(`${apiUrl}/shops/${shopId}/services`, {\r\n        headers: {\r\n          'x-user-id': user.id,\r\n        },\r\n      });\r\n      if (res.ok) {\r\n        const data = await res.json();\r\n        setServices(Array.isArray(data) ? data : []);\r\n      }\r\n    } catch (error: any) {\r\n      // Silently handle connection errors (API server not running)\r\n      if (!error?.message?.includes('Failed to fetch') && !error?.message?.includes('ERR_CONNECTION_REFUSED')) {\r\n        console.error('Error fetching services:', error);\r\n      }\r\n      setServices([]);\r\n    }\r\n  };\r\n\r\n  const fetchStaff = async (shopId: string) => {\r\n    if (!shopId || !user) return;\r\n    try {\r\n      const res = await fetch(`${apiUrl}/shops/${shopId}/staff`, {\r\n        headers: {\r\n          'x-user-id': user.id,\r\n        },\r\n      });\r\n      if (res.ok) {\r\n        const data = await res.json();\r\n        setStaff(Array.isArray(data) ? data : []);\r\n      }\r\n    } catch (error: any) {\r\n      // Silently handle connection errors (API server not running)\r\n      if (!error?.message?.includes('Failed to fetch') && !error?.message?.includes('ERR_CONNECTION_REFUSED')) {\r\n        console.error('Error fetching staff:', error);\r\n      }\r\n      setStaff([]);\r\n    }\r\n  };\r\n\r\n  const fetchBookings = async (shopId: string) => {\r\n    if (!shopId || !user) return;\r\n    try {\r\n      const res = await fetch(`${apiUrl}/bookings`, {\r\n        headers: {\r\n          'x-user-id': user.id,\r\n        },\r\n      });\r\n      if (res.ok) {\r\n        const data = await res.json();\r\n        // Filter to only this shop's bookings\r\n        const shopBookings = Array.isArray(data) \r\n          ? data.filter((b: any) => b.shop_id === shopId)\r\n          : [];\r\n        setBookings(shopBookings);\r\n      }\r\n    } catch (error: any) {\r\n      // Silently handle connection errors (API server not running)\r\n      if (!error?.message?.includes('Failed to fetch') && !error?.message?.includes('ERR_CONNECTION_REFUSED')) {\r\n        console.error('Error fetching bookings:', error);\r\n      }\r\n      setBookings([]);\r\n    }\r\n  };\r\n\r\n  const fetchPhotos = async (shopId: string) => {\r\n    if (!shopId || !user) return;\r\n    try {\r\n      const res = await fetch(`${apiUrl}/shops/${shopId}/photos`, {\r\n        headers: {\r\n          'x-user-id': user.id,\r\n        },\r\n      });\r\n      if (res.ok) {\r\n        const data = await res.json();\r\n        setPhotos(Array.isArray(data) ? data : []);\r\n      }\r\n    } catch (error: any) {\r\n      // Silently handle connection errors (API server not running)\r\n      if (!error?.message?.includes('Failed to fetch') && !error?.message?.includes('ERR_CONNECTION_REFUSED')) {\r\n        console.error('Error fetching photos:', error);\r\n      }\r\n      setPhotos([]);\r\n    }\r\n  };\r\n  \r\n  // Service handlers\r\n  const handleCreateService = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!shop || !user) return;\r\n    \r\n    setServiceError(null);\r\n    try {\r\n      const res = await fetch(`${apiUrl}/services`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'x-user-id': user.id,\r\n        },\r\n        body: JSON.stringify({\r\n          shop_id: shop.id,\r\n          name: serviceForm.name,\r\n          description: serviceForm.description,\r\n          price: serviceForm.price,\r\n          duration: serviceForm.duration_minutes,\r\n        }),\r\n      });\r\n      \r\n      if (res.ok) {\r\n        await fetchServices(shop.id);\r\n        setServiceForm({ name: '', description: '', price: 0, duration_minutes: 0 });\r\n      } else {\r\n        const errorData = await res.json().catch(() => ({ error: 'Failed to create service' }));\r\n        setServiceError(errorData.error || 'Failed to create service');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error creating service:', error);\r\n      setServiceError('Failed to create service');\r\n    }\r\n  };\r\n  \r\n  const handleUpdateService = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!shop || !user || !editingService) return;\r\n    \r\n    setServiceError(null);\r\n    try {\r\n      const res = await fetch(`${apiUrl}/services/${editingService.id}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'x-user-id': user.id,\r\n        },\r\n        body: JSON.stringify({\r\n          name: serviceForm.name,\r\n          description: serviceForm.description,\r\n          price: serviceForm.price,\r\n          duration_minutes: serviceForm.duration_minutes,\r\n        }),\r\n      });\r\n      \r\n      if (res.ok) {\r\n        await fetchServices(shop.id);\r\n        setEditingService(null);\r\n        setServiceForm({ name: '', description: '', price: 0, duration_minutes: 0 });\r\n      } else {\r\n        const errorData = await res.json().catch(() => ({ error: 'Failed to update service' }));\r\n        setServiceError(errorData.error || 'Failed to update service');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating service:', error);\r\n      setServiceError('Failed to update service');\r\n    }\r\n  };\r\n  \r\n  const handleDeleteService = async (serviceId: string) => {\r\n    if (!shop || !user || !confirm('Are you sure you want to delete this service?')) return;\r\n    \r\n    try {\r\n      const res = await fetch(`${apiUrl}/services/${serviceId}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'x-user-id': user.id,\r\n        },\r\n      });\r\n      \r\n      if (res.ok) {\r\n        await fetchServices(shop.id);\r\n      } else {\r\n        alert('Failed to delete service');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting service:', error);\r\n      alert('Failed to delete service');\r\n    }\r\n  };\r\n  \r\n  const startEditService = (service: Service) => {\r\n    setEditingService(service);\r\n    setServiceForm({\r\n      name: service.name,\r\n      description: service.description || '',\r\n      price: service.price,\r\n      duration_minutes: service.duration_minutes || 0,\r\n    });\r\n  };\r\n  \r\n  // Staff handlers\r\n  const handleCreateStaff = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!shop || !user) return;\r\n    \r\n    setStaffError(null);\r\n    try {\r\n      const res = await fetch(`${apiUrl}/staff`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'x-user-id': user.id,\r\n        },\r\n        body: JSON.stringify({\r\n          shop_id: shop.id,\r\n          first_name: staffForm.first_name,\r\n          last_name: staffForm.last_name,\r\n          phone: staffForm.phone,\r\n          email: staffForm.email,\r\n        }),\r\n      });\r\n      \r\n      if (res.ok) {\r\n        await fetchStaff(shop.id);\r\n        setStaffForm({ first_name: '', last_name: '', phone: '', email: '' });\r\n      } else {\r\n        const errorData = await res.json().catch(() => ({ error: 'Failed to create staff' }));\r\n        setStaffError(errorData.error || 'Failed to create staff');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error creating staff:', error);\r\n      setStaffError('Failed to create staff');\r\n    }\r\n  };\r\n  \r\n  const handleUpdateStaff = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!shop || !user || !editingStaff) return;\r\n    \r\n    setStaffError(null);\r\n    try {\r\n      const res = await fetch(`${apiUrl}/staff/${editingStaff.id}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'x-user-id': user.id,\r\n        },\r\n        body: JSON.stringify({\r\n          first_name: staffForm.first_name,\r\n          last_name: staffForm.last_name,\r\n          phone: staffForm.phone,\r\n          email: staffForm.email,\r\n        }),\r\n      });\r\n      \r\n      if (res.ok) {\r\n        await fetchStaff(shop.id);\r\n        setEditingStaff(null);\r\n        setStaffForm({ first_name: '', last_name: '', phone: '', email: '' });\r\n      } else {\r\n        const errorData = await res.json().catch(() => ({ error: 'Failed to update staff' }));\r\n        setStaffError(errorData.error || 'Failed to update staff');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating staff:', error);\r\n      setStaffError('Failed to update staff');\r\n    }\r\n  };\r\n  \r\n  const handleDeleteStaff = async (staffId: string) => {\r\n    if (!shop || !user || !confirm('Are you sure you want to delete this staff member?')) return;\r\n    \r\n    try {\r\n      const res = await fetch(`${apiUrl}/staff/${staffId}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'x-user-id': user.id,\r\n        },\r\n      });\r\n      \r\n      if (res.ok) {\r\n        await fetchStaff(shop.id);\r\n      } else {\r\n        alert('Failed to delete staff');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting staff:', error);\r\n      alert('Failed to delete staff');\r\n    }\r\n  };\r\n  \r\n  const startEditStaff = (staffMember: Staff) => {\r\n    setEditingStaff(staffMember);\r\n    setStaffForm({\r\n      first_name: staffMember.first_name,\r\n      last_name: staffMember.last_name || '',\r\n      phone: staffMember.phone || '',\r\n      email: staffMember.email || '',\r\n    });\r\n  };\r\n\r\n  // Booking status handlers\r\n  const openStatusUpdateModal = (bookingId: string, newStatus: 'confirmed' | 'rejected', customerName: string | null) => {\r\n    setStatusUpdateModal({\r\n      isOpen: true,\r\n      bookingId,\r\n      newStatus,\r\n      bookingCustomerName: customerName,\r\n    });\r\n    setStatusUpdateMessage(null);\r\n  };\r\n\r\n  const closeStatusUpdateModal = () => {\r\n    setStatusUpdateModal({\r\n      isOpen: false,\r\n      bookingId: null,\r\n      newStatus: null,\r\n      bookingCustomerName: null,\r\n    });\r\n    setStatusUpdateMessage(null);\r\n  };\r\n\r\n  const handleUpdateBookingStatus = async () => {\r\n    if (!shop || !user || !statusUpdateModal.bookingId || !statusUpdateModal.newStatus) return;\r\n\r\n    setStatusUpdateLoading(true);\r\n    setStatusUpdateMessage(null);\r\n\r\n    try {\r\n      const res = await fetch(`${apiUrl}/bookings/${statusUpdateModal.bookingId}/status`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'x-user-id': user.id,\r\n        },\r\n        body: JSON.stringify({\r\n          status: statusUpdateModal.newStatus,\r\n        }),\r\n      });\r\n\r\n      if (res.ok) {\r\n        setStatusUpdateMessage({\r\n          type: 'success',\r\n          text: statusUpdateModal.newStatus === 'confirmed' ? t('myShop.bookingConfirmed') : t('myShop.bookingRejected'),\r\n        });\r\n        \r\n        // Refresh bookings list\r\n        await fetchBookings(shop.id);\r\n        \r\n        // Close modal after a short delay\r\n        setTimeout(() => {\r\n          closeStatusUpdateModal();\r\n        }, 1500);\r\n      } else {\r\n        const errorData = await res.json().catch(() => ({ error: t('myShop.failedToUpdateStatus') }));\r\n        setStatusUpdateMessage({\r\n          type: 'error',\r\n          text: errorData.error || t('myShop.failedToUpdateStatus'),\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating booking status:', error);\r\n      setStatusUpdateMessage({\r\n        type: 'error',\r\n        text: t('myShop.failedToUpdateStatus'),\r\n      });\r\n    } finally {\r\n      setStatusUpdateLoading(false);\r\n    }\r\n  };\r\n\r\n  // Cancel booking handlers\r\n  const openCancelModal = (bookingId: string, customerName: string | null) => {\r\n    setCancelModal({\r\n      isOpen: true,\r\n      bookingId,\r\n      bookingCustomerName: customerName,\r\n    });\r\n    setCancelMessage(null);\r\n  };\r\n\r\n  const closeCancelModal = () => {\r\n    setCancelModal({\r\n      isOpen: false,\r\n      bookingId: null,\r\n      bookingCustomerName: null,\r\n    });\r\n    setCancelMessage(null);\r\n  };\r\n\r\n  const handleCancelBooking = async () => {\r\n    if (!shop || !user || !cancelModal.bookingId) return;\r\n\r\n    setCancelLoading(true);\r\n    setCancelMessage(null);\r\n\r\n    try {\r\n      const res = await fetch(`${apiUrl}/bookings/${cancelModal.bookingId}/cancel`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'x-user-id': user.id,\r\n        },\r\n      });\r\n\r\n      if (res.ok) {\r\n        setCancelMessage({\r\n          type: 'success',\r\n          text: t('booking.cancelled'),\r\n        });\r\n        \r\n        // Refresh bookings list\r\n        await fetchBookings(shop.id);\r\n        \r\n        // Close modal after a short delay\r\n        setTimeout(() => {\r\n          closeCancelModal();\r\n        }, 1500);\r\n      } else {\r\n        const errorData = await res.json().catch(() => ({ error: t('booking.failedToCancel') }));\r\n        setCancelMessage({\r\n          type: 'error',\r\n          text: errorData.error || t('booking.failedToCancel'),\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error cancelling booking:', error);\r\n      setCancelMessage({\r\n        type: 'error',\r\n        text: t('booking.failedToCancel'),\r\n      });\r\n    } finally {\r\n      setCancelLoading(false);\r\n    }\r\n  };\r\n\r\n  // Reschedule booking handlers\r\n  const openRescheduleModal = (bookingId: string, customerName: string | null, currentStartTime: string) => {\r\n    const currentDate = new Date(currentStartTime);\r\n    const localDateTime = new Date(currentDate.getTime() - currentDate.getTimezoneOffset() * 60000)\r\n      .toISOString()\r\n      .slice(0, 16); // Format: YYYY-MM-DDTHH:mm\r\n    \r\n    setRescheduleModal({\r\n      isOpen: true,\r\n      bookingId,\r\n      bookingCustomerName: customerName,\r\n      currentDateTime: currentStartTime,\r\n    });\r\n    setNewDateTime(localDateTime);\r\n    setRescheduleMessage(null);\r\n  };\r\n\r\n  const closeRescheduleModal = () => {\r\n    setRescheduleModal({\r\n      isOpen: false,\r\n      bookingId: null,\r\n      bookingCustomerName: null,\r\n      currentDateTime: null,\r\n    });\r\n    setNewDateTime('');\r\n    setRescheduleMessage(null);\r\n  };\r\n\r\n  const handleRescheduleBooking = async () => {\r\n    if (!shop || !user || !rescheduleModal.bookingId || !newDateTime) return;\r\n\r\n    setRescheduleLoading(true);\r\n    setRescheduleMessage(null);\r\n\r\n    try {\r\n      // Convert local datetime to ISO string\r\n      const dateTimeISO = new Date(newDateTime).toISOString();\r\n\r\n      const res = await fetch(`${apiUrl}/bookings/${rescheduleModal.bookingId}/reschedule`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'x-user-id': user.id,\r\n        },\r\n        body: JSON.stringify({\r\n          date_time: dateTimeISO,\r\n        }),\r\n      });\r\n\r\n      if (res.ok) {\r\n        setRescheduleMessage({\r\n          type: 'success',\r\n          text: t('booking.rescheduled'),\r\n        });\r\n        \r\n        // Refresh bookings list\r\n        await fetchBookings(shop.id);\r\n        \r\n        // Close modal after a short delay\r\n        setTimeout(() => {\r\n          closeRescheduleModal();\r\n        }, 1500);\r\n      } else {\r\n        const errorData = await res.json().catch(() => ({ error: t('booking.failedToReschedule') }));\r\n        setRescheduleMessage({\r\n          type: 'error',\r\n          text: errorData.error || t('booking.failedToReschedule'),\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error rescheduling booking:', error);\r\n      setRescheduleMessage({\r\n        type: 'error',\r\n        text: t('booking.failedToReschedule'),\r\n      });\r\n    } finally {\r\n      setRescheduleLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleCreateShop = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!user) return;\r\n\r\n    try {\r\n      const res = await fetch(`${apiUrl}/shops`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'x-user-id': user.id,\r\n        },\r\n        body: JSON.stringify(shopForm),\r\n      });\r\n\r\n      if (res.ok) {\r\n        const newShop = await res.json();\r\n        setShop(newShop);\r\n        setShopForm(newShop);\r\n        setShowCreateShop(false);\r\n        router.refresh();\r\n      } else {\r\n        const error = await res.json();\r\n        alert(`Error: ${error.error || 'Failed to create shop'}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error creating shop:', error);\r\n      alert('Failed to create shop');\r\n    }\r\n  };\r\n\r\n  const handleUpdateShop = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!shop || !user) return;\r\n\r\n    try {\r\n      // Send all fields that exist in the database schema\r\n      const updateData: Record<string, any> = {};\r\n      if (shopForm.name !== undefined && shopForm.name !== null) updateData.name = shopForm.name;\r\n      if (shopForm.address !== undefined && shopForm.address !== null) updateData.address = shopForm.address;\r\n      if (shopForm.phone !== undefined && shopForm.phone !== null) updateData.phone = shopForm.phone;\r\n      if (shopForm.email !== undefined && shopForm.email !== null) updateData.email = shopForm.email;\r\n      if (shopForm.website !== undefined && shopForm.website !== null) updateData.website = shopForm.website;\r\n      if (shopForm.google_place_id !== undefined && shopForm.google_place_id !== null) updateData.google_place_id = shopForm.google_place_id;\r\n      if (shopForm.city !== undefined && shopForm.city !== null) updateData.city = shopForm.city;\r\n      if (shopForm.country !== undefined && shopForm.country !== null) updateData.country = shopForm.country;\r\n      if (shopForm.zip_code !== undefined && shopForm.zip_code !== null) updateData.zip_code = shopForm.zip_code;\r\n      if (shopForm.description !== undefined && shopForm.description !== null) updateData.description = shopForm.description;\r\n      if (shopForm.language_code !== undefined && shopForm.language_code !== null) updateData.language_code = shopForm.language_code;\r\n\r\n      const res = await fetch(`${apiUrl}/shops/${shop.id}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'x-user-id': user.id,\r\n        },\r\n        body: JSON.stringify(updateData),\r\n      });\r\n\r\n      if (res.ok) {\r\n        const updatedShop = await res.json();\r\n        setShop(updatedShop);\r\n        setShopForm(updatedShop);\r\n        setEditingShop(false);\r\n      } else {\r\n        const error = await res.json();\r\n        alert(`Error: ${error.error || 'Failed to update shop'}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating shop:', error);\r\n      alert('Failed to update shop');\r\n    }\r\n  };\r\n\r\n  const handlePhotoUpload = async (e: React.ChangeEvent<HTMLInputElement>, type: 'logo' | 'cover' | 'gallery') => {\r\n    if (!shop || !user || !e.target.files || e.target.files.length === 0) return;\r\n\r\n    const file = e.target.files[0];\r\n    if (file.size > 10 * 1024 * 1024) {\r\n      alert('File size must be less than 10MB');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Create FormData\r\n      const formData = new FormData();\r\n      formData.append('file', file);\r\n      formData.append('shopId', shop.id);\r\n      formData.append('type', type);\r\n\r\n      // Ensure API URL is set correctly\r\n      const uploadUrl = `${apiUrl || 'http://localhost:3000'}/photos/upload`;\r\n      \r\n      // Upload to API using multipart/form-data\r\n      const res = await fetch(uploadUrl, {\r\n        method: 'POST',\r\n        headers: {\r\n          'x-user-id': user.id,\r\n          // Don't set Content-Type - browser will set it with boundary\r\n        },\r\n        body: formData,\r\n      });\r\n\r\n      // Validate response is JSON before parsing\r\n      const contentType = res.headers.get('content-type');\r\n      if (!contentType || !contentType.includes('application/json')) {\r\n        const errorText = await res.text();\r\n        console.error('Non-JSON response:', errorText);\r\n        throw new Error(`Server returned non-JSON response: ${res.status} ${res.statusText}`);\r\n      }\r\n\r\n      if (res.ok) {\r\n        const data = await res.json();\r\n        const photoUrl = data.url;\r\n        const photoRecord = data.photo;\r\n        \r\n        if (!photoUrl) {\r\n          throw new Error('No URL returned from upload');\r\n        }\r\n        \r\n        // Show success toast\r\n        setPhotoToast({ type: 'success', message: t('myShop.photoUploaded') });\r\n        setTimeout(() => setPhotoToast(null), 3000);\r\n        \r\n        // Immediately add the new photo to the photos state (optimistic update)\r\n        if (photoRecord) {\r\n          setPhotos(prev => {\r\n            // Remove any existing photo of the same type (for logo/cover) or add to gallery\r\n            if (type === 'logo' || type === 'cover') {\r\n              return prev.filter(p => !(p.type === type && p.shop_id === shop.id)).concat([photoRecord]);\r\n            } else {\r\n              // For gallery, just add the new photo immediately\r\n              return [...prev, photoRecord];\r\n            }\r\n          });\r\n        } else {\r\n          // Fallback: refresh photos list if no record returned\r\n          await fetchPhotos(shop.id);\r\n        }\r\n        \r\n        // Update shop with new URL (for logo/cover backward compatibility)\r\n        if (type === 'logo' || type === 'cover') {\r\n          const updateField = type === 'logo' ? 'logo_url' : 'cover_photo_url';\r\n          const updateRes = await fetch(`${apiUrl}/shops/${shop.id}`, {\r\n            method: 'PATCH',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'x-user-id': user.id,\r\n            },\r\n            body: JSON.stringify({\r\n              [updateField]: photoUrl,\r\n            }),\r\n          });\r\n\r\n          if (updateRes.ok) {\r\n            const updatedShop = await updateRes.json();\r\n            setShop(updatedShop);\r\n          }\r\n          // Only refresh for logo/cover to update shop data\r\n          router.refresh();\r\n        }\r\n        // Gallery photos don't need router.refresh() since we update state directly\r\n      } else {\r\n        const errorText = await res.text();\r\n        let errorMessage = t('myShop.failedToUpload');\r\n        try {\r\n          const errorJson = JSON.parse(errorText);\r\n          errorMessage = errorJson.error || errorMessage;\r\n        } catch {\r\n          errorMessage = errorText || errorMessage;\r\n        }\r\n        setPhotoToast({ type: 'error', message: errorMessage });\r\n        setTimeout(() => setPhotoToast(null), 5000);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error uploading photo:', error);\r\n      const errorMessage = error instanceof Error ? error.message : t('common.unknown');\r\n      setPhotoToast({ type: 'error', message: `${t('myShop.failedToUpload')}: ${errorMessage}` });\r\n      setTimeout(() => setPhotoToast(null), 5000);\r\n    }\r\n    \r\n    // Reset the input\r\n    e.target.value = '';\r\n  };\r\n\r\n  const handleSavePhotos = async () => {\r\n    if (!shop || !user) return;\r\n    \r\n    try {\r\n      // Refresh photos list to ensure we have the latest data\r\n      await fetchPhotos(shop.id);\r\n      setPhotoToast({ type: 'success', message: t('myShop.photoUploaded') });\r\n      setTimeout(() => setPhotoToast(null), 3000);\r\n      router.refresh();\r\n    } catch (error) {\r\n      console.error('Error saving photos:', error);\r\n      setPhotoToast({ type: 'error', message: 'Failed to save photos' });\r\n      setTimeout(() => setPhotoToast(null), 5000);\r\n    }\r\n  };\r\n\r\n  const handlePhotoDelete = async (photoId: string, type: 'logo' | 'cover' | 'gallery') => {\r\n    if (!shop || !user) return;\r\n    if (!confirm(`Are you sure you want to delete this ${type} photo?`)) return;\r\n\r\n    try {\r\n      const res = await fetch(`${apiUrl}/shops/${shop.id}/photos/${photoId}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'x-user-id': user.id,\r\n        },\r\n      });\r\n\r\n      if (res.ok) {\r\n        // Remove photo from state immediately\r\n        setPhotos(prev => prev.filter(p => p.id !== photoId));\r\n        \r\n        // Refresh photos list to ensure consistency\r\n        await fetchPhotos(shop.id);\r\n        \r\n        // Update shop if it was logo or cover\r\n        if (type === 'logo' || type === 'cover') {\r\n          const updateField = type === 'logo' ? 'logo_url' : 'cover_photo_url';\r\n          const updateRes = await fetch(`${apiUrl}/shops/${shop.id}`, {\r\n            method: 'PATCH',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'x-user-id': user.id,\r\n            },\r\n            body: JSON.stringify({\r\n              [updateField]: null,\r\n            }),\r\n          });\r\n\r\n          if (updateRes.ok) {\r\n            const updatedShop = await updateRes.json();\r\n            setShop(updatedShop);\r\n          }\r\n        }\r\n        \r\n        router.refresh();\r\n      } else {\r\n        const error = await res.json();\r\n        alert(`${t('common.error')}: ${error.error || t('myShop.failedToDelete')}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting photo:', error);\r\n      alert(t('myShop.failedToDelete'));\r\n    }\r\n  };\r\n\r\n  if (pageLoading) {\r\n    return (\r\n      <div className=\"p-8 flex items-center justify-center min-h-screen\">\r\n        <div className=\"text-center\">\r\n          <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n          <p className=\"mt-4 text-gray-600\">{t('common.loading')}</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // User doesn't own a shop - show create/claim options\r\n  if (!shop) {\r\n    return (\r\n      <div className=\"p-8 max-w-4xl mx-auto\">\r\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-8\">{t('myShop.title')}</h1>\r\n        \r\n        <div className=\"bg-white rounded-xl shadow-md border border-gray-100 p-8 mb-6\">\r\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">{t('myShop.getStarted')}</h2>\r\n          <p className=\"text-gray-600 mb-6\">\r\n            {t('myShop.noShop')} {t('myShop.createShop')} {t('common.or')} {t('myShop.claimShop')}.\r\n          </p>\r\n          \r\n          <div className=\"grid md:grid-cols-2 gap-6\">\r\n            {/* Create Shop */}\r\n            <div className=\"border border-gray-200 rounded-lg p-6\">\r\n              <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">{t('myShop.createNewShop')}</h3>\r\n              <p className=\"text-gray-600 mb-4\">{t('myShop.startFresh')}</p>\r\n              <button\r\n                onClick={() => setShowCreateShop(true)}\r\n                className=\"w-full px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors\"\r\n              >\r\n                {t('myShop.createShop')}\r\n              </button>\r\n            </div>\r\n\r\n            {/* Claim Shop */}\r\n            <div className=\"border border-gray-200 rounded-lg p-6\">\r\n              <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">{t('myShop.claimExistingShop')}</h3>\r\n              <p className=\"text-gray-600 mb-4\">{t('myShop.claimOwnership')}</p>\r\n              <button\r\n                onClick={() => setShowClaimShop(true)}\r\n                className=\"w-full px-4 py-2 bg-gray-600 text-white font-medium rounded-lg hover:bg-gray-700 transition-colors\"\r\n              >\r\n                {t('myShop.claimShop')}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Create Shop Form */}\r\n        {showCreateShop && (\r\n          <div className=\"bg-white rounded-xl shadow-md border border-gray-100 p-8\">\r\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">{t('myShop.createNewShop')}</h2>\r\n            <form onSubmit={handleCreateShop}>\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">{t('myShop.shopName')}</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    required\r\n                    value={shopForm.name || ''}\r\n                    onChange={(e) => setShopForm(prev => ({ ...prev, name: e.target.value }))}\r\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">{t('myShop.address')}</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    required\r\n                    value={shopForm.address || ''}\r\n                    onChange={(e) => setShopForm(prev => ({ ...prev, address: e.target.value }))}\r\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">{t('myShop.phone')}</label>\r\n                  <input\r\n                    type=\"tel\"\r\n                    required\r\n                    value={shopForm.phone || ''}\r\n                    onChange={(e) => setShopForm(prev => ({ ...prev, phone: e.target.value }))}\r\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">{t('myShop.email')}</label>\r\n                  <input\r\n                    type=\"email\"\r\n                    required\r\n                    value={shopForm.email || ''}\r\n                    onChange={(e) => setShopForm(prev => ({ ...prev, email: e.target.value }))}\r\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\r\n                  />\r\n                </div>\r\n                <div className=\"flex gap-4\">\r\n                  <button\r\n                    type=\"submit\"\r\n                    className=\"px-6 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors\"\r\n                  >\r\n                    {t('myShop.createShop')}\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setShowCreateShop(false)}\r\n                    className=\"px-6 py-2 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors\"\r\n                  >\r\n                    {t('common.cancel')}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        )}\r\n\r\n        {/* Claim Shop Form */}\r\n        {showClaimShop && (\r\n          <div className=\"bg-white rounded-xl shadow-md border border-gray-100 p-8\">\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n              <h2 className=\"text-2xl font-bold text-gray-900\">{t('myShop.claimShop')}</h2>\r\n              <button\r\n                onClick={() => setShowClaimShop(false)}\r\n                className=\"px-4 py-2 text-gray-600 hover:text-gray-900\"\r\n              >\r\n                Ã—\r\n              </button>\r\n            </div>\r\n            <p className=\"text-gray-600 mb-6\">\r\n              {t('myShop.selectUnclaimedShop')}\r\n            </p>\r\n            \r\n            {claimLoading ? (\r\n              <div className=\"text-center py-8\">\r\n                <div className=\"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n                <p className=\"mt-2 text-gray-600\">{t('shops.loading')}</p>\r\n              </div>\r\n            ) : unclaimedShops.length === 0 ? (\r\n              <div className=\"text-center py-8 text-gray-500\">\r\n                <p>{t('myShop.noUnclaimedShops')}</p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-3 max-h-96 overflow-y-auto\">\r\n                {unclaimedShops.map((unclaimedShop) => (\r\n                  <div\r\n                    key={unclaimedShop.id}\r\n                    className=\"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors\"\r\n                  >\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div>\r\n                        <h3 className=\"font-semibold text-gray-900\">{unclaimedShop.name}</h3>\r\n                        {unclaimedShop.address && (\r\n                          <p className=\"text-sm text-gray-600 mt-1\">{unclaimedShop.address}</p>\r\n                        )}\r\n                      </div>\r\n                      <button\r\n                        onClick={async () => {\r\n                          if (!user) return;\r\n                          try {\r\n                            setClaimLoading(true);\r\n                            const res = await fetch(`${apiUrl}/shops/${unclaimedShop.id}/claim`, {\r\n                              method: 'POST',\r\n                              headers: {\r\n                                'Content-Type': 'application/json',\r\n                                'x-user-id': user.id,\r\n                              },\r\n                            });\r\n                            \r\n                            if (res.ok) {\r\n                              const claimedShop = await res.json();\r\n                              setShop(claimedShop);\r\n                              setShopForm(claimedShop);\r\n                              setShowClaimShop(false);\r\n                              router.refresh();\r\n                            } else {\r\n                              const error = await res.json();\r\n                              alert(`Error: ${error.error || 'Failed to claim shop'}`);\r\n                            }\r\n                          } catch (error) {\r\n                            console.error('Error claiming shop:', error);\r\n                            alert('Failed to claim shop');\r\n                          } finally {\r\n                            setClaimLoading(false);\r\n                          }\r\n                        }}\r\n                        className=\"px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors\"\r\n                      >\r\n                        {t('myShop.claimShop')}\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // User owns a shop - show management UI\r\n  return (\r\n    <div className=\"max-w-5xl mx-auto px-4 py-6\">\r\n      {/* Section Header */}\r\n      <div className=\"mb-8\">\r\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">{t('myShop.title')}</h1>\r\n        <p className=\"text-lg text-gray-600\">{shop.name}</p>\r\n      </div>\r\n\r\n      {/* Tabs */}\r\n      <div className=\"mb-6 border-b border-gray-200\">\r\n        <div className=\"flex gap-1\">\r\n          {(['overview', 'services', 'bookings', 'photos'] as const).map((tab) => (\r\n            <button\r\n              key={tab}\r\n              onClick={() => {\r\n                setActiveTab(tab);\r\n                // Fetch data when tab is clicked\r\n                if (shop && user) {\r\n                  if (tab === 'services') {\r\n                    fetchServices(shop.id);\r\n                  } else if (tab === 'bookings') {\r\n                    fetchBookings(shop.id);\r\n                  } else if (tab === 'photos') {\r\n                    fetchPhotos(shop.id);\r\n                  }\r\n                }\r\n              }}\r\n              className={`px-6 py-3 font-medium transition-colors relative ${\r\n                activeTab === tab\r\n                  ? 'text-blue-600 font-bold'\r\n                  : 'text-gray-600 hover:text-gray-900'\r\n              }`}\r\n            >\r\n              {t(`myShop.${tab}`)}\r\n              {activeTab === tab && (\r\n                <span className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600\"></span>\r\n              )}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Tab Content */}\r\n      {activeTab === 'overview' && (\r\n        <div className=\"bg-white rounded-xl border border-gray-200 shadow-sm p-6\">\r\n          <div className=\"mb-6\">\r\n            <h2 className=\"text-2xl font-bold text-gray-900\">{t('myShop.shopOverview')}</h2>\r\n            {!editingShop && (\r\n              <button\r\n                onClick={() => setEditingShop(true)}\r\n                className=\"mt-2 text-sm text-blue-600 hover:text-blue-700 font-medium\"\r\n              >\r\n                {t('myShop.editShop')}\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {editingShop ? (\r\n            <form onSubmit={handleUpdateShop}>\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">{t('myShop.shopName')}</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    required\r\n                    value={shopForm.name || ''}\r\n                    onChange={(e) => setShopForm(prev => ({ ...prev, name: e.target.value }))}\r\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">{t('myShop.address')}</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    required\r\n                    value={shopForm.address || ''}\r\n                    onChange={(e) => setShopForm(prev => ({ ...prev, address: e.target.value }))}\r\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\r\n                  />\r\n                </div>\r\n                <div className=\"grid md:grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">{t('myShop.phone')}</label>\r\n                    <input\r\n                      type=\"tel\"\r\n                      required\r\n                      value={shopForm.phone || ''}\r\n                      onChange={(e) => setShopForm(prev => ({ ...prev, phone: e.target.value }))}\r\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">{t('myShop.email')}</label>\r\n                    <input\r\n                      type=\"email\"\r\n                      required\r\n                      value={shopForm.email || ''}\r\n                      onChange={(e) => setShopForm(prev => ({ ...prev, email: e.target.value }))}\r\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">{t('myShop.website')}</label>\r\n                  <input\r\n                    type=\"url\"\r\n                    value={shopForm.website || ''}\r\n                    onChange={(e) => setShopForm(prev => ({ ...prev, website: e.target.value }))}\r\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\r\n                  />\r\n                </div>\r\n                <div className=\"flex gap-4\">\r\n                  <button\r\n                    type=\"submit\"\r\n                    className=\"px-6 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors\"\r\n                  >\r\n                    {t('common.save')}\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      setEditingShop(false);\r\n                      setShopForm(shop ? {\r\n                        name: shop.name || '',\r\n                        address: shop.address || '',\r\n                        phone: shop.phone || '',\r\n                        email: shop.email || '',\r\n                        website: shop.website || '',\r\n                        google_place_id: shop.google_place_id || '',\r\n                        city: shop.city || '',\r\n                        country: shop.country || '',\r\n                        zip_code: shop.zip_code || '',\r\n                        description: shop.description || '',\r\n                        language_code: shop.language_code || '',\r\n                        category: shop.category || null,\r\n                        subcategory: shop.subcategory || null,\r\n                        logo_url: shop.logo_url || null,\r\n                        cover_photo_url: shop.cover_photo_url || null,\r\n                      } : {\r\n                        name: '',\r\n                        address: '',\r\n                        phone: '',\r\n                        email: '',\r\n                        website: '',\r\n                        google_place_id: '',\r\n                        city: '',\r\n                        country: '',\r\n                        zip_code: '',\r\n                        description: '',\r\n                        language_code: '',\r\n                      });\r\n                    }}\r\n                    className=\"px-6 py-2 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors\"\r\n                  >\r\n                    {t('common.cancel')}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          ) : (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"grid md:grid-cols-2 gap-6\">\r\n                <div>\r\n                  <dt className=\"text-sm font-medium text-gray-500 mb-1\">{t('common.name')}</dt>\r\n                  <dd className=\"text-lg text-gray-900\">{shop.name}</dd>\r\n                </div>\r\n                <div>\r\n                  <dt className=\"text-sm font-medium text-gray-500 mb-1\">{t('myShop.address')}</dt>\r\n                  <dd className=\"text-lg text-gray-900\">{shop.address}</dd>\r\n                </div>\r\n                <div>\r\n                  <dt className=\"text-sm font-medium text-gray-500 mb-1\">{t('myShop.phone')}</dt>\r\n                  <dd className=\"text-lg text-gray-900\">{shop.phone}</dd>\r\n                </div>\r\n                <div>\r\n                  <dt className=\"text-sm font-medium text-gray-500 mb-1\">{t('myShop.email')}</dt>\r\n                  <dd className=\"text-lg text-gray-900\">{shop.email}</dd>\r\n                </div>\r\n              </div>\r\n              {shop.website && (\r\n                <div>\r\n                  <dt className=\"text-sm font-medium text-gray-500 mb-1\">{t('myShop.website')}</dt>\r\n                  <dd>\r\n                    <a href={shop.website} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-lg text-blue-600 hover:underline\">\r\n                      {shop.website}\r\n                    </a>\r\n                  </dd>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {activeTab === 'services' && (\r\n        <div className=\"bg-white rounded-xl border border-gray-200 shadow-sm p-6\">\r\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">{t('myShop.services')}</h2>\r\n          \r\n          {/* Create/Edit Service Form */}\r\n          <div className=\"mb-6 border border-gray-200 rounded-lg p-6\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">\r\n              {editingService ? t('myShop.editService') : t('myShop.createNewService')}\r\n            </h3>\r\n            {serviceError && (\r\n              <div className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm\">\r\n                {serviceError}\r\n              </div>\r\n            )}\r\n            <form onSubmit={editingService ? handleUpdateService : handleCreateService} className=\"space-y-4\">\r\n              <div className=\"grid md:grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">{t('myShop.serviceName')} *</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={serviceForm.name}\r\n                    onChange={(e) => setServiceForm(prev => ({ ...prev, name: e.target.value }))}\r\n                    required\r\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\r\n                    placeholder={t('myShop.serviceName')}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">{t('myShop.servicePrice')} *</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={serviceForm.price}\r\n                    onChange={(e) => setServiceForm(prev => ({ ...prev, price: parseFloat(e.target.value) || 0 }))}\r\n                    required\r\n                    min=\"0\"\r\n                    step=\"0.01\"\r\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">{t('myShop.serviceDescription')}</label>\r\n                <textarea\r\n                  value={serviceForm.description}\r\n                  onChange={(e) => setServiceForm(prev => ({ ...prev, description: e.target.value }))}\r\n                  rows={3}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\r\n                  placeholder={t('myShop.serviceDescription')}\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">{t('myShop.serviceDuration')} *</label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={serviceForm.duration_minutes}\r\n                  onChange={(e) => setServiceForm(prev => ({ ...prev, duration_minutes: parseInt(e.target.value) || 0 }))}\r\n                  required\r\n                  min=\"1\"\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\r\n                />\r\n              </div>\r\n              <div className=\"flex gap-4\">\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"px-6 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors\"\r\n                >\r\n                  {editingService ? t('common.update') : t('common.create')}\r\n                </button>\r\n                {editingService && (\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      setEditingService(null);\r\n                      setServiceForm({ name: '', description: '', price: 0, duration_minutes: 0 });\r\n                    }}\r\n                    className=\"px-6 py-2 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors\"\r\n                  >\r\n                    {t('common.cancel')}\r\n                  </button>\r\n                )}\r\n              </div>\r\n            </form>\r\n          </div>\r\n          \r\n          {/* Services List */}\r\n          {services.length === 0 ? (\r\n            <div className=\"border border-gray-200 rounded-lg p-8 text-center\">\r\n              <div className=\"text-4xl mb-4\">âš™ï¸</div>\r\n              <p className=\"text-gray-600 mb-2\">{t('myShop.noServices')}</p>\r\n              <p className=\"text-sm text-gray-500\">{t('myShop.createFirstService')}</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"w-full\">\r\n                <thead>\r\n                  <tr className=\"border-b border-gray-200\">\r\n                    <th className=\"text-left py-3 px-4 font-semibold text-gray-700\">{t('common.name')}</th>\r\n                    <th className=\"text-left py-3 px-4 font-semibold text-gray-700\">{t('common.description')}</th>\r\n                    <th className=\"text-left py-3 px-4 font-semibold text-gray-700\">{t('common.price')}</th>\r\n                    <th className=\"text-left py-3 px-4 font-semibold text-gray-700\">{t('common.duration')}</th>\r\n                    <th className=\"text-left py-3 px-4 font-semibold text-gray-700\">{t('common.actions')}</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {services.map((service) => (\r\n                    <tr key={service.id} className=\"border-b border-gray-100 hover:bg-gray-50 transition-colors\">\r\n                      <td className=\"py-3 px-4 text-gray-900 font-medium\">{service.name}</td>\r\n                      <td className=\"py-3 px-4 text-gray-600\">{service.description || 'N/A'}</td>\r\n                      <td className=\"py-3 px-4 text-gray-700\">${service.price}</td>\r\n                      <td className=\"py-3 px-4 text-gray-700\">{service.duration_minutes || 0} min</td>\r\n                      <td className=\"py-3 px-4\">\r\n                        <div className=\"flex gap-2\">\r\n                          <button\r\n                            onClick={() => startEditService(service)}\r\n                            className=\"text-blue-600 hover:text-blue-800 text-sm font-medium\"\r\n                          >\r\n                            {t('common.edit')}\r\n                          </button>\r\n                          <button\r\n                            onClick={() => handleDeleteService(service.id)}\r\n                            className=\"text-red-600 hover:text-red-800 text-sm font-medium\"\r\n                          >\r\n                            {t('common.delete')}\r\n                          </button>\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n\r\n      {activeTab === 'bookings' && (\r\n        <div className=\"bg-white rounded-xl border border-gray-200 shadow-sm p-6\">\r\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">{t('myShop.bookings')}</h2>\r\n          {bookings.length === 0 ? (\r\n            <div className=\"border border-gray-200 rounded-lg p-8 text-center\">\r\n              <div className=\"text-4xl mb-4\">ðŸ“…</div>\r\n              <p className=\"text-gray-600 mb-2\">{t('myShop.noBookings')}</p>\r\n              <p className=\"text-sm text-gray-500\">{t('myShop.bookingsWillAppear')}</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"w-full\">\r\n                <thead>\r\n                  <tr className=\"border-b border-gray-200\">\r\n                    <th className=\"text-left py-3 px-4 font-semibold text-gray-700\">{t('myShop.customer')}</th>\r\n                    <th className=\"text-left py-3 px-4 font-semibold text-gray-700\">{t('common.email')}</th>\r\n                    <th className=\"text-left py-3 px-4 font-semibold text-gray-700\">{t('common.phone')}</th>\r\n                    <th className=\"text-left py-3 px-4 font-semibold text-gray-700\">{t('myShop.dateTime')}</th>\r\n                    <th className=\"text-left py-3 px-4 font-semibold text-gray-700\">{t('myShop.service')}</th>\r\n                    <th className=\"text-left py-3 px-4 font-semibold text-gray-700\">{t('common.status')}</th>\r\n                    <th className=\"text-left py-3 px-4 font-semibold text-gray-700\">{t('common.actions')}</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {bookings.map((booking) => (\r\n                    <tr key={booking.id} className=\"border-b border-gray-100 hover:bg-gray-50 transition-colors\">\r\n                      <td className=\"py-3 px-4 text-gray-900 font-medium\">\r\n                        {booking.customer_name || t('common.unknown')}\r\n                      </td>\r\n                      <td className=\"py-3 px-4 text-gray-600\">{booking.customer_email || 'N/A'}</td>\r\n                      <td className=\"py-3 px-4 text-gray-600\">{booking.customer_phone || 'N/A'}</td>\r\n                      <td className=\"py-3 px-4 text-gray-700\">\r\n                        {booking.start_time ? new Date(booking.start_time).toLocaleString() : 'N/A'}\r\n                      </td>\r\n                      <td className=\"py-3 px-4 text-gray-600\">\r\n                        {(booking as any).services?.name || 'N/A'}\r\n                      </td>\r\n                      <td className=\"py-3 px-4\">\r\n                        <span className={`px-3 py-1 rounded-full text-sm font-medium ${\r\n                          booking.status === 'confirmed' ? 'bg-green-100 text-green-700' :\r\n                          booking.status === 'rejected' ? 'bg-red-100 text-red-700' :\r\n                          booking.status === 'cancelled' ? 'bg-gray-100 text-gray-700' :\r\n                          booking.status === 'completed' ? 'bg-blue-100 text-blue-700' :\r\n                          'bg-yellow-100 text-yellow-700'\r\n                        }`}>\r\n                          {t(`status.${booking.status || 'pending'}`)}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"py-3 px-4\">\r\n                        <div className=\"flex gap-2 flex-wrap\">\r\n                          {(!booking.status || booking.status === 'pending') && (\r\n                            <>\r\n                              <button\r\n                                onClick={() => openStatusUpdateModal(booking.id, 'confirmed', booking.customer_name || null)}\r\n                                className=\"px-3 py-1.5 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors font-medium\"\r\n                              >\r\n                                {t('common.confirm')}\r\n                              </button>\r\n                              <button\r\n                                onClick={() => openStatusUpdateModal(booking.id, 'rejected', booking.customer_name || null)}\r\n                                className=\"px-3 py-1.5 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors font-medium\"\r\n                              >\r\n                                {t('common.reject')}\r\n                              </button>\r\n                            </>\r\n                          )}\r\n                          {booking.status && booking.status !== 'cancelled' && booking.status !== 'completed' && (\r\n                            <>\r\n                              <button\r\n                                onClick={() => openCancelModal(booking.id, booking.customer_name || null)}\r\n                                className=\"px-3 py-1.5 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors font-medium\"\r\n                              >\r\n                                {t('booking.cancelBooking')}\r\n                              </button>\r\n                              <button\r\n                                onClick={() => openRescheduleModal(booking.id, booking.customer_name || null, booking.start_time)}\r\n                                className=\"px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors font-medium\"\r\n                              >\r\n                                {t('booking.rescheduleBooking')}\r\n                              </button>\r\n                            </>\r\n                          )}\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {activeTab === 'photos' && (\r\n        <div className=\"bg-white rounded-xl border border-gray-200 shadow-sm p-6\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <h2 className=\"text-2xl font-bold text-gray-900\">{t('myShop.photos')}</h2>\r\n            <button\r\n              onClick={handleSavePhotos}\r\n              className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium\"\r\n            >\r\n              {t('common.save')}\r\n            </button>\r\n          </div>\r\n          \r\n          {/* Toast Notification */}\r\n          {photoToast && (\r\n            <div className={`mb-4 p-3 rounded-lg ${\r\n              photoToast.type === 'success' \r\n                ? 'bg-green-100 text-green-700 border border-green-300' \r\n                : 'bg-red-100 text-red-700 border border-red-300'\r\n            }`}>\r\n              {photoToast.message}\r\n            </div>\r\n          )}\r\n          \r\n          {/* Logo Upload */}\r\n          <div className=\"mb-8\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-3\">{t('myShop.shopLogo')}</h3>\r\n            <div className=\"flex items-center gap-4\">\r\n              {(() => {\r\n                const logoPhoto = photos.find(p => p.type === 'logo');\r\n                const logoUrl = logoPhoto?.url || shop.logo_url;\r\n                return logoUrl ? (\r\n                  <img src={logoUrl} alt=\"Logo\" className=\"w-24 h-24 object-cover rounded-lg border border-gray-200\" />\r\n                ) : (\r\n                  <div className=\"w-24 h-24 bg-gray-100 rounded-lg border border-gray-200 flex items-center justify-center text-gray-400\">\r\n                    {t('myShop.noLogo')}\r\n                  </div>\r\n                );\r\n              })()}\r\n              <input\r\n                type=\"file\"\r\n                accept=\"image/jpeg,image/png\"\r\n                onChange={(e) => handlePhotoUpload(e, 'logo')}\r\n                className=\"hidden\"\r\n                id=\"logo-upload\"\r\n              />\r\n              <label\r\n                htmlFor=\"logo-upload\"\r\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer transition-colors\"\r\n              >\r\n                {photos.find(p => p.type === 'logo') || shop.logo_url ? t('myShop.changeLogo') : t('myShop.uploadLogo')}\r\n              </label>\r\n              {(() => {\r\n                const logoPhoto = photos.find(p => p.type === 'logo');\r\n                if (logoPhoto) {\r\n                  return (\r\n                    <button\r\n                      onClick={() => handlePhotoDelete(logoPhoto.id, 'logo')}\r\n                      className=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\"\r\n                    >\r\n                      {t('common.delete')}\r\n                    </button>\r\n                  );\r\n                }\r\n                return null;\r\n              })()}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Cover Photo Upload */}\r\n          <div className=\"mb-8\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-3\">{t('myShop.coverPhoto')}</h3>\r\n            <div className=\"flex items-center gap-4\">\r\n              {(() => {\r\n                const coverPhoto = photos.find(p => p.type === 'cover');\r\n                const coverUrl = coverPhoto?.url || shop.cover_photo_url;\r\n                return coverUrl ? (\r\n                  <img src={coverUrl} alt=\"Cover\" className=\"w-48 h-32 object-cover rounded-lg border border-gray-200\" />\r\n                ) : (\r\n                  <div className=\"w-48 h-32 bg-gray-100 rounded-lg border border-gray-200 flex items-center justify-center text-gray-400\">\r\n                    {t('myShop.noCoverPhoto')}\r\n                  </div>\r\n                );\r\n              })()}\r\n              <input\r\n                type=\"file\"\r\n                accept=\"image/jpeg,image/png\"\r\n                onChange={(e) => handlePhotoUpload(e, 'cover')}\r\n                className=\"hidden\"\r\n                id=\"cover-upload\"\r\n              />\r\n              <label\r\n                htmlFor=\"cover-upload\"\r\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer transition-colors\"\r\n              >\r\n                {photos.find(p => p.type === 'cover') || shop.cover_photo_url ? t('myShop.changeCover') : t('myShop.uploadCover')}\r\n              </label>\r\n              {(() => {\r\n                const coverPhoto = photos.find(p => p.type === 'cover');\r\n                if (coverPhoto) {\r\n                  return (\r\n                    <button\r\n                      onClick={() => handlePhotoDelete(coverPhoto.id, 'cover')}\r\n                      className=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\"\r\n                    >\r\n                      {t('common.delete')}\r\n                    </button>\r\n                  );\r\n                }\r\n                return null;\r\n              })()}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Gallery Photos */}\r\n          <div>\r\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-3\">{t('myShop.galleryPhotos')}</h3>\r\n            <input\r\n              type=\"file\"\r\n              accept=\"image/jpeg,image/png,image/jpg\"\r\n              onChange={(e) => handlePhotoUpload(e, 'gallery')}\r\n              className=\"hidden\"\r\n              id=\"gallery-upload\"\r\n            />\r\n            <label\r\n              htmlFor=\"gallery-upload\"\r\n              className=\"inline-block px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer transition-colors mb-4\"\r\n            >\r\n              {t('myShop.uploadGalleryPhoto')}\r\n            </label>\r\n            {photos.filter(p => p.type === 'gallery').length === 0 ? (\r\n              <div className=\"border border-gray-200 rounded-lg p-8 text-center bg-gray-50\">\r\n                <div className=\"text-2xl mb-2\">ðŸ“¸</div>\r\n                <p className=\"text-sm text-gray-500\">{t('myShop.noGalleryPhotos')}</p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\r\n                {photos.filter(p => p.type === 'gallery').map((photo) => (\r\n                  <div key={photo.id} className=\"relative group\">\r\n                    <img \r\n                      src={photo.url} \r\n                      alt=\"Gallery\" \r\n                      className=\"w-full h-48 object-cover rounded-lg border border-gray-200\"\r\n                      onError={(e) => {\r\n                        console.error('Error loading image:', photo.url);\r\n                        (e.target as HTMLImageElement).src = 'data:image/svg+xml,%3Csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"200\" height=\"200\"%3E%3Crect fill=\"%23ddd\" width=\"200\" height=\"200\"/%3E%3Ctext fill=\"%23999\" font-family=\"sans-serif\" font-size=\"14\" x=\"50%25\" y=\"50%25\" text-anchor=\"middle\" dy=\".3em\"%3EImage not found%3C/text%3E%3C/svg%3E';\r\n                      }}\r\n                    />\r\n                    <button\r\n                      onClick={() => handlePhotoDelete(photo.id, 'gallery')}\r\n                      className=\"absolute top-2 right-2 px-3 py-1 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors opacity-0 group-hover:opacity-100 shadow-lg\"\r\n                    >\r\n                      {t('common.delete')}\r\n                    </button>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Status Update Confirmation Modal */}\r\n      {statusUpdateModal.isOpen && (\r\n        <div \r\n          className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50\" \r\n          onClick={closeStatusUpdateModal}\r\n          onMouseDown={(e) => {\r\n            if (e.target === e.currentTarget) {\r\n              closeStatusUpdateModal();\r\n            }\r\n          }}\r\n        >\r\n          <div \r\n            className=\"bg-white rounded-xl shadow-2xl max-w-md w-full p-6 relative\" \r\n            onClick={(e) => e.stopPropagation()}\r\n            onMouseDown={(e) => e.stopPropagation()}\r\n          >\r\n            <button\r\n              type=\"button\"\r\n              onClick={closeStatusUpdateModal}\r\n              className=\"absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-2xl leading-none\"\r\n            >\r\n              Ã—\r\n            </button>\r\n            \r\n            <h3 className=\"text-xl font-bold text-gray-900 mb-4\">\r\n              {statusUpdateModal.newStatus === 'confirmed' ? t('myShop.confirmBooking') : t('myShop.rejectBooking')}\r\n            </h3>\r\n            \r\n            <p className=\"text-gray-600 mb-6\">\r\n              {statusUpdateModal.newStatus === 'confirmed' ? t('myShop.areYouSureConfirm') : t('myShop.areYouSureReject')} {statusUpdateModal.bookingCustomerName ? `${t('common.for')} ${statusUpdateModal.bookingCustomerName}` : ''}?\r\n            </p>\r\n\r\n            {statusUpdateMessage && (\r\n              <div className={`mb-4 p-3 rounded-lg ${\r\n                statusUpdateMessage.type === 'success' \r\n                  ? 'bg-green-100 text-green-700' \r\n                  : 'bg-red-100 text-red-700'\r\n              }`}>\r\n                {statusUpdateMessage.text}\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"flex gap-3 justify-end\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={closeStatusUpdateModal}\r\n                disabled={statusUpdateLoading}\r\n                className=\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              >\r\n                {t('common.cancel')}\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                onClick={handleUpdateBookingStatus}\r\n                disabled={statusUpdateLoading}\r\n                className={`px-4 py-2 rounded-lg text-white font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${\r\n                  statusUpdateModal.newStatus === 'confirmed'\r\n                    ? 'bg-green-600 hover:bg-green-700'\r\n                    : 'bg-red-600 hover:bg-red-700'\r\n                }`}\r\n              >\r\n                {statusUpdateLoading ? t('common.updating') : statusUpdateModal.newStatus === 'confirmed' ? t('common.confirm') : t('common.reject')}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Cancel Booking Confirmation Modal */}\r\n      {cancelModal.isOpen && (\r\n        <div \r\n          className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50\" \r\n          onClick={closeCancelModal}\r\n          onMouseDown={(e) => {\r\n            if (e.target === e.currentTarget) {\r\n              closeCancelModal();\r\n            }\r\n          }}\r\n        >\r\n          <div \r\n            className=\"bg-white rounded-xl shadow-2xl max-w-md w-full p-6 relative\" \r\n            onClick={(e) => e.stopPropagation()}\r\n            onMouseDown={(e) => e.stopPropagation()}\r\n          >\r\n            <button\r\n              type=\"button\"\r\n              onClick={closeCancelModal}\r\n              className=\"absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-2xl leading-none\"\r\n            >\r\n              Ã—\r\n            </button>\r\n            \r\n            <h3 className=\"text-xl font-bold text-gray-900 mb-4\">\r\n              {t('booking.cancelBooking')}\r\n            </h3>\r\n            \r\n            <p className=\"text-gray-600 mb-6\">\r\n              {t('booking.cancelConfirm')} {cancelModal.bookingCustomerName ? `${t('common.for')} ${cancelModal.bookingCustomerName}` : ''}?\r\n            </p>\r\n\r\n            {cancelMessage && (\r\n              <div className={`mb-4 p-3 rounded-lg ${\r\n                cancelMessage.type === 'success' \r\n                  ? 'bg-green-100 text-green-700' \r\n                  : 'bg-red-100 text-red-700'\r\n              }`}>\r\n                {cancelMessage.text}\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"flex gap-3 justify-end\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={closeCancelModal}\r\n                disabled={cancelLoading}\r\n                className=\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              >\r\n                {t('common.no')}, {t('common.keepIt')}\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                onClick={handleCancelBooking}\r\n                disabled={cancelLoading}\r\n                className=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              >\r\n                {cancelLoading ? t('common.cancelling') : `${t('common.yes')}, ${t('booking.cancelBooking')}`}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Reschedule Booking Modal */}\r\n      {rescheduleModal.isOpen && (\r\n        <div \r\n          className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50\" \r\n          onClick={closeRescheduleModal}\r\n          onMouseDown={(e) => {\r\n            if (e.target === e.currentTarget) {\r\n              closeRescheduleModal();\r\n            }\r\n          }}\r\n        >\r\n          <div \r\n            className=\"bg-white rounded-xl shadow-2xl max-w-md w-full p-6 relative\" \r\n            onClick={(e) => e.stopPropagation()}\r\n            onMouseDown={(e) => e.stopPropagation()}\r\n          >\r\n            <button\r\n              type=\"button\"\r\n              onClick={closeRescheduleModal}\r\n              className=\"absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-2xl leading-none\"\r\n            >\r\n              Ã—\r\n            </button>\r\n            \r\n            <h3 className=\"text-xl font-bold text-gray-900 mb-4\">\r\n              {t('booking.rescheduleBooking')}\r\n            </h3>\r\n            \r\n            <p className=\"text-gray-600 mb-4\">\r\n              {rescheduleModal.bookingCustomerName ? `${t('booking.rescheduleConfirm')} ${rescheduleModal.bookingCustomerName}` : t('booking.rescheduleBooking')}:\r\n            </p>\r\n\r\n            {rescheduleModal.currentDateTime && (\r\n              <p className=\"text-sm text-gray-500 mb-4\">\r\n                {t('booking.current')}: {new Date(rescheduleModal.currentDateTime).toLocaleString()}\r\n              </p>\r\n            )}\r\n\r\n            <div className=\"mb-4\">\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                {t('booking.newDateTime')}\r\n              </label>\r\n              <input\r\n                type=\"datetime-local\"\r\n                value={newDateTime}\r\n                onChange={(e) => setNewDateTime(e.target.value)}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            {rescheduleMessage && (\r\n              <div className={`mb-4 p-3 rounded-lg ${\r\n                rescheduleMessage.type === 'success' \r\n                  ? 'bg-green-100 text-green-700' \r\n                  : 'bg-red-100 text-red-700'\r\n              }`}>\r\n                {rescheduleMessage.text}\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"flex gap-3 justify-end\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={closeRescheduleModal}\r\n                disabled={rescheduleLoading}\r\n                className=\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              >\r\n                {t('common.cancel')}\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                onClick={handleRescheduleBooking}\r\n                disabled={rescheduleLoading || !newDateTime}\r\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              >\r\n                {rescheduleLoading ? t('common.rescheduling') : t('booking.rescheduleBooking')}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MyShopPage;\r\n\r\n"],"names":[],"mappings":"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"}}]
}