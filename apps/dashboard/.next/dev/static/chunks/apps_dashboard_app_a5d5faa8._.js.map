{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/81704/bookyo/apps/dashboard/app/components/AnalyticsCard.tsx"],"sourcesContent":["// apps/dashboard/app/components/AnalyticsCard.tsx\r\n// Reusable card component for displaying analytics metrics\r\n\r\n\"use client\";\r\nimport React from 'react';\r\n\r\ninterface AnalyticsCardProps {\r\n  title: string;\r\n  value: string | number;\r\n  change?: number;\r\n  changeLabel?: string;\r\n  icon?: React.ReactNode;\r\n  subtitle?: string;\r\n}\r\n\r\nexport default function AnalyticsCard({\r\n  title,\r\n  value,\r\n  change,\r\n  changeLabel,\r\n  icon,\r\n  subtitle,\r\n}: AnalyticsCardProps) {\r\n  const changeColor =\r\n    change !== undefined\r\n      ? change >= 0\r\n        ? 'text-green-600'\r\n        : 'text-red-600'\r\n      : 'text-gray-600';\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n      <div className=\"flex items-center justify-between mb-2\">\r\n        <h3 className=\"text-sm font-medium text-gray-600\">{title}</h3>\r\n        {icon && <div className=\"text-gray-400\">{icon}</div>}\r\n      </div>\r\n      <div className=\"flex items-baseline gap-2\">\r\n        <p className=\"text-3xl font-bold text-gray-900\">{value}</p>\r\n        {change !== undefined && (\r\n          <span className={`text-sm font-medium ${changeColor}`}>\r\n            {change >= 0 ? '+' : ''}\r\n            {change}%\r\n          </span>\r\n        )}\r\n      </div>\r\n      {changeLabel && (\r\n        <p className=\"text-xs text-gray-500 mt-1\">{changeLabel}</p>\r\n      )}\r\n      {subtitle && <p className=\"text-sm text-gray-500 mt-2\">{subtitle}</p>}\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"AAAA,kDAAkD;AAClD,2DAA2D;;;;;;AAE3D;;AAYe,SAAS,cAAc,EACpC,KAAK,EACL,KAAK,EACL,MAAM,EACN,WAAW,EACX,IAAI,EACJ,QAAQ,EACW;IACnB,MAAM,cACJ,WAAW,YACP,UAAU,IACR,mBACA,iBACF;IAEN,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAAqC;;;;;;oBAClD,sBAAQ,6LAAC;wBAAI,WAAU;kCAAiB;;;;;;;;;;;;0BAE3C,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAE,WAAU;kCAAoC;;;;;;oBAChD,WAAW,2BACV,6LAAC;wBAAK,WAAW,CAAC,oBAAoB,EAAE,aAAa;;4BAClD,UAAU,IAAI,MAAM;4BACpB;4BAAO;;;;;;;;;;;;;YAIb,6BACC,6LAAC;gBAAE,WAAU;0BAA8B;;;;;;YAE5C,0BAAY,6LAAC;gBAAE,WAAU;0BAA8B;;;;;;;;;;;;AAG9D;KApCwB"}},
    {"offset": {"line": 105, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/81704/bookyo/apps/dashboard/app/components/LineChart.tsx"],"sourcesContent":["// apps/dashboard/app/components/LineChart.tsx\r\n// Simple line chart component using SVG\r\n\r\n\"use client\";\r\nimport React from 'react';\r\n\r\ninterface DataPoint {\r\n  x: string | number;\r\n  y: number;\r\n}\r\n\r\ninterface LineChartProps {\r\n  data: DataPoint[];\r\n  xLabel?: string;\r\n  yLabel?: string;\r\n  height?: number;\r\n  color?: string;\r\n}\r\n\r\nexport default function LineChart({\r\n  data,\r\n  xLabel,\r\n  yLabel,\r\n  height = 200,\r\n  color = '#3B82F6',\r\n}: LineChartProps) {\r\n  if (!data || data.length === 0) {\r\n    return (\r\n      <div\r\n        className=\"flex items-center justify-center text-gray-500\"\r\n        style={{ height }}\r\n      >\r\n        No data available\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const padding = 40;\r\n  const chartWidth = 600;\r\n  const chartHeight = height - padding * 2;\r\n\r\n  const maxY = Math.max(...data.map((d) => d.y), 1);\r\n  const minY = Math.min(...data.map((d) => d.y), 0);\r\n\r\n  const xScale = (index: number) =>\r\n    (index / (data.length - 1 || 1)) * (chartWidth - padding * 2) + padding;\r\n  const yScale = (value: number) =>\r\n    chartHeight -\r\n    ((value - minY) / (maxY - minY || 1)) * (chartHeight - padding) +\r\n    padding;\r\n\r\n  const points = data\r\n    .map((d, i) => `${xScale(i)},${yScale(d.y)}`)\r\n    .join(' ');\r\n\r\n  return (\r\n    <div className=\"w-full\">\r\n      <svg\r\n        viewBox={`0 0 ${chartWidth} ${height}`}\r\n        className=\"w-full h-full\"\r\n        preserveAspectRatio=\"xMidYMid meet\"\r\n      >\r\n        {/* Grid lines */}\r\n        {[0, 0.25, 0.5, 0.75, 1].map((ratio) => {\r\n          const y = padding + ratio * (chartHeight - padding);\r\n          return (\r\n            <line\r\n              key={ratio}\r\n              x1={padding}\r\n              y1={y}\r\n              x2={chartWidth - padding}\r\n              y2={y}\r\n              stroke=\"#E5E7EB\"\r\n              strokeWidth=\"1\"\r\n            />\r\n          );\r\n        })}\r\n\r\n        {/* Line */}\r\n        <polyline\r\n          points={points}\r\n          fill=\"none\"\r\n          stroke={color}\r\n          strokeWidth=\"2\"\r\n        />\r\n\r\n        {/* Data points */}\r\n        {data.map((d, i) => (\r\n          <circle\r\n            key={i}\r\n            cx={xScale(i)}\r\n            cy={yScale(d.y)}\r\n            r=\"4\"\r\n            fill={color}\r\n          />\r\n        ))}\r\n\r\n        {/* Labels */}\r\n        {xLabel && (\r\n          <text\r\n            x={chartWidth / 2}\r\n            y={height - 10}\r\n            textAnchor=\"middle\"\r\n            className=\"text-xs fill-gray-600\"\r\n          >\r\n            {xLabel}\r\n          </text>\r\n        )}\r\n        {yLabel && (\r\n          <text\r\n            x={15}\r\n            y={height / 2}\r\n            textAnchor=\"middle\"\r\n            className=\"text-xs fill-gray-600\"\r\n            transform={`rotate(-90, 15, ${height / 2})`}\r\n          >\r\n            {yLabel}\r\n          </text>\r\n        )}\r\n      </svg>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"AAAA,8CAA8C;AAC9C,wCAAwC;;;;;;AAExC;;AAgBe,SAAS,UAAU,EAChC,IAAI,EACJ,MAAM,EACN,MAAM,EACN,SAAS,GAAG,EACZ,QAAQ,SAAS,EACF;IACf,IAAI,CAAC,QAAQ,KAAK,MAAM,KAAK,GAAG;QAC9B,qBACE,6LAAC;YACC,WAAU;YACV,OAAO;gBAAE;YAAO;sBACjB;;;;;;IAIL;IAEA,MAAM,UAAU;IAChB,MAAM,aAAa;IACnB,MAAM,cAAc,SAAS,UAAU;IAEvC,MAAM,OAAO,KAAK,GAAG,IAAI,KAAK,GAAG,CAAC,CAAC,IAAM,EAAE,CAAC,GAAG;IAC/C,MAAM,OAAO,KAAK,GAAG,IAAI,KAAK,GAAG,CAAC,CAAC,IAAM,EAAE,CAAC,GAAG;IAE/C,MAAM,SAAS,CAAC,QACd,AAAC,QAAQ,CAAC,KAAK,MAAM,GAAG,KAAK,CAAC,IAAK,CAAC,aAAa,UAAU,CAAC,IAAI;IAClE,MAAM,SAAS,CAAC,QACd,cACA,AAAC,CAAC,QAAQ,IAAI,IAAI,CAAC,OAAO,QAAQ,CAAC,IAAK,CAAC,cAAc,OAAO,IAC9D;IAEF,MAAM,SAAS,KACZ,GAAG,CAAC,CAAC,GAAG,IAAM,GAAG,OAAO,GAAG,CAAC,EAAE,OAAO,EAAE,CAAC,GAAG,EAC3C,IAAI,CAAC;IAER,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YACC,SAAS,CAAC,IAAI,EAAE,WAAW,CAAC,EAAE,QAAQ;YACtC,WAAU;YACV,qBAAoB;;gBAGnB;oBAAC;oBAAG;oBAAM;oBAAK;oBAAM;iBAAE,CAAC,GAAG,CAAC,CAAC;oBAC5B,MAAM,IAAI,UAAU,QAAQ,CAAC,cAAc,OAAO;oBAClD,qBACE,6LAAC;wBAEC,IAAI;wBACJ,IAAI;wBACJ,IAAI,aAAa;wBACjB,IAAI;wBACJ,QAAO;wBACP,aAAY;uBANP;;;;;gBASX;8BAGA,6LAAC;oBACC,QAAQ;oBACR,MAAK;oBACL,QAAQ;oBACR,aAAY;;;;;;gBAIb,KAAK,GAAG,CAAC,CAAC,GAAG,kBACZ,6LAAC;wBAEC,IAAI,OAAO;wBACX,IAAI,OAAO,EAAE,CAAC;wBACd,GAAE;wBACF,MAAM;uBAJD;;;;;gBASR,wBACC,6LAAC;oBACC,GAAG,aAAa;oBAChB,GAAG,SAAS;oBACZ,YAAW;oBACX,WAAU;8BAET;;;;;;gBAGJ,wBACC,6LAAC;oBACC,GAAG;oBACH,GAAG,SAAS;oBACZ,YAAW;oBACX,WAAU;oBACV,WAAW,CAAC,gBAAgB,EAAE,SAAS,EAAE,CAAC,CAAC;8BAE1C;;;;;;;;;;;;;;;;;AAMb;KAvGwB"}},
    {"offset": {"line": 229, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/81704/bookyo/apps/dashboard/app/components/BarChart.tsx"],"sourcesContent":["// apps/dashboard/app/components/BarChart.tsx\r\n// Simple bar chart component using SVG\r\n\r\n\"use client\";\r\nimport React from 'react';\r\n\r\ninterface BarData {\r\n  label: string;\r\n  value: number;\r\n  color?: string;\r\n}\r\n\r\ninterface BarChartProps {\r\n  data: BarData[];\r\n  height?: number;\r\n  showValues?: boolean;\r\n}\r\n\r\nexport default function BarChart({\r\n  data,\r\n  height = 200,\r\n  showValues = true,\r\n}: BarChartProps) {\r\n  if (!data || data.length === 0) {\r\n    return (\r\n      <div\r\n        className=\"flex items-center justify-center text-gray-500\"\r\n        style={{ height }}\r\n      >\r\n        No data available\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const padding = 40;\r\n  const barWidth = Math.max(20, (600 - padding * 2) / data.length - 10);\r\n  const maxValue = Math.max(...data.map((d) => d.value), 1);\r\n\r\n  return (\r\n    <div className=\"w-full\">\r\n      <svg\r\n        viewBox={`0 0 600 ${height}`}\r\n        className=\"w-full h-full\"\r\n        preserveAspectRatio=\"xMidYMid meet\"\r\n      >\r\n        {/* Bars */}\r\n        {data.map((d, i) => {\r\n          const barHeight = (d.value / maxValue) * (height - padding * 2);\r\n          const x = padding + i * (barWidth + 10);\r\n          const y = height - padding - barHeight;\r\n          const color = d.color || '#3B82F6';\r\n\r\n          return (\r\n            <g key={i}>\r\n              <rect\r\n                x={x}\r\n                y={y}\r\n                width={barWidth}\r\n                height={barHeight}\r\n                fill={color}\r\n                rx=\"4\"\r\n              />\r\n              {showValues && d.value > 0 && (\r\n                <text\r\n                  x={x + barWidth / 2}\r\n                  y={y - 5}\r\n                  textAnchor=\"middle\"\r\n                  className=\"text-xs fill-gray-700 font-medium\"\r\n                >\r\n                  {d.value}\r\n                </text>\r\n              )}\r\n              <text\r\n                x={x + barWidth / 2}\r\n                y={height - 10}\r\n                textAnchor=\"middle\"\r\n                className=\"text-xs fill-gray-600\"\r\n                transform={`rotate(-45, ${x + barWidth / 2}, ${height - 10})`}\r\n              >\r\n                {d.label}\r\n              </text>\r\n            </g>\r\n          );\r\n        })}\r\n      </svg>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"AAAA,6CAA6C;AAC7C,uCAAuC;;;;;;AAEvC;;AAee,SAAS,SAAS,EAC/B,IAAI,EACJ,SAAS,GAAG,EACZ,aAAa,IAAI,EACH;IACd,IAAI,CAAC,QAAQ,KAAK,MAAM,KAAK,GAAG;QAC9B,qBACE,6LAAC;YACC,WAAU;YACV,OAAO;gBAAE;YAAO;sBACjB;;;;;;IAIL;IAEA,MAAM,UAAU;IAChB,MAAM,WAAW,KAAK,GAAG,CAAC,IAAI,CAAC,MAAM,UAAU,CAAC,IAAI,KAAK,MAAM,GAAG;IAClE,MAAM,WAAW,KAAK,GAAG,IAAI,KAAK,GAAG,CAAC,CAAC,IAAM,EAAE,KAAK,GAAG;IAEvD,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YACC,SAAS,CAAC,QAAQ,EAAE,QAAQ;YAC5B,WAAU;YACV,qBAAoB;sBAGnB,KAAK,GAAG,CAAC,CAAC,GAAG;gBACZ,MAAM,YAAY,AAAC,EAAE,KAAK,GAAG,WAAY,CAAC,SAAS,UAAU,CAAC;gBAC9D,MAAM,IAAI,UAAU,IAAI,CAAC,WAAW,EAAE;gBACtC,MAAM,IAAI,SAAS,UAAU;gBAC7B,MAAM,QAAQ,EAAE,KAAK,IAAI;gBAEzB,qBACE,6LAAC;;sCACC,6LAAC;4BACC,GAAG;4BACH,GAAG;4BACH,OAAO;4BACP,QAAQ;4BACR,MAAM;4BACN,IAAG;;;;;;wBAEJ,cAAc,EAAE,KAAK,GAAG,mBACvB,6LAAC;4BACC,GAAG,IAAI,WAAW;4BAClB,GAAG,IAAI;4BACP,YAAW;4BACX,WAAU;sCAET,EAAE,KAAK;;;;;;sCAGZ,6LAAC;4BACC,GAAG,IAAI,WAAW;4BAClB,GAAG,SAAS;4BACZ,YAAW;4BACX,WAAU;4BACV,WAAW,CAAC,YAAY,EAAE,IAAI,WAAW,EAAE,EAAE,EAAE,SAAS,GAAG,CAAC,CAAC;sCAE5D,EAAE,KAAK;;;;;;;mBA1BJ;;;;;YA8BZ;;;;;;;;;;;AAIR;KArEwB"}},
    {"offset": {"line": 331, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/81704/bookyo/apps/dashboard/app/%28owner%29/analytics/page.tsx"],"sourcesContent":["// apps/dashboard/app/(owner)/analytics/page.tsx\r\n// Analytics dashboard for shop owners\r\n\r\n\"use client\";\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '@/lib/useAuth';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useTranslations } from 'next-intl';\r\nimport { apiUrl } from '@/lib/apiClient';\r\nimport AnalyticsCard from '../../components/AnalyticsCard';\r\nimport LineChart from '../../components/LineChart';\r\nimport BarChart from '../../components/BarChart';\r\n\r\ninterface Shop {\r\n  id: string;\r\n  name: string;\r\n}\r\n\r\nexport default function AnalyticsPage() {\r\n  const { user, loading: authLoading } = useAuth();\r\n  const router = useRouter();\r\n  const t = useTranslations();\r\n\r\n  const [shop, setShop] = useState<Shop | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [dateRange, setDateRange] = useState<'7' | '30' | '90' | 'custom'>('30');\r\n  const [customStartDate, setCustomStartDate] = useState('');\r\n  const [customEndDate, setCustomEndDate] = useState('');\r\n\r\n  // Overview stats\r\n  const [overview, setOverview] = useState<any>(null);\r\n  const [bookingTrends, setBookingTrends] = useState<any[]>([]);\r\n  const [servicePopularity, setServicePopularity] = useState<any[]>([]);\r\n  const [staffPerformance, setStaffPerformance] = useState<any[]>([]);\r\n  const [customerAnalytics, setCustomerAnalytics] = useState<any>(null);\r\n  const [peakHours, setPeakHours] = useState<any[]>([]);\r\n\r\n  useEffect(() => {\r\n    if (!authLoading && !user) {\r\n      router.push('/');\r\n      return;\r\n    }\r\n\r\n    if (user) {\r\n      loadShop();\r\n    }\r\n  }, [user, authLoading, router]);\r\n\r\n  useEffect(() => {\r\n    if (shop) {\r\n      loadAnalytics();\r\n    }\r\n  }, [shop, dateRange, customStartDate, customEndDate]);\r\n\r\n  const loadShop = async () => {\r\n    try {\r\n      const res = await fetch(`${apiUrl}/shops?owner_user_id=${user?.id}`, {\r\n        headers: {\r\n          'x-user-id': user?.id || '',\r\n        },\r\n      });\r\n      if (res.ok) {\r\n        const shops = await res.json();\r\n        if (shops && shops.length > 0) {\r\n          setShop(shops[0]);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading shop:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getDateRange = () => {\r\n    const endDate = new Date().toISOString();\r\n    let startDate: Date;\r\n\r\n    if (dateRange === 'custom' && customStartDate && customEndDate) {\r\n      return { startDate: customStartDate, endDate: customEndDate };\r\n    }\r\n\r\n    if (dateRange === '7') {\r\n      startDate = new Date(Date.now() - 7 * 24 * 60 * 60 * 1000);\r\n    } else if (dateRange === '90') {\r\n      startDate = new Date(Date.now() - 90 * 24 * 60 * 60 * 1000);\r\n    } else {\r\n      // 30 days default\r\n      startDate = new Date(Date.now() - 30 * 24 * 60 * 60 * 1000);\r\n    }\r\n\r\n    return { startDate: startDate.toISOString(), endDate };\r\n  };\r\n\r\n  const loadAnalytics = async () => {\r\n    if (!shop) return;\r\n\r\n    const { startDate, endDate } = getDateRange();\r\n\r\n    try {\r\n      setLoading(true);\r\n\r\n      // Load all analytics in parallel\r\n      const [\r\n        overviewRes,\r\n        trendsRes,\r\n        servicesRes,\r\n        staffRes,\r\n        customersRes,\r\n        peakHoursRes,\r\n      ] = await Promise.all([\r\n        fetch(\r\n          `${apiUrl}/analytics/shop/${shop.id}/overview?start_date=${startDate}&end_date=${endDate}`,\r\n          {\r\n            headers: { 'x-user-id': user?.id || '' },\r\n          }\r\n        ),\r\n        fetch(\r\n          `${apiUrl}/analytics/shop/${shop.id}/bookings?start_date=${startDate}&end_date=${endDate}&group_by=day`,\r\n          {\r\n            headers: { 'x-user-id': user?.id || '' },\r\n          }\r\n        ),\r\n        fetch(\r\n          `${apiUrl}/analytics/shop/${shop.id}/services?start_date=${startDate}&end_date=${endDate}`,\r\n          {\r\n            headers: { 'x-user-id': user?.id || '' },\r\n          }\r\n        ),\r\n        fetch(\r\n          `${apiUrl}/analytics/shop/${shop.id}/staff?start_date=${startDate}&end_date=${endDate}`,\r\n          {\r\n            headers: { 'x-user-id': user?.id || '' },\r\n          }\r\n        ),\r\n        fetch(\r\n          `${apiUrl}/analytics/shop/${shop.id}/customers?start_date=${startDate}&end_date=${endDate}`,\r\n          {\r\n            headers: { 'x-user-id': user?.id || '' },\r\n          }\r\n        ),\r\n        fetch(\r\n          `${apiUrl}/analytics/shop/${shop.id}/peak-hours?start_date=${startDate}&end_date=${endDate}`,\r\n          {\r\n            headers: { 'x-user-id': user?.id || '' },\r\n          }\r\n        ),\r\n      ]);\r\n\r\n      if (overviewRes.ok) {\r\n        const data = await overviewRes.json();\r\n        setOverview(data);\r\n      }\r\n      if (trendsRes.ok) {\r\n        const data = await trendsRes.json();\r\n        setBookingTrends(data);\r\n      }\r\n      if (servicesRes.ok) {\r\n        const data = await servicesRes.json();\r\n        setServicePopularity(data);\r\n      }\r\n      if (staffRes.ok) {\r\n        const data = await staffRes.json();\r\n        setStaffPerformance(data);\r\n      }\r\n      if (customersRes.ok) {\r\n        const data = await customersRes.json();\r\n        setCustomerAnalytics(data);\r\n      }\r\n      if (peakHoursRes.ok) {\r\n        const data = await peakHoursRes.json();\r\n        setPeakHours(data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading analytics:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading && !shop) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <p className=\"text-gray-500\">{t('common.loading')}</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!shop) {\r\n    return (\r\n      <div className=\"max-w-7xl mx-auto px-4 py-8\">\r\n        <p className=\"text-gray-500\">{t('myShop.noShop')}</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto px-4 py-8\">\r\n      <div className=\"mb-6\">\r\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\r\n          {t('analytics.title')}\r\n        </h1>\r\n        <p className=\"text-gray-600\">{shop.name}</p>\r\n      </div>\r\n\r\n      {/* Date Range Selector */}\r\n      <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6\">\r\n        <div className=\"flex items-center gap-4 flex-wrap\">\r\n          <label className=\"text-sm font-medium text-gray-700\">\r\n            {t('analytics.dateRange')}:\r\n          </label>\r\n          <button\r\n            onClick={() => setDateRange('7')}\r\n            className={`px-4 py-2 rounded-md ${\r\n              dateRange === '7'\r\n                ? 'bg-blue-600 text-white'\r\n                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n            }`}\r\n          >\r\n            {t('analytics.last7Days')}\r\n          </button>\r\n          <button\r\n            onClick={() => setDateRange('30')}\r\n            className={`px-4 py-2 rounded-md ${\r\n              dateRange === '30'\r\n                ? 'bg-blue-600 text-white'\r\n                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n            }`}\r\n          >\r\n            {t('analytics.last30Days')}\r\n          </button>\r\n          <button\r\n            onClick={() => setDateRange('90')}\r\n            className={`px-4 py-2 rounded-md ${\r\n              dateRange === '90'\r\n                ? 'bg-blue-600 text-white'\r\n                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n            }`}\r\n          >\r\n            {t('analytics.last90Days')}\r\n          </button>\r\n          <button\r\n            onClick={() => setDateRange('custom')}\r\n            className={`px-4 py-2 rounded-md ${\r\n              dateRange === 'custom'\r\n                ? 'bg-blue-600 text-white'\r\n                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n            }`}\r\n          >\r\n            {t('analytics.custom')}\r\n          </button>\r\n          {dateRange === 'custom' && (\r\n            <div className=\"flex items-center gap-2\">\r\n              <input\r\n                type=\"date\"\r\n                value={customStartDate}\r\n                onChange={(e) => setCustomStartDate(e.target.value)}\r\n                className=\"px-3 py-2 border border-gray-300 rounded-md\"\r\n              />\r\n              <span>to</span>\r\n              <input\r\n                type=\"date\"\r\n                value={customEndDate}\r\n                onChange={(e) => setCustomEndDate(e.target.value)}\r\n                className=\"px-3 py-2 border border-gray-300 rounded-md\"\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Overview Cards */}\r\n      {overview && (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6\">\r\n          <AnalyticsCard\r\n            title={t('analytics.bookings')}\r\n            value={overview.totalBookings}\r\n            subtitle={t('analytics.averagePerDay') + ': ' + overview.averageBookingsPerDay.toFixed(1)}\r\n          />\r\n          <AnalyticsCard\r\n            title={t('analytics.revenue')}\r\n            value={`¥${overview.totalRevenue.toLocaleString()}`}\r\n            subtitle={t('analytics.averagePerDay') + ': ¥' + overview.averageRevenuePerDay.toFixed(0)}\r\n          />\r\n          <AnalyticsCard\r\n            title={t('analytics.cancellationRate')}\r\n            value={`${overview.cancellationRate.toFixed(1)}%`}\r\n          />\r\n          <AnalyticsCard\r\n            title={t('analytics.completedBookings')}\r\n            value={overview.completedBookings}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* Booking Trends Chart */}\r\n      {bookingTrends.length > 0 && (\r\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6\">\r\n          <h2 className=\"text-xl font-bold text-gray-900 mb-4\">\r\n            {t('analytics.bookingTrends')}\r\n          </h2>\r\n          <LineChart\r\n            data={bookingTrends.map((t) => ({\r\n              x: t.date,\r\n              y: t.count,\r\n            }))}\r\n            height={300}\r\n            xLabel={t('analytics.date')}\r\n            yLabel={t('analytics.bookings')}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* Service Popularity */}\r\n      {servicePopularity.length > 0 && (\r\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6\">\r\n          <h2 className=\"text-xl font-bold text-gray-900 mb-4\">\r\n            {t('analytics.servicePopularity')}\r\n          </h2>\r\n          <BarChart\r\n            data={servicePopularity.slice(0, 10).map((s) => ({\r\n              label: s.serviceName,\r\n              value: s.bookingCount,\r\n            }))}\r\n            height={300}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* Staff Performance */}\r\n      {staffPerformance.length > 0 && (\r\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6\">\r\n          <h2 className=\"text-xl font-bold text-gray-900 mb-4\">\r\n            {t('analytics.staffPerformance')}\r\n          </h2>\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"min-w-full divide-y divide-gray-200\">\r\n              <thead className=\"bg-gray-50\">\r\n                <tr>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\r\n                    {t('myShop.staff')}\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\r\n                    {t('analytics.bookings')}\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                {staffPerformance.map((staff) => (\r\n                  <tr key={staff.staffId}>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\r\n                      {staff.staffName}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                      {staff.bookingCount}\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Customer Analytics */}\r\n      {customerAnalytics && (\r\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6\">\r\n          <h2 className=\"text-xl font-bold text-gray-900 mb-4\">\r\n            {t('analytics.customerAnalytics')}\r\n          </h2>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            <AnalyticsCard\r\n              title={t('analytics.newCustomers')}\r\n              value={customerAnalytics.newCustomers}\r\n            />\r\n            <AnalyticsCard\r\n              title={t('analytics.returningCustomers')}\r\n              value={customerAnalytics.returningCustomers}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Peak Hours */}\r\n      {peakHours.length > 0 && (\r\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n          <h2 className=\"text-xl font-bold text-gray-900 mb-4\">\r\n            {t('analytics.peakHours')}\r\n          </h2>\r\n          <BarChart\r\n            data={peakHours.map((h) => ({\r\n              label: `${h.hour}:00`,\r\n              value: h.bookingCount,\r\n            }))}\r\n            height={300}\r\n          />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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"}}]
}