(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31521,66533,e=>{"use strict";var s=e.i(43476),t=e.i(48148);function r({review:e}){let r,a=(0,t.useTranslations)(),l=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"flex",children:(r=e.rating,Array.from({length:5},(e,t)=>(0,s.jsx)("span",{className:`text-xl ${t<r?"text-yellow-400":"text-gray-300"}`,children:"★"},t)))}),e.is_verified&&(0,s.jsx)("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:a("reviews.verified")})]}),(0,s.jsx)("span",{className:"text-sm text-gray-500",children:l(e.created_at)})]}),e.comment&&(0,s.jsx)("p",{className:"text-gray-700 mb-4 whitespace-pre-wrap",children:e.comment}),e.photos&&e.photos.length>0&&(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2 mb-4",children:e.photos.map((e,t)=>(0,s.jsx)("img",{src:e,alt:`Review photo ${t+1}`,className:"w-full h-24 object-cover rounded"},t))}),e.owner_response&&(0,s.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("span",{className:"font-semibold text-gray-800",children:a("reviews.ownerResponse")}),e.owner_response_at&&(0,s.jsx)("span",{className:"text-xs text-gray-500",children:l(e.owner_response_at)})]}),(0,s.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:e.owner_response})]})]})}function a({averageRating:e,totalReviews:r,ratingDistribution:a}){let l,n=(0,t.useTranslations)();return(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-6 mb-6",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-4xl font-bold text-gray-800 mb-2",children:e?e.toFixed(1):"—"}),(0,s.jsx)("div",{className:"flex justify-center mb-2",children:(l=e||0,Array.from({length:5},(e,t)=>(0,s.jsx)("span",{className:`text-2xl ${t<Math.round(l)?"text-yellow-400":"text-gray-300"}`,children:"★"},t)))}),(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:[r," ",n("reviews.totalReviews")]})]}),(0,s.jsx)("div",{className:"flex-1",children:[5,4,3,2,1].map(e=>{let t=a[e],l=0===r?0:Math.round(t/r*100);return(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-600 w-8",children:[e," ★"]}),(0,s.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-yellow-400 h-2 rounded-full",style:{width:`${l}%`}})}),(0,s.jsx)("span",{className:"text-sm text-gray-600 w-12 text-right",children:t})]},e)})})]})})}e.s(["default",()=>r],31521),e.s(["default",()=>a],66533)},67585,(e,s,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let r=e.r(32061);function a({reason:e,children:s}){if("undefined"==typeof window)throw Object.defineProperty(new r.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return s}},9885,(e,s,t)=>{"use strict";function r(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"encodeURIPath",{enumerable:!0,get:function(){return r}})},52157,(e,s,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return o}});let r=e.r(43476),a=e.r(74080),l=e.r(63599),n=e.r(9885);function o({moduleIds:e}){if("undefined"!=typeof window)return null;let s=l.workAsyncStorage.getStore();if(void 0===s)return null;let t=[];if(s.reactLoadableManifest&&e){let r=s.reactLoadableManifest;for(let s of e){if(!r[s])continue;let e=r[s].files;t.push(...e)}}return 0===t.length?null:(0,r.jsx)(r.Fragment,{children:t.map(e=>{let t=`${s.assetPrefix}/_next/${(0,n.encodeURIPath)(e)}`;return e.endsWith(".css")?(0,r.jsx)("link",{precedence:"dynamic",href:t,rel:"stylesheet",as:"style",nonce:s.nonce},e):((0,a.preload)(t,{as:"script",fetchPriority:"low",nonce:s.nonce}),null)})})}},69093,(e,s,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let r=e.r(43476),a=e.r(71645),l=e.r(67585),n=e.r(52157);function o(e){return{default:e&&"default"in e?e.default:e}}let i={loader:()=>Promise.resolve(o(()=>null)),loading:null,ssr:!0},d=function(e){let s={...i,...e},t=(0,a.lazy)(()=>s.loader().then(o)),d=s.loading;function c(e){let o=d?(0,r.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,i=!s.ssr||!!s.loading,c=i?a.Suspense:a.Fragment,m=s.ssr?(0,r.jsxs)(r.Fragment,{children:["undefined"==typeof window?(0,r.jsx)(n.PreloadChunks,{moduleIds:s.modules}):null,(0,r.jsx)(t,{...e})]}):(0,r.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(t,{...e})});return(0,r.jsx)(c,{...i?{fallback:o}:{},children:m})}return c.displayName="LoadableComponent",c}},70703,(e,s,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});let r=e.r(55682)._(e.r(69093));function a(e,s){let t={};"function"==typeof e&&(t.loader=e);let a={...t,...s};return(0,r.default)({...a,modules:a.loadableGenerated?.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),s.exports=t.default)},4300,e=>{"use strict";e.i(47167);var s=e.i(43476),t=e.i(71645),r=e.i(18566),a=e.i(22016),l=e.i(48148),n=e.i(70703),o=e.i(31521),i=e.i(66533);function d({shopId:e,bookingId:r,customerId:a,onSubmit:n,onCancel:o}){let i=(0,l.useTranslations)(),[d,c]=(0,t.useState)(0),[m,u]=(0,t.useState)(0),[h,x]=(0,t.useState)(""),[g,p]=(0,t.useState)([]),[b,f]=(0,t.useState)(!1),[y,j]=(0,t.useState)(null),v=async s=>{if(s.preventDefault(),0===d)return void j("Please select a rating");if(h.length>2e3)return void j("Comment must be 2000 characters or less");f(!0),j(null);try{await n({shop_id:e,booking_id:r||null,customer_id:a||null,rating:d,comment:h.trim()||void 0,photos:g.length>0?g:void 0})}catch(e){j(e.message||"Failed to submit review")}finally{f(!1)}};return(0,s.jsxs)("form",{onSubmit:v,className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold mb-4",children:i("reviews.writeReview")}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[i("reviews.rating")," *"]}),(0,s.jsx)("div",{className:"flex gap-1",children:[1,2,3,4,5].map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>c(e),onMouseEnter:()=>u(e),onMouseLeave:()=>u(0),className:"text-3xl focus:outline-none",children:(0,s.jsx)("span",{className:e<=(m||d)?"text-yellow-400":"text-gray-300",children:"★"})},e))})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[i("reviews.comment")," (",i("common.optional"),")"]}),(0,s.jsx)("textarea",{value:h,onChange:e=>x(e.target.value),rows:4,maxLength:2e3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:i("reviews.comment")}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[h.length,"/2000 ",i("common.characters")]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[i("reviews.photos")," (",i("common.optional"),", max 5)"]}),(0,s.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{let s=e.target.files;if(s){if(g.length+s.length>5)return void j("Maximum 5 photos allowed");Array.from(s).forEach(e=>{let s=new FileReader;s.onload=e=>{let s=e.target?.result;s&&p(e=>[...e,s])},s.readAsDataURL(e)})}},disabled:g.length>=5,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),g.length>0&&(0,s.jsx)("div",{className:"grid grid-cols-5 gap-2 mt-2",children:g.map((e,t)=>(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("img",{src:e,alt:`Photo ${t+1}`,className:"w-full h-20 object-cover rounded"}),(0,s.jsx)("button",{type:"button",onClick:()=>{p(e=>e.filter((e,s)=>s!==t))},className:"absolute top-0 right-0 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs",children:"×"})]},t))})]}),y&&(0,s.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded text-red-700 text-sm",children:y}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{type:"submit",disabled:b||0===d,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:i(b?"common.submitting":"reviews.submit")}),o&&(0,s.jsx)("button",{type:"button",onClick:o,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300",children:i("common.cancel")})]})]})}let c=(0,n.default)(()=>e.A(17137),{loadableGenerated:{modules:[48452]},ssr:!1,loading:()=>(0,s.jsx)("div",{className:"w-full h-[400px] rounded-xl overflow-hidden bg-gray-100 flex items-center justify-center",children:(0,s.jsx)("p",{className:"text-gray-500",children:"Loading map..."})})});function m(){let e,n=(0,r.useParams)(),m=n?.id,u="http://localhost:3000";try{e=(0,l.useTranslations)()}catch(s){console.warn("Translation error, using fallback:",s),e=e=>({"shops.photos":"Photos","shops.photosWillAppear":"Photos will appear here once added by the shop owner.","shops.services":"Services","shops.staff":"Staff","shops.shopNotFound":"Shop not found","shops.shopDoesNotExist":"The shop you are looking for does not exist.","shops.invalidShopId":"Invalid shop ID","shops.failedToFetchShop":"Failed to fetch shop","shops.noServicesAvailable":"No services available.","shops.noStaffAvailable":"No staff information available.","booking.title":"Book an appointment","booking.bookAppointment":"Book Appointment","common.loading":"Loading..."})[e]||e}let[h,x]=(0,t.useState)(null),[g,p]=(0,t.useState)([]),[b,f]=(0,t.useState)([]),[y,j]=(0,t.useState)([]),[v,N]=(0,t.useState)([]),[w,S]=(0,t.useState)(!0),[_,k]=(0,t.useState)(null),[$,C]=(0,t.useState)(""),[O,P]=(0,t.useState)(""),[A,E]=(0,t.useState)(""),[R,T]=(0,t.useState)(""),[D,I]=(0,t.useState)(""),[L,F]=(0,t.useState)(!1),[M,q]=(0,t.useState)(null),[B,U]=(0,t.useState)(!1),[W,J]=(0,t.useState)([]),[z,G]=(0,t.useState)(""),[K,Q]=(0,t.useState)(!1),[X,H]=(0,t.useState)([]),[V,Y]=(0,t.useState)(null),[Z,ee]=(0,t.useState)(!1),[es,et]=(0,t.useState)(!1);(0,t.useEffect)(()=>{if(!m){k(e("shops.invalidShopId")),S(!1);return}(async()=>{try{S(!0),k(null);let s=await fetch(`${u}/shops/${m}`);if(!s.ok)throw Error(`${e("shops.failedToFetchShop")}: ${s.status}`);let t=await s.json();x(t);let r=await fetch(`${u}/shops/${m}/services`);if(r.ok){let e=await r.json(),s=Array.isArray(e)?e.filter(e=>!1!==e.is_active):[];p(s)}let a=await fetch(`${u}/shops/${m}/staff`);if(a.ok){let e=await a.json();f(Array.isArray(e)?e:[])}let l=await fetch(`${u}/shops/${m}/photos?type=gallery`);if(l.ok){let e=await l.json();N(Array.isArray(e)?e:[])}}catch(e){console.error("Error fetching shop data:",e),k(e instanceof Error?e.message:"Failed to load shop details")}finally{S(!1)}})()},[m,u,e]),(0,t.useEffect)(()=>{m&&(async()=>{try{let e=await fetch(`${u}/messages?shop_id=${m}`);if(e.ok){let s=await e.json();J(Array.isArray(s)?s:[])}}catch(e){console.error("Error fetching messages:",e)}})()},[m,u]),(0,t.useEffect)(()=>{m&&(async()=>{try{et(!0);let e=await fetch(`${u}/reviews?shop_id=${m}&limit=10`);if(e.ok){let s=await e.json();H(Array.isArray(s)?s:[])}let s=await fetch(`${u}/reviews/shop/${m}/stats`);if(s.ok){let e=await s.json();Y(e)}}catch(e){console.error("Error fetching reviews:",e)}finally{et(!1)}})()},[m,u]);let er=async e=>{try{if((await fetch(`${u}/reviews`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok){ee(!1);let e=await fetch(`${u}/reviews?shop_id=${m}&limit=10`);if(e.ok){let s=await e.json();H(Array.isArray(s)?s:[])}let s=await fetch(`${u}/reviews/shop/${m}/stats`);if(s.ok){let e=await s.json();Y(e)}}else throw Error("Failed to submit review")}catch(e){throw console.error("Error submitting review:",e),e}},ea=async s=>{if(s.preventDefault(),!m||!$||!D)return void q("Please fill in all required fields");F(!0),q(null),U(!1);try{let s=new Date(`${A}T${R}`),t=g.find(e=>e.id===$),r=t?.duration_minutes||30,a=new Date(s.getTime()+6e4*r),l=await fetch(`${u}/bookings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shop_id:m,service_id:$,staff_id:O||null,start_time:s.toISOString(),end_time:a.toISOString(),customer_name:D,status:"pending"})});if(l.ok)U(!0),C(""),P(""),E(""),T(""),I("");else{let s=await l.json();q(s.error||e("booking.failedToCreate"))}}catch(s){console.error("Error creating booking:",s),q(e("booking.failedToCreate"))}finally{F(!1)}},el=async s=>{if(s.preventDefault(),!z.trim()||K||!m)return;let t=z.trim();G(""),Q(!0);let r={id:Date.now().toString(),sender_type:"customer",message:t,created_at:new Date().toISOString()};J(e=>[...e,r]);try{let s=await fetch(`${u}/ai/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shopId:m,message:t,source:"customer"})});if(s.ok){let t=await s.json(),r={id:(Date.now()+1).toString(),sender_type:"ai",message:t.response||e("chat.noResponse"),created_at:new Date().toISOString()};J(e=>[...e,r])}else{let t=await s.json(),r={id:(Date.now()+1).toString(),sender_type:"ai",message:`${e("chat.errorEncountered")}: ${t.error||e("common.unknown")}`,created_at:new Date().toISOString()};J(e=>[...e,r])}}catch(t){console.error("Error sending chat message:",t);let s={id:(Date.now()+1).toString(),sender_type:"ai",message:e("chat.cannotRespond"),created_at:new Date().toISOString()};J(e=>[...e,s])}finally{Q(!1)}};return w?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:e("common.loading")})]})}):_||!h?(0,s.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"⚠️"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:e("shops.shopNotFound")}),(0,s.jsx)("p",{className:"text-gray-600",children:_||e("shops.shopDoesNotExist")})]}):(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,s.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,s.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:h.name}),h.categories&&(0,s.jsx)("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-700 text-sm font-medium rounded mb-4",children:h.categories.name}),(0,s.jsxs)("div",{className:"space-y-2 text-gray-700",children:[(0,s.jsxs)("p",{children:[(0,s.jsxs)("strong",{children:[e("myShop.address"),":"]})," ",h.address]}),h.phone&&(0,s.jsxs)("p",{children:[(0,s.jsxs)("strong",{children:[e("myShop.phone"),":"]})," ",h.phone]}),h.email&&(0,s.jsxs)("p",{children:[(0,s.jsxs)("strong",{children:[e("myShop.email"),":"]})," ",h.email]})]}),h.description&&(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("p",{className:"text-gray-600",children:h.description})}),(0,s.jsx)("div",{className:"mt-4",children:h.line_qr_code_url?(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,s.jsx)("img",{src:h.line_qr_code_url,alt:"LINE QR Code",className:"w-48 h-48 border-2 border-gray-200 rounded-lg"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"LINEで予約はこちら"})]}):(0,s.jsx)("div",{className:"text-center text-gray-500 text-sm py-4",children:"Connect LINE to generate QR code"})})]}),h.latitude&&h.longitude&&(0,s.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Location"}),(0,s.jsx)(c,{latitude:h.latitude,longitude:h.longitude,shopName:h.name,address:h.address,height:"400px"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:e("shops.photos")}),v.length>0?(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:v.map(e=>(0,s.jsx)("div",{className:"relative w-full pb-[100%] overflow-hidden rounded-lg bg-gray-100 group cursor-pointer",children:(0,s.jsx)("img",{src:e.url,alt:`${h.name} gallery photo`,className:"absolute inset-0 w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",loading:"lazy",onError:s=>{console.error("Error loading image:",e.url),s.target.style.display="none"}})},e.id))}):(0,s.jsx)("p",{className:"text-gray-500 text-center py-8",children:e("shops.photosWillAppear")})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:e("shops.services")}),0===g.length?(0,s.jsx)("p",{className:"text-gray-500",children:e("shops.noServicesAvailable")}):(0,s.jsx)("div",{className:"space-y-4",children:g.map(e=>(0,s.jsx)("div",{className:"border-b border-gray-100 pb-4 last:border-0",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900",children:e.name}),e.description&&(0,s.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:e.description})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"font-bold text-gray-900",children:["¥",e.price.toLocaleString()]}),e.duration_minutes&&(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[e.duration_minutes," min"]})]})]})},e.id))})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:e("shops.staff")}),0===b.length?(0,s.jsx)("p",{className:"text-gray-500",children:e("shops.noStaffAvailable")}):(0,s.jsx)("div",{className:"grid grid-cols-2 gap-4",children:b.map(e=>(0,s.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,s.jsxs)("p",{className:"font-semibold text-gray-900",children:[e.first_name," ",e.last_name]}),e.role&&(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.role})]},e.id))})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:e("reviews.title")}),es?(0,s.jsx)("p",{className:"text-gray-500",children:e("common.loading")}):(0,s.jsxs)(s.Fragment,{children:[V&&(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)(i.default,{averageRating:V.averageRating,totalReviews:V.totalReviews,ratingDistribution:V.ratingDistribution})}),Z?(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)(d,{shopId:m,onSubmit:er,onCancel:()=>ee(!1)})}):(0,s.jsx)("button",{onClick:()=>ee(!0),className:"mb-6 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:e("reviews.writeReview")}),0===X.length?(0,s.jsx)("p",{className:"text-gray-500",children:e("reviews.noReviews")}):(0,s.jsx)("div",{className:"space-y-4",children:X.map(e=>(0,s.jsx)(o.default,{review:e},e.id))})]})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:(0,s.jsxs)(a.default,{href:`/book/${m}`,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg shadow-md hover:shadow-lg transition-all duration-200 text-center block",children:[e("booking.bookAppointment")," →"]})}),(0,s.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:e("booking.title")}),B?(0,s.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4",children:[(0,s.jsx)("p",{className:"text-green-700 font-medium",children:e("booking.success")}),(0,s.jsx)("p",{className:"text-green-600 text-sm mt-1",children:e("booking.ownerWillConfirm")})]}):(0,s.jsxs)("form",{onSubmit:ea,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e("booking.service")," ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{value:$,onChange:e=>C(e.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[(0,s.jsx)("option",{value:"",children:e("booking.selectService")}),g.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name," - ¥",e.price.toLocaleString()]},e.id))]})]}),b.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("booking.staffOptional")}),(0,s.jsxs)("select",{value:O,onChange:e=>P(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[(0,s.jsx)("option",{value:"",children:e("booking.anyAvailable")}),b.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name]},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e("booking.date")," ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"date",value:A,onChange:e=>E(e.target.value),min:new Date().toISOString().split("T")[0],required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e("booking.time")," ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"time",value:R,onChange:e=>T(e.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e("booking.yourName")," ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",value:D,onChange:e=>I(e.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),M&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:(0,s.jsx)("p",{className:"text-red-700 text-sm",children:M})}),(0,s.jsx)("button",{type:"submit",disabled:L,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:L?e("common.submitting"):e("booking.submit")})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:e("chat.title")}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"h-64 overflow-y-auto border border-gray-200 rounded-lg p-4 space-y-3",children:0===W.length?(0,s.jsx)("p",{className:"text-gray-500 text-sm text-center py-4",children:e("chat.startConversation")}):W.map(e=>(0,s.jsx)("div",{className:`flex ${"customer"===e.sender_type?"justify-end":"justify-start"}`,children:(0,s.jsx)("div",{className:`max-w-[80%] rounded-lg px-4 py-2 ${"customer"===e.sender_type?"bg-blue-600 text-white":"bg-gray-100 text-gray-800"}`,children:(0,s.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.message})})},e.id))}),(0,s.jsxs)("form",{onSubmit:el,className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:z,onChange:e=>G(e.target.value),placeholder:e("chat.placeholder"),disabled:K,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"}),(0,s.jsx)("button",{type:"submit",disabled:!z.trim()||K,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e("chat.send")})]})]})]})]})]})})}e.s(["default",()=>m],4300)},17137,e=>{e.v(s=>Promise.all(["static/chunks/8b0bd1ae0675f775.js","static/chunks/076efda0d0cae75b.css"].map(s=>e.l(s))).then(()=>s(48452)))}]);