(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,23761,e=>{"use strict";var s=e.i(43476),t=e.i(71645),r=e.i(22016),i=e.i(18566),a=e.i(63611);e.s(["default",0,()=>{let e=(0,i.useParams)(),{user:l}=(0,a.useAuth)(),[n,d]=(0,t.useState)(null),[o,c]=(0,t.useState)(null),[u,m]=(0,t.useState)(null),[x,h]=(0,t.useState)(!1),[p,g]=(0,t.useState)({shop_id:"",name:"",description:"",price:0,duration:0}),[b,f]=(0,t.useState)(null),v="http://localhost:3000",j=e=>null==e?"":"string"==typeof e?e:isNaN(e)?"":e;(0,t.useEffect)(()=>{let s=e?.id;s&&"string"==typeof s&&d(s)},[e]);let N=(0,t.useCallback)(async()=>{if(n)try{let e=await fetch(`${v}/services/${n}`);if(e.ok){let s=await e.json();c(s);let t=void 0!==s.duration_minutes?s.duration_minutes:s.duration||0;if(g({shop_id:s.shop_id||"",name:s.name||"",description:s.description||"",price:s.price||0,duration:t}),s.shop_id){let e=await fetch(`${v}/shops/${s.shop_id}`);if(e.ok){let s=await e.json();m(s)}}}else f("Failed to load service")}catch(e){e?.message?.includes("Failed to fetch")||e?.message?.includes("ERR_CONNECTION_REFUSED")||(console.error("Failed to fetch service data:",e),f("Failed to load service data"))}},[n,v]);(0,t.useEffect)(()=>{n&&N()},[n,N]);let y=e=>{let{name:s,value:t,type:r}=e.target,i=t;if("number"===r){let e=parseFloat(t);i=isNaN(e)?"":e}g(e=>({...e,[s]:i}))},w=async()=>{if(!n)return void f("Invalid service ID");if(!l)return void f("You must be logged in to update a service");f(null);try{let e=p.duration,s="string"==typeof e&&""!==e?parseFloat(e):"number"==typeof e?e:0,t={name:p.name,description:p.description,price:p.price,duration_minutes:!isNaN(s)&&s>=0?s:p.duration};p.shop_id&&p.shop_id!==o?.shop_id&&(t.shop_id=p.shop_id);let r=await fetch(`${v}/services/${n}`,{method:"PUT",headers:{"Content-Type":"application/json","x-user-id":l.id},body:JSON.stringify(t)});if(r.ok){let e=await r.json();c(e),h(!1),f(null),await N()}else{let e=await r.json().catch(()=>({error:"Unknown error"}));f(e.error||`Failed to update service: ${r.status}`)}}catch(e){e?.message?.includes("Failed to fetch")||e?.message?.includes("ERR_CONNECTION_REFUSED")||(console.error("Failed to update service:",e),f("Failed to update service. Please try again."))}};return b&&!o?(0,s.jsx)("div",{className:"p-8",children:(0,s.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-6 py-4 rounded-xl",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Error"}),(0,s.jsx)("p",{children:b}),(0,s.jsx)(r.default,{href:"/shops/services",className:"text-blue-600 hover:underline mt-4 inline-block",children:"← Back to Services List"})]})}):n&&o?(0,s.jsxs)("div",{className:"p-8",children:[(0,s.jsxs)(r.default,{href:"/shops/services",className:"text-blue-600 hover:text-blue-800 hover:underline mb-6 inline-flex items-center gap-2",children:[(0,s.jsx)("span",{children:"←"})," Back to Services List"]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Service Details"}),(0,s.jsx)("p",{className:"text-gray-600",children:"View and edit service information"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Service Information"}),(0,s.jsx)("button",{onClick:()=>h(!x),className:"bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:shadow-lg transition-all duration-200",children:x?"Cancel":"Edit"})]}),b&&(0,s.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:b}),x?(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service Name"}),(0,s.jsx)("input",{type:"text",name:"name",placeholder:"Service Name",value:p.name,onChange:y,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,s.jsx)("textarea",{name:"description",placeholder:"Description",value:p.description,onChange:y,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition",rows:3})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price ($)"}),(0,s.jsx)("input",{type:"number",name:"price",placeholder:"Price",value:j(p.price),onChange:y,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition",min:"0",step:"0.01"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes)"}),(0,s.jsx)("input",{type:"number",name:"duration",placeholder:"Duration",value:j(p.duration),onChange:y,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition",min:"1"})]})]}),(0,s.jsx)("button",{onClick:w,className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 px-4 rounded-lg shadow-md hover:shadow-lg transition-all duration-200",children:"Update Service"})]}):(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Name"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-800",children:o.name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Shop"}),(0,s.jsx)("p",{className:"text-lg text-gray-800",children:u?.name||"Unknown"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Description"}),(0,s.jsx)("p",{className:"text-lg text-gray-800",children:o.description||"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Price"}),(0,s.jsxs)("p",{className:"text-lg font-semibold text-gray-800",children:["$",o.price]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Duration"}),(0,s.jsxs)("p",{className:"text-lg text-gray-800",children:[(void 0!==o.duration_minutes?o.duration_minutes:o.duration)||0," minutes"]})]})]})]})]}):(0,s.jsx)("div",{className:"p-8",children:(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsx)("div",{className:"text-gray-500",children:"Loading service details..."})})})}])}]);