(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,72472,e=>{"use strict";var t=e.i(43476),r=e.i(71645),o=e.i(63611),s=e.i(18566),a=e.i(48148),l=e.i(31521),i=e.i(66533);function n({shopId:e,shop:o,user:s}){let[a,l]=(0,r.useState)(!1),i=o?.line_destination_id?`https://line.me/R/ti/p/${o.line_destination_id}`:null,n=async()=>{if(s?.id&&e)try{l(!0);let t=await fetch(`http://localhost:3000/line/shop-auth-url?shopId=${e}`,{headers:{"x-user-id":s.id}});if(t.ok){let e=await t.json();e.authUrl?window.location.href=e.authUrl:alert("Failed to get LINE OAuth URL")}else{let e=await t.json();alert(e.error||"Failed to connect LINE account")}}catch(e){console.error("Error connecting LINE:",e),alert("Failed to connect LINE account")}finally{l(!1)}};return((0,r.useEffect)(()=>{let e=new URLSearchParams(window.location.search);"success"===e.get("line_connected")?(alert("LINE account connected successfully!"),window.history.replaceState({},"",window.location.pathname),window.location.reload()):e.get("line_error")&&(alert(`LINE connection error: ${e.get("line_error")}`),window.history.replaceState({},"",window.location.pathname))},[]),o?.line_qr_code_url&&o?.line_destination_id)?(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,t.jsx)("img",{src:o.line_qr_code_url,alt:"LINE QR Code",className:"w-48 h-48 border-2 border-gray-300 rounded-lg"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 text-center",children:"LINEã§äºˆç´„ã¯ã“ã¡ã‚‰"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>{i&&(navigator.clipboard.writeText(i),alert("LINE link copied to clipboard!"))},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Copy LINE Link"}),(0,t.jsx)("button",{onClick:()=>{if(o?.line_qr_code_url){let t=document.createElement("a");t.href=o.line_qr_code_url,t.download=`line-qr-${e}.png`,t.click()}},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Download QR Code"})]})]}):(0,t.jsxs)("div",{className:"text-center space-y-4 py-4",children:[(0,t.jsx)("p",{className:"text-gray-500",children:"Connect LINE to generate QR code"}),(0,t.jsx)("button",{onClick:n,disabled:a,className:"px-6 py-3 bg-green-500 text-white font-semibold rounded-lg hover:bg-green-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Connecting...":"Connect LINE Account"})]})}e.s(["default",0,()=>{let e,d,c,m,u,h,{user:g,loading:p}=(0,o.useAuth)(),x=!!p,b=(0,s.useRouter)(),y="http://localhost:3000",f=(0,a.useTranslations)(),[j,N]=(0,r.useState)(null),[v,w]=(0,r.useState)(!0),[S,k]=(0,r.useState)("overview"),[_,C]=(0,r.useState)(!1),[E,T]=(0,r.useState)({name:"",address:"",phone:"",email:"",website:"",google_place_id:"",city:"",country:"",zip_code:"",description:"",language_code:""}),[$,O]=(0,r.useState)(!1),[F,I]=(0,r.useState)(!1),[R,D]=(0,r.useState)([]),[A,U]=(0,r.useState)(!1),[P,L]=(0,r.useState)([]),[q,z]=(0,r.useState)([]),[J,B]=(0,r.useState)([]),[M,H]=(0,r.useState)([]),[Q,G]=(0,r.useState)([]),[K,Y]=(0,r.useState)(null),[W,V]=(0,r.useState)(!1),[X,Z]=(0,r.useState)({}),[ee,et]=(0,r.useState)(null),[er,eo]=(0,r.useState)({name:"",description:"",price:0,duration_minutes:0}),[es,ea]=(0,r.useState)(null),[el,ei]=(0,r.useState)(null),[en,ed]=(0,r.useState)({first_name:"",last_name:"",phone:"",email:""}),[ec,em]=(0,r.useState)(null),[eu,eh]=(0,r.useState)({isOpen:!1,bookingId:null,newStatus:null,bookingCustomerName:null}),[eg,ep]=(0,r.useState)(!1),[ex,eb]=(0,r.useState)(null),[ey,ef]=(0,r.useState)({isOpen:!1,bookingId:null,bookingCustomerName:null}),[ej,eN]=(0,r.useState)(!1),[ev,ew]=(0,r.useState)(null),[eS,ek]=(0,r.useState)({isOpen:!1,bookingId:null,bookingCustomerName:null,currentDateTime:null}),[e_,eC]=(0,r.useState)(!1),[eE,eT]=(0,r.useState)(null),[e$,eO]=(0,r.useState)(""),[eF,eI]=(0,r.useState)(null);(0,r.useEffect)(()=>{F&&g&&!x&&(async()=>{try{U(!0);let e=await fetch(`${y}/shops?unclaimed=true`,{headers:{"Content-Type":"application/json"}});if(e.ok){let t=e.headers.get("content-type");if(t&&t.includes("application/json")){let t=await e.json();D(Array.isArray(t)?t:[])}else console.error("Expected JSON but received:",t),D([])}else console.error("Failed to fetch unclaimed shops:",e.status,e.statusText),D([])}catch(e){e?.message?.includes("Failed to fetch")||e?.message?.includes("ERR_CONNECTION_REFUSED")||console.error("Error fetching unclaimed shops:",e),D([])}finally{U(!1)}})()},[F,g,x,y]),(0,r.useEffect)(()=>{!x&&g&&g.id?(async()=>{try{let e;if(w(!0),!g.id||"string"!=typeof g.id||"undefined"===g.id||"null"===g.id){console.error("Invalid user ID:",g.id),N(null),T({}),w(!1);return}let t=`${y}/shops?owner_user_id=${encodeURIComponent(g.id)}`;console.log("Fetching shop from:",t),console.log("User ID:",g.id);try{e=await fetch(t,{headers:{"x-user-id":g.id,"Content-Type":"application/json"}})}catch(e){if(e?.message?.includes("Failed to fetch")||e?.message?.includes("ERR_CONNECTION_REFUSED")){N(null),T({}),w(!1);return}throw e}if(404===e.status){console.log("No shop found for user"),N(null),T({});return}if(e.ok){let t=e.headers.get("content-type");if(t&&t.includes("application/json")){let t=await e.json();if(Array.isArray(t)&&t.length>0){let e=t[0];N(e),T({name:e.name||"",address:e.address||"",phone:e.phone||"",email:e.email||"",website:e.website||"",google_place_id:e.google_place_id||"",city:e.city||"",country:e.country||"",zip_code:e.zip_code||"",description:e.description||"",language_code:e.language_code||"",category:e.category||null,subcategory:e.subcategory||null,logo_url:e.logo_url||null,cover_photo_url:e.cover_photo_url||null}),eR(e.id),eD(e.id),eA(e.id),eU(e.id)}else N(null),T({})}else console.error("Expected JSON but received:",t),N(null),T({})}else{let t=await e.text().catch(()=>"Unknown error");console.error("Error fetching shop:",e.status,e.statusText,t),N(null),T({})}}catch(e){e?.message?.includes("Failed to fetch")||e?.message?.includes("ERR_CONNECTION_REFUSED")||console.error("Error fetching shop:",e),N(null),T({})}finally{w(!1)}})():x?w(!0):g||w(!1)},[g,x,y]);let eR=async e=>{if(e&&g)try{let t=await fetch(`${y}/shops/${e}/services`,{headers:{"x-user-id":g.id}});if(t.ok){let e=await t.json();L(Array.isArray(e)?e:[])}}catch(e){e?.message?.includes("Failed to fetch")||e?.message?.includes("ERR_CONNECTION_REFUSED")||console.error("Error fetching services:",e),L([])}},eD=async e=>{if(e&&g)try{let t=await fetch(`${y}/shops/${e}/staff`,{headers:{"x-user-id":g.id}});if(t.ok){let e=await t.json();z(Array.isArray(e)?e:[])}}catch(e){e?.message?.includes("Failed to fetch")||e?.message?.includes("ERR_CONNECTION_REFUSED")||console.error("Error fetching staff:",e),z([])}},eA=async e=>{if(e&&g)try{let t=await fetch(`${y}/bookings`,{headers:{"x-user-id":g.id}});if(t.ok){let r=await t.json(),o=Array.isArray(r)?r.filter(t=>t.shop_id===e):[];B(o)}}catch(e){e?.message?.includes("Failed to fetch")||e?.message?.includes("ERR_CONNECTION_REFUSED")||console.error("Error fetching bookings:",e),B([])}},eU=async e=>{if(e&&g)try{let t=await fetch(`${y}/shops/${e}/photos`,{headers:{"x-user-id":g.id}});if(t.ok){let e=await t.json();H(Array.isArray(e)?e:[])}}catch(e){e?.message?.includes("Failed to fetch")||e?.message?.includes("ERR_CONNECTION_REFUSED")||console.error("Error fetching photos:",e),H([])}},eP=async e=>{if(e&&g)try{V(!0);let t=await fetch(`${y}/reviews?shop_id=${e}`,{headers:{"x-user-id":g.id}});if(t.ok){let e=await t.json();G(Array.isArray(e)?e:[])}let r=await fetch(`${y}/reviews/shop/${e}/stats`,{headers:{"x-user-id":g.id}});if(r.ok){let e=await r.json();Y(e)}}catch(e){e?.message?.includes("Failed to fetch")||e?.message?.includes("ERR_CONNECTION_REFUSED")||console.error("Error fetching reviews:",e),G([])}finally{V(!1)}},eL=async(e,t)=>{if(g&&j)try{(await fetch(`${y}/reviews/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json","x-user-id":g.id},body:JSON.stringify({owner_response:t})})).ok?(await eP(j.id),Z(t=>({...t,[e]:""}))):alert("Failed to submit response")}catch(e){console.error("Error submitting owner response:",e),alert("Failed to submit response")}},eq=async e=>{if(e.preventDefault(),j&&g){ea(null);try{let e=await fetch(`${y}/services`,{method:"POST",headers:{"Content-Type":"application/json","x-user-id":g.id},body:JSON.stringify({shop_id:j.id,name:er.name,description:er.description,price:er.price,duration:er.duration_minutes})});if(e.ok)await eR(j.id),eo({name:"",description:"",price:0,duration_minutes:0});else{let t=await e.json().catch(()=>({error:"Failed to create service"}));ea(t.error||"Failed to create service")}}catch(e){console.error("Error creating service:",e),ea("Failed to create service")}}},ez=async e=>{if(e.preventDefault(),j&&g&&ee){ea(null);try{let e=await fetch(`${y}/services/${ee.id}`,{method:"PUT",headers:{"Content-Type":"application/json","x-user-id":g.id},body:JSON.stringify({name:er.name,description:er.description,price:er.price,duration_minutes:er.duration_minutes})});if(e.ok)await eR(j.id),et(null),eo({name:"",description:"",price:0,duration_minutes:0});else{let t=await e.json().catch(()=>({error:"Failed to update service"}));ea(t.error||"Failed to update service")}}catch(e){console.error("Error updating service:",e),ea("Failed to update service")}}},eJ=async e=>{if(j&&g&&confirm("Are you sure you want to delete this service?"))try{(await fetch(`${y}/services/${e}`,{method:"DELETE",headers:{"x-user-id":g.id}})).ok?await eR(j.id):alert("Failed to delete service")}catch(e){console.error("Error deleting service:",e),alert("Failed to delete service")}},eB=(e,t,r)=>{eh({isOpen:!0,bookingId:e,newStatus:t,bookingCustomerName:r}),eb(null)},eM=()=>{eh({isOpen:!1,bookingId:null,newStatus:null,bookingCustomerName:null}),eb(null)},eH=async()=>{if(j&&g&&eu.bookingId&&eu.newStatus){ep(!0),eb(null);try{let e=await fetch(`${y}/bookings/${eu.bookingId}/status`,{method:"PATCH",headers:{"Content-Type":"application/json","x-user-id":g.id},body:JSON.stringify({status:eu.newStatus})});if(e.ok)eb({type:"success",text:"confirmed"===eu.newStatus?f("myShop.bookingConfirmed"):f("myShop.bookingRejected")}),await eA(j.id),setTimeout(()=>{eM()},1500);else{let t=await e.json().catch(()=>({error:f("myShop.failedToUpdateStatus")}));eb({type:"error",text:t.error||f("myShop.failedToUpdateStatus")})}}catch(e){console.error("Error updating booking status:",e),eb({type:"error",text:f("myShop.failedToUpdateStatus")})}finally{ep(!1)}}},eQ=()=>{ef({isOpen:!1,bookingId:null,bookingCustomerName:null}),ew(null)},eG=async()=>{if(j&&g&&ey.bookingId){eN(!0),ew(null);try{let e=await fetch(`${y}/bookings/${ey.bookingId}/cancel`,{method:"POST",headers:{"Content-Type":"application/json","x-user-id":g.id}});if(e.ok)ew({type:"success",text:f("booking.cancelled")}),await eA(j.id),setTimeout(()=>{eQ()},1500);else{let t=await e.json().catch(()=>({error:f("booking.failedToCancel")}));ew({type:"error",text:t.error||f("booking.failedToCancel")})}}catch(e){console.error("Error cancelling booking:",e),ew({type:"error",text:f("booking.failedToCancel")})}finally{eN(!1)}}},eK=()=>{ek({isOpen:!1,bookingId:null,bookingCustomerName:null,currentDateTime:null}),eO(""),eT(null)},eY=async()=>{if(j&&g&&eS.bookingId&&e$){eC(!0),eT(null);try{let e=new Date(e$).toISOString(),t=await fetch(`${y}/bookings/${eS.bookingId}/reschedule`,{method:"POST",headers:{"Content-Type":"application/json","x-user-id":g.id},body:JSON.stringify({date_time:e})});if(t.ok)eT({type:"success",text:f("booking.rescheduled")}),await eA(j.id),setTimeout(()=>{eK()},1500);else{let e=await t.json().catch(()=>({error:f("booking.failedToReschedule")}));eT({type:"error",text:e.error||f("booking.failedToReschedule")})}}catch(e){console.error("Error rescheduling booking:",e),eT({type:"error",text:f("booking.failedToReschedule")})}finally{eC(!1)}}},eW=async e=>{if(e.preventDefault(),g)try{let e=await fetch(`${y}/shops`,{method:"POST",headers:{"Content-Type":"application/json","x-user-id":g.id},body:JSON.stringify(E)});if(e.ok){let t=await e.json();N(t),T(t),O(!1),b.refresh()}else{let t=await e.json();alert(`Error: ${t.error||"Failed to create shop"}`)}}catch(e){console.error("Error creating shop:",e),alert("Failed to create shop")}},eV=async e=>{if(e.preventDefault(),j&&g)try{let e={};void 0!==E.name&&null!==E.name&&(e.name=E.name),void 0!==E.address&&null!==E.address&&(e.address=E.address),void 0!==E.phone&&null!==E.phone&&(e.phone=E.phone),void 0!==E.email&&null!==E.email&&(e.email=E.email),void 0!==E.website&&null!==E.website&&(e.website=E.website),void 0!==E.google_place_id&&null!==E.google_place_id&&(e.google_place_id=E.google_place_id),void 0!==E.city&&null!==E.city&&(e.city=E.city),void 0!==E.country&&null!==E.country&&(e.country=E.country),void 0!==E.zip_code&&null!==E.zip_code&&(e.zip_code=E.zip_code),void 0!==E.description&&null!==E.description&&(e.description=E.description),void 0!==E.language_code&&null!==E.language_code&&(e.language_code=E.language_code);let t=await fetch(`${y}/shops/${j.id}`,{method:"PUT",headers:{"Content-Type":"application/json","x-user-id":g.id},body:JSON.stringify(e)});if(t.ok){let e=await t.json();N(e),T(e),C(!1)}else{let e=await t.json();alert(`Error: ${e.error||"Failed to update shop"}`)}}catch(e){console.error("Error updating shop:",e),alert("Failed to update shop")}},eX=async(e,t)=>{if(!j||!g||!e.target.files||0===e.target.files.length)return;let r=e.target.files[0];if(r.size>0xa00000)return void alert("File size must be less than 10MB");try{let e=new FormData;e.append("file",r),e.append("shopId",j.id),e.append("type",t);let o=`${y||"http://localhost:3000"}/photos/upload`,s=await fetch(o,{method:"POST",headers:{"x-user-id":g.id},body:e}),a=s.headers.get("content-type");if(!a||!a.includes("application/json")){let e=await s.text();throw console.error("Non-JSON response:",e),Error(`Server returned non-JSON response: ${s.status} ${s.statusText}`)}if(s.ok){let e=await s.json(),r=e.url,o=e.photo;if(!r)throw Error("No URL returned from upload");if(eI({type:"success",message:f("myShop.photoUploaded")}),setTimeout(()=>eI(null),3e3),o?H(e=>"logo"===t||"cover"===t?e.filter(e=>e.type!==t||e.shop_id!==j.id).concat([o]):[...e,o]):await eU(j.id),"logo"===t||"cover"===t){let e="logo"===t?"logo_url":"cover_photo_url",o=await fetch(`${y}/shops/${j.id}`,{method:"PATCH",headers:{"Content-Type":"application/json","x-user-id":g.id},body:JSON.stringify({[e]:r})});if(o.ok){let e=await o.json();N(e)}b.refresh()}}else{let e=await s.text(),t=f("myShop.failedToUpload");try{t=JSON.parse(e).error||t}catch{t=e||t}eI({type:"error",message:t}),setTimeout(()=>eI(null),5e3)}}catch(t){console.error("Error uploading photo:",t);let e=t instanceof Error?t.message:f("common.unknown");eI({type:"error",message:`${f("myShop.failedToUpload")}: ${e}`}),setTimeout(()=>eI(null),5e3)}e.target.value=""},eZ=async()=>{if(j&&g)try{await eU(j.id),eI({type:"success",message:f("myShop.photoUploaded")}),setTimeout(()=>eI(null),3e3),b.refresh()}catch(e){console.error("Error saving photos:",e),eI({type:"error",message:"Failed to save photos"}),setTimeout(()=>eI(null),5e3)}},e0=async(e,t)=>{if(j&&g&&confirm(`Are you sure you want to delete this ${t} photo?`))try{let r=await fetch(`${y}/shops/${j.id}/photos/${e}`,{method:"DELETE",headers:{"x-user-id":g.id}});if(r.ok){if(H(t=>t.filter(t=>t.id!==e)),await eU(j.id),"logo"===t||"cover"===t){let e=await fetch(`${y}/shops/${j.id}`,{method:"PATCH",headers:{"Content-Type":"application/json","x-user-id":g.id},body:JSON.stringify({["logo"===t?"logo_url":"cover_photo_url"]:null})});if(e.ok){let t=await e.json();N(t)}}b.refresh()}else{let e=await r.json();alert(`${f("common.error")}: ${e.error||f("myShop.failedToDelete")}`)}}catch(e){console.error("Error deleting photo:",e),alert(f("myShop.failedToDelete"))}};return v?(0,t.jsx)("div",{className:"p-8 flex items-center justify-center min-h-screen",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:f("common.loading")})]})}):j?(0,t.jsxs)("div",{className:"max-w-5xl mx-auto px-4 py-6",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:f("myShop.title")}),(0,t.jsx)("p",{className:"text-lg text-gray-600",children:j.name})]}),(0,t.jsx)("div",{className:"mb-6 border-b border-gray-200",children:(0,t.jsx)("div",{className:"flex gap-1",children:["overview","services","bookings","photos","reviews"].map(e=>(0,t.jsxs)("button",{onClick:()=>{k(e),j&&g&&("services"===e?eR(j.id):"bookings"===e?eA(j.id):"photos"===e?eU(j.id):"reviews"===e&&eP(j.id))},className:`px-6 py-3 font-medium transition-colors relative ${S===e?"text-blue-600 font-bold":"text-gray-600 hover:text-gray-900"}`,children:[f(`myShop.${e}`),S===e&&(0,t.jsx)("span",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600"})]},e))})}),"overview"===S&&(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:f("myShop.shopOverview")}),!_&&(0,t.jsx)("button",{onClick:()=>C(!0),className:"mt-2 text-sm text-blue-600 hover:text-blue-700 font-medium",children:f("myShop.editShop")})]}),_?(0,t.jsx)("form",{onSubmit:eV,children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:f("myShop.shopName")}),(0,t.jsx)("input",{type:"text",required:!0,value:E.name||"",onChange:e=>T(t=>({...t,name:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:f("myShop.address")}),(0,t.jsx)("input",{type:"text",required:!0,value:E.address||"",onChange:e=>T(t=>({...t,address:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:f("myShop.phone")}),(0,t.jsx)("input",{type:"tel",required:!0,value:E.phone||"",onChange:e=>T(t=>({...t,phone:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:f("myShop.email")}),(0,t.jsx)("input",{type:"email",required:!0,value:E.email||"",onChange:e=>T(t=>({...t,email:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:f("myShop.website")}),(0,t.jsx)("input",{type:"url",value:E.website||"",onChange:e=>T(t=>({...t,website:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:f("common.save")}),(0,t.jsx)("button",{type:"button",onClick:()=>{C(!1),T(j?{name:j.name||"",address:j.address||"",phone:j.phone||"",email:j.email||"",website:j.website||"",google_place_id:j.google_place_id||"",city:j.city||"",country:j.country||"",zip_code:j.zip_code||"",description:j.description||"",language_code:j.language_code||"",category:j.category||null,subcategory:j.subcategory||null,logo_url:j.logo_url||null,cover_photo_url:j.cover_photo_url||null}:{name:"",address:"",phone:"",email:"",website:"",google_place_id:"",city:"",country:"",zip_code:"",description:"",language_code:""})},className:"px-6 py-2 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors",children:f("common.cancel")})]})]})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("dt",{className:"text-sm font-medium text-gray-500 mb-1",children:f("common.name")}),(0,t.jsx)("dd",{className:"text-lg text-gray-900",children:j.name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("dt",{className:"text-sm font-medium text-gray-500 mb-1",children:f("myShop.address")}),(0,t.jsx)("dd",{className:"text-lg text-gray-900",children:j.address})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("dt",{className:"text-sm font-medium text-gray-500 mb-1",children:f("myShop.phone")}),(0,t.jsx)("dd",{className:"text-lg text-gray-900",children:j.phone})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("dt",{className:"text-sm font-medium text-gray-500 mb-1",children:f("myShop.email")}),(0,t.jsx)("dd",{className:"text-lg text-gray-900",children:j.email})]})]}),j.website&&(0,t.jsxs)("div",{children:[(0,t.jsx)("dt",{className:"text-sm font-medium text-gray-500 mb-1",children:f("myShop.website")}),(0,t.jsx)("dd",{children:(0,t.jsx)("a",{href:j.website,target:"_blank",rel:"noopener noreferrer",className:"text-lg text-blue-600 hover:underline",children:j.website})})]})]}),j&&(0,t.jsxs)("div",{className:"mt-8 p-6 bg-gray-50 rounded-lg border border-gray-200",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"LINE QR Code"}),(0,t.jsx)(n,{shopId:j.id,shop:j,user:g})]})]}),"services"===S&&(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:f("myShop.services")}),(0,t.jsxs)("div",{className:"mb-6 border border-gray-200 rounded-lg p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:ee?f("myShop.editService"):f("myShop.createNewService")}),es&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:es}),(0,t.jsxs)("form",{onSubmit:ee?ez:eq,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[f("myShop.serviceName")," *"]}),(0,t.jsx)("input",{type:"text",value:er.name,onChange:e=>eo(t=>({...t,name:e.target.value})),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:f("myShop.serviceName")})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[f("myShop.servicePrice")," *"]}),(0,t.jsx)("input",{type:"number",value:er.price,onChange:e=>eo(t=>({...t,price:parseFloat(e.target.value)||0})),required:!0,min:"0",step:"0.01",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:f("myShop.serviceDescription")}),(0,t.jsx)("textarea",{value:er.description,onChange:e=>eo(t=>({...t,description:e.target.value})),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:f("myShop.serviceDescription")})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[f("myShop.serviceDuration")," *"]}),(0,t.jsx)("input",{type:"number",value:er.duration_minutes,onChange:e=>eo(t=>({...t,duration_minutes:parseInt(e.target.value)||0})),required:!0,min:"1",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:ee?f("common.update"):f("common.create")}),ee&&(0,t.jsx)("button",{type:"button",onClick:()=>{et(null),eo({name:"",description:"",price:0,duration_minutes:0})},className:"px-6 py-2 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors",children:f("common.cancel")})]})]})]}),0===P.length?(0,t.jsxs)("div",{className:"border border-gray-200 rounded-lg p-8 text-center",children:[(0,t.jsx)("div",{className:"text-4xl mb-4",children:"âš™ï¸"}),(0,t.jsx)("p",{className:"text-gray-600 mb-2",children:f("myShop.noServices")}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:f("myShop.createFirstService")})]}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,t.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:f("common.name")}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:f("common.description")}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:f("common.price")}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:f("common.duration")}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:f("common.actions")})]})}),(0,t.jsx)("tbody",{children:P.map(e=>(0,t.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[(0,t.jsx)("td",{className:"py-3 px-4 text-gray-900 font-medium",children:e.name}),(0,t.jsx)("td",{className:"py-3 px-4 text-gray-600",children:e.description||"N/A"}),(0,t.jsxs)("td",{className:"py-3 px-4 text-gray-700",children:["$",e.price]}),(0,t.jsxs)("td",{className:"py-3 px-4 text-gray-700",children:[e.duration_minutes||0," min"]}),(0,t.jsx)("td",{className:"py-3 px-4",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>{et(e),eo({name:e.name,description:e.description||"",price:e.price,duration_minutes:e.duration_minutes||0})},className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:f("common.edit")}),(0,t.jsx)("button",{onClick:()=>eJ(e.id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:f("common.delete")})]})})]},e.id))})]})})]}),"bookings"===S&&(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:f("myShop.bookings")}),0===J.length?(0,t.jsxs)("div",{className:"border border-gray-200 rounded-lg p-8 text-center",children:[(0,t.jsx)("div",{className:"text-4xl mb-4",children:"ðŸ“…"}),(0,t.jsx)("p",{className:"text-gray-600 mb-2",children:f("myShop.noBookings")}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:f("myShop.bookingsWillAppear")})]}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,t.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:f("myShop.customer")}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:f("common.email")}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:f("common.phone")}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:f("myShop.dateTime")}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:f("myShop.service")}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:f("common.status")}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:f("common.actions")})]})}),(0,t.jsx)("tbody",{children:J.map(e=>(0,t.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[(0,t.jsx)("td",{className:"py-3 px-4 text-gray-900 font-medium",children:e.customer_name||f("common.unknown")}),(0,t.jsx)("td",{className:"py-3 px-4 text-gray-600",children:e.customer_email||"N/A"}),(0,t.jsx)("td",{className:"py-3 px-4 text-gray-600",children:e.customer_phone||"N/A"}),(0,t.jsx)("td",{className:"py-3 px-4 text-gray-700",children:e.start_time?new Date(e.start_time).toLocaleString():"N/A"}),(0,t.jsx)("td",{className:"py-3 px-4 text-gray-600",children:e.services?.name||"N/A"}),(0,t.jsx)("td",{className:"py-3 px-4",children:(0,t.jsx)("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${"confirmed"===e.status?"bg-green-100 text-green-700":"rejected"===e.status?"bg-red-100 text-red-700":"cancelled"===e.status?"bg-gray-100 text-gray-700":"completed"===e.status?"bg-blue-100 text-blue-700":"bg-yellow-100 text-yellow-700"}`,children:f(`status.${e.status||"pending"}`)})}),(0,t.jsx)("td",{className:"py-3 px-4",children:(0,t.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(!e.status||"pending"===e.status)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>eB(e.id,"confirmed",e.customer_name||null),className:"px-3 py-1.5 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors font-medium",children:f("common.confirm")}),(0,t.jsx)("button",{onClick:()=>eB(e.id,"rejected",e.customer_name||null),className:"px-3 py-1.5 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors font-medium",children:f("common.reject")})]}),e.status&&"cancelled"!==e.status&&"completed"!==e.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>{ef({isOpen:!0,bookingId:e.id,bookingCustomerName:e.customer_name||null}),ew(null)},className:"px-3 py-1.5 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors font-medium",children:f("booking.cancelBooking")}),(0,t.jsx)("button",{onClick:()=>{var t,r,o;let s,a;return t=e.id,r=e.customer_name||null,a=new Date((s=new Date(o=e.start_time)).getTime()-6e4*s.getTimezoneOffset()).toISOString().slice(0,16),void(ek({isOpen:!0,bookingId:t,bookingCustomerName:r,currentDateTime:o}),eO(a),eT(null))},className:"px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors font-medium",children:f("booking.rescheduleBooking")})]})]})})]},e.id))})]})})]}),"reviews"===S&&(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:f("reviews.title")}),W?(0,t.jsx)("p",{className:"text-gray-500",children:f("common.loading")}):(0,t.jsxs)(t.Fragment,{children:[K&&(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)(i.default,{averageRating:K.averageRating,totalReviews:K.totalReviews,ratingDistribution:K.ratingDistribution})}),0===Q.length?(0,t.jsx)("p",{className:"text-gray-500",children:f("reviews.noReviews")}):(0,t.jsx)("div",{className:"space-y-4",children:Q.map(e=>(0,t.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,t.jsx)(l.default,{review:e}),!e.owner_response&&(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,t.jsx)("textarea",{value:X[e.id]||"",onChange:t=>Z(r=>({...r,[e.id]:t.target.value})),placeholder:f("reviews.respond"),className:"w-full px-3 py-2 border border-gray-300 rounded-md mb-2",rows:3}),(0,t.jsx)("button",{onClick:()=>eL(e.id,X[e.id]||""),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:f("reviews.respond")})]})]},e.id))})]})]}),"photos"===S&&(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:f("myShop.photos")}),(0,t.jsx)("button",{onClick:eZ,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:f("common.save")})]}),eF&&(0,t.jsx)("div",{className:`mb-4 p-3 rounded-lg ${"success"===eF.type?"bg-green-100 text-green-700 border border-green-300":"bg-red-100 text-red-700 border border-red-300"}`,children:eF.message}),(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:f("myShop.shopLogo")}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(e=M.find(e=>"logo"===e.type),(d=e?.url||j.logo_url)?(0,t.jsx)("img",{src:d,alt:"Logo",className:"w-24 h-24 object-cover rounded-lg border border-gray-200"}):(0,t.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-lg border border-gray-200 flex items-center justify-center text-gray-400",children:f("myShop.noLogo")})),(0,t.jsx)("input",{type:"file",accept:"image/jpeg,image/png",onChange:e=>eX(e,"logo"),className:"hidden",id:"logo-upload"}),(0,t.jsx)("label",{htmlFor:"logo-upload",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer transition-colors",children:M.find(e=>"logo"===e.type)||j.logo_url?f("myShop.changeLogo"):f("myShop.uploadLogo")}),(c=M.find(e=>"logo"===e.type))?(0,t.jsx)("button",{onClick:()=>e0(c.id,"logo"),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:f("common.delete")}):null]})]}),(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:f("myShop.coverPhoto")}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(m=M.find(e=>"cover"===e.type),(u=m?.url||j.cover_photo_url)?(0,t.jsx)("img",{src:u,alt:"Cover",className:"w-48 h-32 object-cover rounded-lg border border-gray-200"}):(0,t.jsx)("div",{className:"w-48 h-32 bg-gray-100 rounded-lg border border-gray-200 flex items-center justify-center text-gray-400",children:f("myShop.noCoverPhoto")})),(0,t.jsx)("input",{type:"file",accept:"image/jpeg,image/png",onChange:e=>eX(e,"cover"),className:"hidden",id:"cover-upload"}),(0,t.jsx)("label",{htmlFor:"cover-upload",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer transition-colors",children:M.find(e=>"cover"===e.type)||j.cover_photo_url?f("myShop.changeCover"):f("myShop.uploadCover")}),(h=M.find(e=>"cover"===e.type))?(0,t.jsx)("button",{onClick:()=>e0(h.id,"cover"),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:f("common.delete")}):null]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:f("myShop.galleryPhotos")}),(0,t.jsx)("input",{type:"file",accept:"image/jpeg,image/png,image/jpg",onChange:e=>eX(e,"gallery"),className:"hidden",id:"gallery-upload"}),(0,t.jsx)("label",{htmlFor:"gallery-upload",className:"inline-block px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer transition-colors mb-4",children:f("myShop.uploadGalleryPhoto")}),0===M.filter(e=>"gallery"===e.type).length?(0,t.jsxs)("div",{className:"border border-gray-200 rounded-lg p-8 text-center bg-gray-50",children:[(0,t.jsx)("div",{className:"text-2xl mb-2",children:"ðŸ“¸"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:f("myShop.noGalleryPhotos")})]}):(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:M.filter(e=>"gallery"===e.type).map(e=>(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)("img",{src:e.url,alt:"Gallery",className:"w-full h-48 object-cover rounded-lg border border-gray-200",onError:t=>{console.error("Error loading image:",e.url),t.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="200" height="200"%3E%3Crect fill="%23ddd" width="200" height="200"/%3E%3Ctext fill="%23999" font-family="sans-serif" font-size="14" x="50%25" y="50%25" text-anchor="middle" dy=".3em"%3EImage not found%3C/text%3E%3C/svg%3E'}}),(0,t.jsx)("button",{onClick:()=>e0(e.id,"gallery"),className:"absolute top-2 right-2 px-3 py-1 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors opacity-0 group-hover:opacity-100 shadow-lg",children:f("common.delete")})]},e.id))})]})]}),eu.isOpen&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",onClick:eM,onMouseDown:e=>{e.target===e.currentTarget&&eM()},children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6 relative",onClick:e=>e.stopPropagation(),onMouseDown:e=>e.stopPropagation(),children:[(0,t.jsx)("button",{type:"button",onClick:eM,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-2xl leading-none",children:"Ã—"}),(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"confirmed"===eu.newStatus?f("myShop.confirmBooking"):f("myShop.rejectBooking")}),(0,t.jsxs)("p",{className:"text-gray-600 mb-6",children:["confirmed"===eu.newStatus?f("myShop.areYouSureConfirm"):f("myShop.areYouSureReject")," ",eu.bookingCustomerName?`${f("common.for")} ${eu.bookingCustomerName}`:"","?"]}),ex&&(0,t.jsx)("div",{className:`mb-4 p-3 rounded-lg ${"success"===ex.type?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:ex.text}),(0,t.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,t.jsx)("button",{type:"button",onClick:eM,disabled:eg,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:f("common.cancel")}),(0,t.jsx)("button",{type:"button",onClick:eH,disabled:eg,className:`px-4 py-2 rounded-lg text-white font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${"confirmed"===eu.newStatus?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"}`,children:eg?f("common.updating"):"confirmed"===eu.newStatus?f("common.confirm"):f("common.reject")})]})]})}),ey.isOpen&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",onClick:eQ,onMouseDown:e=>{e.target===e.currentTarget&&eQ()},children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6 relative",onClick:e=>e.stopPropagation(),onMouseDown:e=>e.stopPropagation(),children:[(0,t.jsx)("button",{type:"button",onClick:eQ,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-2xl leading-none",children:"Ã—"}),(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:f("booking.cancelBooking")}),(0,t.jsxs)("p",{className:"text-gray-600 mb-6",children:[f("booking.cancelConfirm")," ",ey.bookingCustomerName?`${f("common.for")} ${ey.bookingCustomerName}`:"","?"]}),ev&&(0,t.jsx)("div",{className:`mb-4 p-3 rounded-lg ${"success"===ev.type?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:ev.text}),(0,t.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,t.jsxs)("button",{type:"button",onClick:eQ,disabled:ej,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[f("common.no"),", ",f("common.keepIt")]}),(0,t.jsx)("button",{type:"button",onClick:eG,disabled:ej,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:ej?f("common.cancelling"):`${f("common.yes")}, ${f("booking.cancelBooking")}`})]})]})}),eS.isOpen&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",onClick:eK,onMouseDown:e=>{e.target===e.currentTarget&&eK()},children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6 relative",onClick:e=>e.stopPropagation(),onMouseDown:e=>e.stopPropagation(),children:[(0,t.jsx)("button",{type:"button",onClick:eK,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-2xl leading-none",children:"Ã—"}),(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:f("booking.rescheduleBooking")}),(0,t.jsxs)("p",{className:"text-gray-600 mb-4",children:[eS.bookingCustomerName?`${f("booking.rescheduleConfirm")} ${eS.bookingCustomerName}`:f("booking.rescheduleBooking"),":"]}),eS.currentDateTime&&(0,t.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:[f("booking.current"),": ",new Date(eS.currentDateTime).toLocaleString()]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:f("booking.newDateTime")}),(0,t.jsx)("input",{type:"datetime-local",value:e$,onChange:e=>eO(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",required:!0})]}),eE&&(0,t.jsx)("div",{className:`mb-4 p-3 rounded-lg ${"success"===eE.type?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:eE.text}),(0,t.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,t.jsx)("button",{type:"button",onClick:eK,disabled:e_,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:f("common.cancel")}),(0,t.jsx)("button",{type:"button",onClick:eY,disabled:e_||!e$,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:e_?f("common.rescheduling"):f("booking.rescheduleBooking")})]})]})})]}):(0,t.jsxs)("div",{className:"p-8 max-w-4xl mx-auto",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:f("myShop.title")}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 p-8 mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:f("myShop.getStarted")}),(0,t.jsxs)("p",{className:"text-gray-600 mb-6",children:[f("myShop.noShop")," ",f("myShop.createShop")," ",f("common.or")," ",f("myShop.claimShop"),"."]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:f("myShop.createNewShop")}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:f("myShop.startFresh")}),(0,t.jsx)("button",{onClick:()=>O(!0),className:"w-full px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:f("myShop.createShop")})]}),(0,t.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:f("myShop.claimExistingShop")}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:f("myShop.claimOwnership")}),(0,t.jsx)("button",{onClick:()=>I(!0),className:"w-full px-4 py-2 bg-gray-600 text-white font-medium rounded-lg hover:bg-gray-700 transition-colors",children:f("myShop.claimShop")})]})]})]}),$&&(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 p-8",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:f("myShop.createNewShop")}),(0,t.jsx)("form",{onSubmit:eW,children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:f("myShop.shopName")}),(0,t.jsx)("input",{type:"text",required:!0,value:E.name||"",onChange:e=>T(t=>({...t,name:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:f("myShop.address")}),(0,t.jsx)("input",{type:"text",required:!0,value:E.address||"",onChange:e=>T(t=>({...t,address:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:f("myShop.phone")}),(0,t.jsx)("input",{type:"tel",required:!0,value:E.phone||"",onChange:e=>T(t=>({...t,phone:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:f("myShop.email")}),(0,t.jsx)("input",{type:"email",required:!0,value:E.email||"",onChange:e=>T(t=>({...t,email:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:f("myShop.createShop")}),(0,t.jsx)("button",{type:"button",onClick:()=>O(!1),className:"px-6 py-2 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors",children:f("common.cancel")})]})]})})]}),F&&(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 p-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:f("myShop.claimShop")}),(0,t.jsx)("button",{onClick:()=>I(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-900",children:"Ã—"})]}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:f("myShop.selectUnclaimedShop")}),A?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,t.jsx)("p",{className:"mt-2 text-gray-600",children:f("shops.loading")})]}):0===R.length?(0,t.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,t.jsx)("p",{children:f("myShop.noUnclaimedShops")})}):(0,t.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:R.map(e=>(0,t.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:e.name}),e.address&&(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.address})]}),(0,t.jsx)("button",{onClick:async()=>{if(g)try{U(!0);let t=await fetch(`${y}/shops/${e.id}/claim`,{method:"POST",headers:{"Content-Type":"application/json","x-user-id":g.id}});if(t.ok){let e=await t.json();N(e),T(e),I(!1),b.refresh()}else{let e=await t.json();alert(`Error: ${e.error||"Failed to claim shop"}`)}}catch(e){console.error("Error claiming shop:",e),alert("Failed to claim shop")}finally{U(!1)}},className:"px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:f("myShop.claimShop")})]})},e.id))})]})]})}])}]);