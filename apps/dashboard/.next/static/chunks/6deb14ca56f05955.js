(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,46762,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(22016),r=e.i(63611);e.s(["default",0,()=>{let{user:e}=(0,r.useAuth)(),[l,i]=(0,t.useState)([]),[d,n]=(0,t.useState)([]),[o,c]=(0,t.useState)([]),[x,m]=(0,t.useState)(""),[h,b]=(0,t.useState)(new Date().toISOString().split("T")[0]),u="http://localhost:3000",f=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];(0,t.useEffect)(()=>{e&&(async()=>{try{let s={"x-user-id":e.id},t=await fetch(`${u}/timeslots`,{headers:s});if(t.ok){let e=await t.json();i(Array.isArray(e)?e:[])}let a=await fetch(`${u}/staff`,{headers:s});if(a.ok){let e=await a.json();n(Array.isArray(e)?e:[])}let r=await fetch(`${u}/shops`);if(r.ok){let e=await r.json();c(Array.isArray(e)?e:[])}}catch(e){console.error("Error fetching data:",e)}})()},[u,e]);let g=e=>{let s=d.find(s=>s.id===e);return s?`${s.first_name} ${s.last_name}`:"Unknown Staff"},p=e=>{let s=o.find(s=>s.id===e);return s?s.name:"Unknown Shop"},j=l.filter(e=>{if(x&&e.staff_id!==x)return!1;if(h){let s=new Date(h).getDay();return e.day_of_week===s}return!0}).reduce((e,s)=>{let t=s.staff_id;return e[t]||(e[t]=[]),e[t].push(s),e},{});return e&&0===o.length?(0,s.jsxs)("div",{className:"p-8",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Timeslots"}),(0,s.jsx)("p",{className:"text-gray-600",children:"View staff availability and generated timeslots"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 p-12 text-center",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"ðŸª"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"No Shops Found"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"You need to create or claim a shop before you can view timeslots."}),(0,s.jsx)(a.default,{href:"/shops",className:"inline-block bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 px-6 rounded-lg shadow-md hover:shadow-lg transition-all duration-200",children:"Go to Shops â†’"})]})]}):(0,s.jsxs)("div",{className:"p-8",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Timeslots"}),(0,s.jsx)("p",{className:"text-gray-600",children:"View staff availability and generated timeslots"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,s.jsx)("div",{className:"lg:col-span-1",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Filters"}),(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Staff"}),(0,s.jsxs)("select",{value:x,onChange:e=>m(e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition",children:[(0,s.jsx)("option",{value:"",children:"All Staff"}),d.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name," - ",p(e.shop_id)]},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),(0,s.jsx)("input",{type:"date",value:h,onChange:e=>b(e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition"})]})]})]})}),(0,s.jsx)("div",{className:"lg:col-span-3",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden",children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Schedule"})}),(0,s.jsx)("div",{className:"p-6",children:Object.keys(j).length>0?(0,s.jsx)("div",{className:"space-y-6",children:Object.entries(j).map(([e,t])=>{let a;return(0,s.jsxs)("div",{className:"border-b border-gray-200 pb-6 last:border-b-0 last:pb-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full flex items-center justify-center text-white font-bold",children:g(e).charAt(0)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:g(e)}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:p((a=d.find(s=>s.id===e),a?.shop_id||""))})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:t.map(e=>(0,s.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("span",{className:"text-xs font-semibold text-green-700 uppercase tracking-wide",children:f[e.day_of_week]}),(0,s.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs font-semibold rounded-full",children:"Available"})]}),(0,s.jsxs)("div",{className:"text-sm text-gray-700",children:[(0,s.jsx)("span",{className:"font-medium",children:e.start_time}),(0,s.jsx)("span",{className:"mx-2",children:"-"}),(0,s.jsx)("span",{className:"font-medium",children:e.end_time})]})]},e.id))})]},e)})}):(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"ðŸ“…"}),(0,s.jsx)("p",{className:"text-gray-500 text-lg mb-2",children:"No timeslots found"}),(0,s.jsx)("p",{className:"text-gray-400 text-sm",children:x||h?"Try adjusting your filters":"Create availability for staff members to generate timeslots"})]})})]})})]})]})}])}]);