(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,5858,e=>{"use strict";var r=e.i(43476),s=e.i(71645),t=e.i(22016),a=e.i(63611);e.s(["default",0,()=>{let{user:e}=(0,a.useAuth)(),[i,l]=(0,s.useState)([]),[n,o]=(0,s.useState)([]),[d,c]=(0,s.useState)({shop_id:"",name:"",description:"",price:0,duration:0}),[x,m]=(0,s.useState)(null),h="http://localhost:3000";(0,s.useEffect)(()=>{e&&(async()=>{try{let r={"x-user-id":e.id},s=await fetch(`${h}/services`,{headers:r});if(s.ok){let e=await s.json();l(Array.isArray(e)?e:[])}let t=await fetch(`${h}/shops`);if(t.ok){let e=await t.json(),r=Array.isArray(e)?e:[];o(r),c(e=>1!==r.length||e.shop_id?e:{...e,shop_id:r[0].id})}}catch(e){console.error("Error fetching data:",e)}})()},[h,e]);let u=e=>{let{name:r,value:s,type:t}=e.target,a="number"===t?parseFloat(s)||0:s;c(e=>({...e,[r]:a}))},p=async()=>{if(!e)return void m("You must be logged in to create a service");if(!d.shop_id||!d.name||!d.price||!d.duration)return void m("Shop, name, price, and duration are required");m(null);try{let r=await fetch(`${h}/services`,{method:"POST",headers:{"Content-Type":"application/json","x-user-id":e.id},body:JSON.stringify(d)});if(r.ok){let e=await r.json();if(e&&"object"==typeof e&&"id"in e)l([...i,e]);else{let e=await fetch(`${h}/services`);if(e.ok){let r=await e.json();l(Array.isArray(r)?r:[])}}c({shop_id:"",name:"",description:"",price:0,duration:0})}else{let e=await r.json().catch(()=>({error:"Unknown error"}));m(e.error||`Failed to create service: ${r.status}`)}}catch(e){console.error("Failed to create service:",e),m("Failed to create service. Please try again.")}};return e&&0===n.length?(0,r.jsxs)("div",{className:"p-8",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Services"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Manage services and pricing"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 p-12 text-center",children:[(0,r.jsx)("div",{className:"text-6xl mb-4",children:"ðŸª"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"No Shops Found"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"You need to create or claim a shop before you can manage services."}),(0,r.jsx)(t.default,{href:"/shops",className:"inline-block bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 px-6 rounded-lg shadow-md hover:shadow-lg transition-all duration-200",children:"Go to Shops â†’"})]})]}):(0,r.jsxs)("div",{className:"p-8",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Services"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Manage services and pricing"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Create New Service"}),x&&(0,r.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:x}),(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shop *"}),(0,r.jsxs)("select",{name:"shop_id",value:d.shop_id,onChange:u,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition",required:!0,children:[(0,r.jsx)("option",{value:"",children:"Select Shop"}),n.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service Name *"}),(0,r.jsx)("input",{type:"text",name:"name",placeholder:"Service name",value:d.name,onChange:u,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,r.jsx)("textarea",{name:"description",placeholder:"Service description",value:d.description,onChange:u,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition",rows:3})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price ($) *"}),(0,r.jsx)("input",{type:"number",name:"price",placeholder:"0.00",value:d.price,onChange:u,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition",min:"0",step:"0.01",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes) *"}),(0,r.jsx)("input",{type:"number",name:"duration",placeholder:"Duration",value:d.duration,onChange:u,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition",min:"1",required:!0})]}),(0,r.jsx)("button",{onClick:p,className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 px-4 rounded-lg shadow-md hover:shadow-lg transition-all duration-200",children:"Create Service"})]})]})}),(0,r.jsx)("div",{className:"lg:col-span-2",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"All Services"})}),(0,r.jsx)("div",{className:"overflow-x-auto",children:Array.isArray(i)&&i.length>0?(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Shop"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(e=>{var s;let a;return(0,r.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)(t.default,{href:`/shops/services/${e.id}`,className:"text-blue-600 hover:text-blue-800 font-medium hover:underline",children:e.name})}),(0,r.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:(s=e.shop_id,(a=n.find(e=>e.id===s))?a.name:"Unknown Shop")}),(0,r.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-600 font-semibold",children:["$",e.price]}),(0,r.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-600",children:[e.duration," min"]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)(t.default,{href:`/shops/services/${e.id}`,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View â†’"})})]},e.id)})})]}):(0,r.jsxs)("div",{className:"p-12 text-center",children:[(0,r.jsx)("p",{className:"text-gray-500 text-lg",children:"No services found"}),(0,r.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Create your first service to get started"})]})})]})})]})]})}])}]);