module.exports=[66435,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(67254);a.s(["default",0,()=>{let{user:a}=(0,e.useAuth)(),[f,g]=(0,c.useState)([]),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(new Date().toISOString().split("T")[0]),p="http://localhost:3000",q=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];(0,c.useEffect)(()=>{a&&(async()=>{try{let b={"x-user-id":a.id},c=await fetch(`${p}/timeslots`,{headers:b});if(c.ok){let a=await c.json();g(Array.isArray(a)?a:[])}let d=await fetch(`${p}/staff`,{headers:b});if(d.ok){let a=await d.json();i(Array.isArray(a)?a:[])}let e=await fetch(`${p}/shops`);if(e.ok){let a=await e.json();k(Array.isArray(a)?a:[])}}catch(a){console.error("Error fetching data:",a)}})()},[p,a]);let r=a=>{let b=h.find(b=>b.id===a);return b?`${b.first_name} ${b.last_name}`:"Unknown Staff"},s=a=>{let b=j.find(b=>b.id===a);return b?b.name:"Unknown Shop"},t=f.filter(a=>{if(l&&a.staff_id!==l)return!1;if(n){let b=new Date(n).getDay();return a.day_of_week===b}return!0}).reduce((a,b)=>{let c=b.staff_id;return a[c]||(a[c]=[]),a[c].push(b),a},{});return a&&0===j.length?(0,b.jsxs)("div",{className:"p-8",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Timeslots"}),(0,b.jsx)("p",{className:"text-gray-600",children:"View staff availability and generated timeslots"})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 p-12 text-center",children:[(0,b.jsx)("div",{className:"text-6xl mb-4",children:"ðŸª"}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"No Shops Found"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:"You need to create or claim a shop before you can view timeslots."}),(0,b.jsx)(d.default,{href:"/shops",className:"inline-block bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 px-6 rounded-lg shadow-md hover:shadow-lg transition-all duration-200",children:"Go to Shops â†’"})]})]}):(0,b.jsxs)("div",{className:"p-8",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Timeslots"}),(0,b.jsx)("p",{className:"text-gray-600",children:"View staff availability and generated timeslots"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,b.jsx)("div",{className:"lg:col-span-1",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Filters"}),(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Staff"}),(0,b.jsxs)("select",{value:l,onChange:a=>m(a.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition",children:[(0,b.jsx)("option",{value:"",children:"All Staff"}),h.map(a=>(0,b.jsxs)("option",{value:a.id,children:[a.first_name," ",a.last_name," - ",s(a.shop_id)]},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),(0,b.jsx)("input",{type:"date",value:n,onChange:a=>o(a.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition"})]})]})]})}),(0,b.jsx)("div",{className:"lg:col-span-3",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden",children:[(0,b.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Schedule"})}),(0,b.jsx)("div",{className:"p-6",children:Object.keys(t).length>0?(0,b.jsx)("div",{className:"space-y-6",children:Object.entries(t).map(([a,c])=>{let d;return(0,b.jsxs)("div",{className:"border-b border-gray-200 pb-6 last:border-b-0 last:pb-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full flex items-center justify-center text-white font-bold",children:r(a).charAt(0)}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:r(a)}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:s((d=h.find(b=>b.id===a),d?.shop_id||""))})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:c.map(a=>(0,b.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-xs font-semibold text-green-700 uppercase tracking-wide",children:q[a.day_of_week]}),(0,b.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs font-semibold rounded-full",children:"Available"})]}),(0,b.jsxs)("div",{className:"text-sm text-gray-700",children:[(0,b.jsx)("span",{className:"font-medium",children:a.start_time}),(0,b.jsx)("span",{className:"mx-2",children:"-"}),(0,b.jsx)("span",{className:"font-medium",children:a.end_time})]})]},a.id))})]},a)})}):(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("div",{className:"text-6xl mb-4",children:"ðŸ“…"}),(0,b.jsx)("p",{className:"text-gray-500 text-lg mb-2",children:"No timeslots found"}),(0,b.jsx)("p",{className:"text-gray-400 text-sm",children:l||n?"Try adjusting your filters":"Create availability for staff members to generate timeslots"})]})})]})})]})]})}])}];

//# sourceMappingURL=apps_dashboard_app_timeslots_page_tsx_153a3959._.js.map