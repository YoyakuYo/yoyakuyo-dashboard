module.exports=[85480,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(50944),f=a.i(3214),g=a.i(67254),h=a.i(15925);let i=c.default.memo(({isOpen:a,onClose:c,children:d})=>a?(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",onClick:c,onMouseDown:a=>{a.target===a.currentTarget&&c()},children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-8 relative",onClick:a=>a.stopPropagation(),onMouseDown:a=>a.stopPropagation(),onKeyDown:a=>{"Escape"===a.key&&a.stopPropagation()},children:[(0,b.jsx)("button",{type:"button",onClick:a=>{a.preventDefault(),a.stopPropagation(),c()},onMouseDown:a=>{a.preventDefault(),a.stopPropagation()},className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-2xl leading-none",children:"Ã—"}),d]})}):null);function j(){let a=(0,e.useRouter)(),{user:j,loading:k}=(0,g.useAuth)(),l=(0,h.useTranslations)(),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)(""),[G,H]=(0,c.useState)(null),[I,J]=(0,c.useState)(!1);(0,c.useEffect)(()=>()=>{},[]),(0,c.useEffect)(()=>{!k&&j&&a.push("/shops")},[j,k,a]);let K=async b=>{b.preventDefault(),v(null),x(!0);try{let{error:b}=await (0,f.getSupabaseClient)().auth.signInWithPassword({email:q,password:s});if(b){v(b.message),x(!1);return}n(!1),a.push("/shops"),a.refresh()}catch(a){v(a.message||l("auth.unexpectedError")),x(!1)}},L=async b=>{b.preventDefault(),b.stopPropagation(),H(null),J(!0);try{if(!y||!A||!C){H(l("auth.fillRequiredFields")),J(!1);return}let b=(0,f.getSupabaseClient)();console.log("Creating user in Supabase Auth...");let{data:c,error:d}=await b.auth.signUp({email:A,password:C,options:{data:{name:y}}});if(d){console.error("Signup error:",d),H(d.message),J(!1);return}if(!c.user){console.error("No user returned from signup"),H("Failed to create user account"),J(!1);return}let e=c.user.id;console.log("User created in Auth:",e),console.log("Setting up user record and shop...");let g=await fetch("http://localhost:3000/auth/signup-owner",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,name:y,email:A,shop_name:E||null})});if(!g.ok){let a=await g.json().catch(()=>({error:"Failed to setup account"}));console.error("Setup API error:",a),H(a.error||l("auth.failedToSetupAccount")),J(!1);return}let h=await g.json();console.log("Account setup successful:",h);let i=c.session;if(!i){console.log("Checking current session...");let{data:a}=await b.auth.getSession();i=a.session}if(i)console.log("âœ… User already has active session");else{console.log("No session found, waiting for user to be ready..."),await new Promise(a=>setTimeout(a,1e3)),console.log("Attempting to sign in...");let{data:a,error:c}=await b.auth.signInWithPassword({email:A,password:C});if(c){console.error("Sign in error:",c),H("Account created successfully! Please sign in manually with your email and password. If you received a confirmation email, please confirm it first."),J(!1),p(!1),setTimeout(()=>{n(!0)},500);return}i=a.session,console.log("âœ… Signed in successfully")}await new Promise(a=>setTimeout(a,500)),p(!1),a.push("/shops"),a.refresh()}catch(a){console.error("Unexpected error during signup:",a),H(a instanceof Error?a.message:l("auth.unexpectedError")),J(!1)}},M=(0,c.useCallback)(()=>n(!1),[]),N=(0,c.useCallback)(()=>p(!1),[]);return(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsx)("section",{className:"py-16 md:py-24",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto px-4 text-center",children:[(0,b.jsx)("h1",{className:"text-5xl md:text-6xl font-bold text-gray-900 mb-6",children:l("home.title")}),(0,b.jsx)("p",{className:"text-xl md:text-2xl text-gray-600 mb-8",children:l("home.subtitle")}),(0,b.jsxs)("ul",{className:"space-y-3 mb-10 max-w-2xl mx-auto text-left",children:[(0,b.jsxs)("li",{className:"flex items-start gap-3",children:[(0,b.jsx)("span",{className:"text-2xl mt-1",children:"âœ“"}),(0,b.jsx)("span",{className:"text-lg text-gray-700",children:l("home.feature1")})]}),(0,b.jsxs)("li",{className:"flex items-start gap-3",children:[(0,b.jsx)("span",{className:"text-2xl mt-1",children:"âœ“"}),(0,b.jsx)("span",{className:"text-lg text-gray-700",children:l("home.feature2")})]}),(0,b.jsxs)("li",{className:"flex items-start gap-3",children:[(0,b.jsx)("span",{className:"text-2xl mt-1",children:"âœ“"}),(0,b.jsx)("span",{className:"text-lg text-gray-700",children:l("home.feature3")})]})]}),(0,b.jsxs)("div",{className:"flex gap-4 justify-center flex-wrap",children:[(0,b.jsx)(d.default,{href:"/browse",className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-8 rounded-lg shadow-md hover:shadow-lg transition-all duration-200",children:l("home.browseShops")}),(0,b.jsx)("button",{type:"button",onClick:a=>{a.preventDefault(),a.stopPropagation(),n(!0)},className:"bg-white hover:bg-gray-50 text-gray-700 font-semibold py-3 px-8 rounded-lg shadow-md hover:shadow-lg transition-all duration-200 border border-gray-300",children:l("home.ownerLogin")}),(0,b.jsx)("button",{type:"button",onClick:a=>{a.preventDefault(),a.stopPropagation(),p(!0)},className:"bg-blue-500 hover:bg-blue-600 text-white font-semibold py-3 px-8 rounded-lg shadow-md hover:shadow-lg transition-all duration-200",children:l("home.joinAsOwner")})]})]})}),(0,b.jsx)("section",{className:"py-16 border-t border-gray-200 bg-gray-50",children:(0,b.jsx)("div",{className:"max-w-6xl mx-auto px-4",children:(0,b.jsxs)("div",{className:"grid md:grid-cols-3 gap-8",children:[(0,b.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[(0,b.jsx)("div",{className:"text-4xl mb-4",children:"ðŸ”"}),(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:l("home.forCustomers")}),(0,b.jsx)("p",{className:"text-gray-600",children:l("home.forCustomersDesc")})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[(0,b.jsx)("div",{className:"text-4xl mb-4",children:"ðŸ‘”"}),(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:l("home.forOwners")}),(0,b.jsx)("p",{className:"text-gray-600",children:l("home.forOwnersDesc")})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[(0,b.jsx)("div",{className:"text-4xl mb-4",children:"ðŸ¤–"}),(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:l("home.aiAssistance")}),(0,b.jsx)("p",{className:"text-gray-600",children:l("home.aiAssistanceDesc")})]})]})})}),(0,b.jsxs)(i,{isOpen:m,onClose:M,children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:l("auth.signInToShop")}),u&&(0,b.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:u}),(0,b.jsxs)("form",{onSubmit:K,className:"space-y-5",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"login-email",className:"block text-sm font-medium text-gray-700 mb-2",children:l("common.email")}),(0,b.jsx)("input",{id:"login-email",type:"email",value:q,onChange:a=>r(a.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition",placeholder:"your@email.com"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"login-password",className:"block text-sm font-medium text-gray-700 mb-2",children:l("auth.password")}),(0,b.jsx)("input",{id:"login-password",type:"password",value:s,onChange:a=>t(a.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"})]}),(0,b.jsx)("button",{type:"submit",disabled:w,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:w?l("auth.signingIn"):l("auth.signIn")})]}),(0,b.jsxs)("p",{className:"mt-6 text-center text-sm text-gray-600",children:[l("auth.dontHaveAccount")," ",(0,b.jsx)("button",{onClick:()=>{n(!1),p(!0)},className:"text-blue-600 hover:text-blue-700 font-medium",children:l("home.joinAsOwner")})]})]}),(0,b.jsxs)(i,{isOpen:o,onClose:N,children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:l("auth.createOwnerAccount")}),G&&(0,b.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:G}),(0,b.jsxs)("form",{onSubmit:L,className:"space-y-4",noValidate:!0,children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{htmlFor:"signup-name",className:"block text-sm font-medium text-gray-700 mb-1",children:[l("auth.ownerName")," ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{id:"signup-name",type:"text",value:y,onChange:a=>z(a.target.value),required:!0,autoComplete:"name",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:l("auth.ownerName")})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{htmlFor:"signup-email",className:"block text-sm font-medium text-gray-700 mb-1",children:[l("common.email")," ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{id:"signup-email",type:"email",value:A,onChange:a=>B(a.target.value),required:!0,autoComplete:"email",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"your@email.com"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{htmlFor:"signup-password",className:"block text-sm font-medium text-gray-700 mb-1",children:[l("auth.password")," ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{id:"signup-password",type:"password",value:C,onChange:a=>D(a.target.value),required:!0,minLength:6,autoComplete:"new-password",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{htmlFor:"signup-shop-name",className:"block text-sm font-medium text-gray-700 mb-1",children:[l("myShop.shopName")," ",(0,b.jsxs)("span",{className:"text-gray-400 text-xs",children:["(",l("common.optional"),")"]})]}),(0,b.jsx)("input",{id:"signup-shop-name",type:"text",value:E,onChange:a=>F(a.target.value),autoComplete:"organization",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:l("myShop.shopName")})]}),(0,b.jsx)("button",{type:"button",disabled:I,onClick:async a=>{a.preventDefault(),a.stopPropagation(),await L({preventDefault:()=>{},stopPropagation:()=>{}})},className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:I?l("auth.creatingAccount"):l("auth.signUp")})]}),(0,b.jsxs)("p",{className:"mt-6 text-center text-sm text-gray-600",children:[l("auth.alreadyHaveAccount")," ",(0,b.jsx)("button",{onClick:()=>{p(!1),n(!0)},className:"text-blue-600 hover:text-blue-700 font-medium",children:l("auth.signIn")})]})]})]})}i.displayName="Modal",a.s(["default",()=>j,"dynamic",0,"force-dynamic"])}];

//# sourceMappingURL=apps_dashboard_app_public_page_tsx_e1d3e718._.js.map