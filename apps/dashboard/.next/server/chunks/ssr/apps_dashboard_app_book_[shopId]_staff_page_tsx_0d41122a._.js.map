{"version":3,"sources":["../../../../../../apps/dashboard/app/book/%5BshopId%5D/staff/page.tsx"],"sourcesContent":["// apps/dashboard/app/book/[shopId]/staff/page.tsx\n\n\"use client\";\nimport React, { useState, useEffect } from 'react';\nimport { useRouter, useSearchParams, useParams } from 'next/navigation';\n\ninterface Staff {\n  id: string;\n  first_name: string;\n  last_name: string;\n}\n\nexport default function StaffPage() {\n  const params = useParams();\n  const shopId = params?.shopId as string;\n    const searchParams = useSearchParams();\n    const serviceId = searchParams.get('serviceId');\n  const [staffMembers, setStaffMembers] = useState<Staff[]>([]);\n  const [selectedStaff, setSelectedStaff] = useState<string | null>(null);\n  const apiUrl = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3000';\n  const router = useRouter();\n\n  useEffect(() => {\n    const fetchStaff = async () => {\n      try {\n        const res = await fetch(`${apiUrl}/shops/${shopId}/staff`);\n        if (res.ok) {\n          const data = await res.json();\n          setStaffMembers(Array.isArray(data) ? data : []);\n        } else {\n          console.error(\"Failed to fetch staff:\", res.status, res.statusText);\n          setStaffMembers([]);\n        }\n      } catch (error) {\n        console.error(\"Failed to fetch staff:\", error);\n        setStaffMembers([]);\n      }\n    };\n\n    fetchStaff();\n  }, [shopId, apiUrl]);\n\n    const handleStaffChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\n        setSelectedStaff(e.target.value);\n    };\n\n    const goToNextStep = () => {\n        if (selectedStaff && serviceId) {\n            router.push(`/book/${shopId}/date?serviceId=${serviceId}&staffId=${selectedStaff}`);\n        }\n    };\n\n  return (\n    <div className=\"container mx-auto p-4\">\n      <h1 className=\"text-3xl font-bold mb-4\">Choose Staff</h1>\n      <p>Shop ID: {shopId}</p>\n\n      <div>\n        <h2 className=\"text-2xl font-semibold mb-2\">Select a staff member</h2>\n        <select value={selectedStaff || ''} onChange={handleStaffChange} className=\"border rounded p-2\">\n          <option value=\"\">Select a staff member</option>\n          {staffMembers.map((staff) => (\n            <option key={staff.id} value={staff.id}>\n              {staff.first_name} {staff.last_name}\n            </option>\n          ))}\n        </select>\n      </div>\n\n         <button\n                onClick={goToNextStep}\n                disabled={!selectedStaff}\n                className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mt-4 disabled:opacity-50\"\n            >\n                Choose Date\n            </button>\n    </div>\n  );\n}\n"],"names":[],"mappings":"wDAGA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAQe,SAAS,IACtB,IAAM,EAAS,CAAA,EAAA,EAAA,SAAS,AAAT,IACT,EAAS,GAAQ,OAEf,EADe,AACH,CADG,EAAA,EAAA,eAAA,AAAe,IACL,GAAG,CAAC,aAC/B,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAU,EAAE,EACtD,CAAC,EAAe,EAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAC5D,EAAS,OAAA,iBACT,EAAS,CAAA,CADmC,CACnC,EAAA,SAAA,AAAS,UAExB,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KAiBR,CAhBmB,UACjB,GAAI,CACF,IAAM,EAAM,MAAM,MAAM,CAAA,EAAG,EAAO,OAAO,EAAE,EAAO,MAAM,CAAC,EACzD,GAAI,EAAI,EAAE,CAAE,CACV,IAAM,EAAO,MAAM,EAAI,IAAI,GAC3B,EAAgB,MAAM,OAAO,CAAC,GAAQ,EAAO,EAAE,CACjD,MACE,CADK,OACG,KAAK,CAAC,yBAA0B,EAAI,MAAM,CAAE,EAAI,UAAU,EAClE,EAAgB,EAAE,CAEtB,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,yBAA0B,GACxC,EAAgB,EAAE,CACpB,EACF,GAGF,EAAG,CAAC,EAAQ,EAAO,EAajB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kCACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,mCAA0B,iBACxC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,WAAE,YAAU,KAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,uCAA8B,0BAC5C,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAAO,MAAO,GAAiB,GAAI,SAjBb,AAAD,CAiBwB,GAhB9C,EAAiB,EAAE,MAAM,CAAC,KAAK,CACnC,EAeqE,UAAU,+BACzE,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,YAAG,0BAChB,EAAa,GAAG,CAAC,AAAC,GACjB,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAAsB,MAAO,EAAM,EAAE,WACnC,EAAM,UAAU,CAAC,IAAE,EAAM,SAAS,GADxB,EAAM,EAAE,SAOxB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACM,QAxBS,CAwBA,IAvBb,GAAiB,GACjB,EAAO,IAAI,CAAC,CAAC,AADe,MACT,EAAE,EAAO,gBAAgB,EAAE,EAAU,SAAS,EAAE,EAAA,CAAe,CAE1F,EAqBY,SAAU,CAAC,EACX,UAAU,yGACb,kBAKb"}