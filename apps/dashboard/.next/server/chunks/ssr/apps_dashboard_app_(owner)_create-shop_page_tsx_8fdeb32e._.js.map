{"version":3,"sources":["../../../../../../apps/dashboard/app/%28owner%29/create-shop/page.tsx"],"sourcesContent":["// apps/dashboard/app/(owner)/create-shop/page.tsx\r\n// Create Shop page for new owners\r\n\r\n\"use client\";\r\nimport React, { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useAuth } from '@/lib/useAuth';\r\n\r\ninterface Category {\r\n  id: string;\r\n  name: string;\r\n  description?: string | null;\r\n}\r\n\r\nexport default function CreateShopPage() {\r\n  const { user } = useAuth();\r\n  const router = useRouter();\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [categories, setCategories] = useState<Category[]>([]);\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    address: '',\r\n    phone: '',\r\n    email: '',\r\n    category_id: '',\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    // Fetch categories\r\n    const apiUrl = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3000';\r\n    fetch(`${apiUrl}/categories`)\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        if (Array.isArray(data)) {\r\n          setCategories(data);\r\n        }\r\n      })\r\n      .catch(err => console.error('Error fetching categories:', err));\r\n  }, []);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!user) {\r\n      setError('You must be logged in to create a shop');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const apiUrl = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3000';\r\n      const res = await fetch(`${apiUrl}/shops`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'x-user-id': user.id,\r\n        },\r\n        body: JSON.stringify(formData),\r\n      });\r\n\r\n      if (res.ok) {\r\n        const shop = await res.json();\r\n        router.push(`/shops`);\r\n      } else {\r\n        const errorData = await res.json();\r\n        setError(errorData.error || 'Failed to create shop');\r\n      }\r\n    } catch (err) {\r\n      console.error('Error creating shop:', err);\r\n      setError('Failed to create shop. Please try again.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-2xl mx-auto px-4 py-8\">\r\n      <h1 className=\"text-3xl font-bold text-gray-900 mb-6\">Create Your Shop</h1>\r\n\r\n      {error && (\r\n        <div className=\"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700\">\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      <form onSubmit={handleSubmit} className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6 space-y-6\">\r\n        <div>\r\n          <label htmlFor=\"name\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n            Shop Name <span className=\"text-red-500\">*</span>\r\n          </label>\r\n          <input\r\n            id=\"name\"\r\n            type=\"text\"\r\n            value={formData.name}\r\n            onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}\r\n            required\r\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\r\n            placeholder=\"Your shop name\"\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label htmlFor=\"address\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n            Address <span className=\"text-red-500\">*</span>\r\n          </label>\r\n          <textarea\r\n            id=\"address\"\r\n            value={formData.address}\r\n            onChange={(e) => setFormData(prev => ({ ...prev, address: e.target.value }))}\r\n            required\r\n            rows={3}\r\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\r\n            placeholder=\"Full address\"\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label htmlFor=\"category_id\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n            Category\r\n          </label>\r\n          <select\r\n            id=\"category_id\"\r\n            value={formData.category_id}\r\n            onChange={(e) => setFormData(prev => ({ ...prev, category_id: e.target.value }))}\r\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\r\n          >\r\n            <option value=\"\">Select a category</option>\r\n            {categories.map((cat) => (\r\n              <option key={cat.id} value={cat.id}>\r\n                {cat.name}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        <div>\r\n          <label htmlFor=\"phone\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n            Phone\r\n          </label>\r\n          <input\r\n            id=\"phone\"\r\n            type=\"tel\"\r\n            value={formData.phone}\r\n            onChange={(e) => setFormData(prev => ({ ...prev, phone: e.target.value }))}\r\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\r\n            placeholder=\"Phone number\"\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n            Email\r\n          </label>\r\n          <input\r\n            id=\"email\"\r\n            type=\"email\"\r\n            value={formData.email}\r\n            onChange={(e) => setFormData(prev => ({ ...prev, email: e.target.value }))}\r\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\r\n            placeholder=\"shop@example.com\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"flex gap-4\">\r\n          <button\r\n            type=\"submit\"\r\n            disabled={loading}\r\n            className=\"flex-1 bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n          >\r\n            {loading ? 'Creating...' : 'Create Shop'}\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => router.back()}\r\n            className=\"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors\"\r\n          >\r\n            Cancel\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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"}