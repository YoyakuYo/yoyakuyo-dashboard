{"version":3,"sources":["../../../../../../apps/dashboard/app/shops/page.tsx"],"sourcesContent":["// apps/dashboard/app/my-shop/page.tsx\r\n// \"My Shop\" page for owners to manage their shop\r\n\r\n\"use client\";\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '@/lib/useAuth';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useTranslations } from 'next-intl';\r\nimport ReviewCard from '../components/ReviewCard';\r\nimport ReviewStats from '../components/ReviewStats';\r\n\r\n// LINE QR Code Component\r\nfunction LineQrSection({ shopId, shop, user }: { shopId: string; shop: Shop | null; user: any }) {\r\n  const [connecting, setConnecting] = useState(false);\r\n  const apiUrl = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3000';\r\n\r\n  const deeplinkUrl = shop?.line_destination_id \r\n    ? `https://line.me/R/ti/p/${shop.line_destination_id}`\r\n    : null;\r\n\r\n  const handleConnectLine = async () => {\r\n    if (!user?.id || !shopId) return;\r\n\r\n    try {\r\n      setConnecting(true);\r\n      const res = await fetch(`${apiUrl}/line/shop-auth-url?shopId=${shopId}`, {\r\n        headers: {\r\n          'x-user-id': user.id,\r\n        },\r\n      });\r\n\r\n      if (res.ok) {\r\n        const data = await res.json();\r\n        if (data.authUrl) {\r\n          // Redirect to LINE OAuth\r\n          window.location.href = data.authUrl;\r\n        } else {\r\n          alert('Failed to get LINE OAuth URL');\r\n        }\r\n      } else {\r\n        const error = await res.json();\r\n        alert(error.error || 'Failed to connect LINE account');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error connecting LINE:', error);\r\n      alert('Failed to connect LINE account');\r\n    } finally {\r\n      setConnecting(false);\r\n    }\r\n  };\r\n\r\n  const handleCopyLink = () => {\r\n    if (deeplinkUrl) {\r\n      navigator.clipboard.writeText(deeplinkUrl);\r\n      alert('LINE link copied to clipboard!');\r\n    }\r\n  };\r\n\r\n  const handleDownloadQr = () => {\r\n    if (shop?.line_qr_code_url) {\r\n      const link = document.createElement('a');\r\n      link.href = shop.line_qr_code_url;\r\n      link.download = `line-qr-${shopId}.png`;\r\n      link.click();\r\n    }\r\n  };\r\n\r\n  // Check for success/error messages in URL\r\n  useEffect(() => {\r\n    const params = new URLSearchParams(window.location.search);\r\n    if (params.get('line_connected') === 'success') {\r\n      alert('LINE account connected successfully!');\r\n      // Remove query param\r\n      window.history.replaceState({}, '', window.location.pathname);\r\n      // Reload shop data\r\n      window.location.reload();\r\n    } else if (params.get('line_error')) {\r\n      alert(`LINE connection error: ${params.get('line_error')}`);\r\n      window.history.replaceState({}, '', window.location.pathname);\r\n    }\r\n  }, []);\r\n\r\n  if (!shop?.line_qr_code_url || !shop?.line_destination_id) {\r\n    return (\r\n      <div className=\"text-center space-y-4 py-4\">\r\n        <p className=\"text-gray-500\">Connect LINE to generate QR code</p>\r\n        <button\r\n          onClick={handleConnectLine}\r\n          disabled={connecting}\r\n          className=\"px-6 py-3 bg-green-500 text-white font-semibold rounded-lg hover:bg-green-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n        >\r\n          {connecting ? 'Connecting...' : 'Connect LINE Account'}\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center space-y-4\">\r\n      <img \r\n        src={shop.line_qr_code_url} \r\n        alt=\"LINE QR Code\" \r\n        className=\"w-48 h-48 border-2 border-gray-300 rounded-lg\" \r\n      />\r\n      <p className=\"text-sm text-gray-600 text-center\">LINEで予約はこちら</p>\r\n      <div className=\"flex gap-2\">\r\n        <button\r\n          onClick={handleCopyLink}\r\n          className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n        >\r\n          Copy LINE Link\r\n        </button>\r\n        <button\r\n          onClick={handleDownloadQr}\r\n          className=\"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors\"\r\n        >\r\n          Download QR Code\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface Shop {\r\n  id: string;\r\n  name: string;\r\n  address: string;\r\n  phone: string;\r\n  email: string;\r\n  website?: string | null;\r\n  google_place_id?: string | null;\r\n  city?: string | null;\r\n  country?: string | null;\r\n  zip_code?: string | null;\r\n  description?: string | null;\r\n  language_code?: string | null;\r\n  line_qr_code_url?: string | null;\r\n  line_destination_id?: string | null;\r\n  logo_url?: string | null;\r\n  cover_photo_url?: string | null;\r\n  latitude?: number | null;\r\n  longitude?: number | null;\r\n  opening_hours?: any | null;\r\n  business_status?: string | null;\r\n  category_id?: string | null;\r\n  category?: string | null; // Computed from categories join\r\n  subcategory?: string | null; // Computed field, not a column\r\n  owner_user_id?: string | null;\r\n  claim_status?: 'unclaimed' | 'pending' | 'approved' | 'rejected' | null;\r\n  claimed_at?: string | null;\r\n  created_at?: string | null;\r\n  updated_at?: string | null;\r\n}\r\n\r\ninterface Service {\r\n  id: string;\r\n  shop_id?: string;\r\n  name: string;\r\n  description?: string | null;\r\n  price: number;\r\n  duration_minutes?: number | null;\r\n  duration?: number | null;\r\n  is_active?: boolean;\r\n}\r\n\r\ninterface Staff {\r\n  id: string;\r\n  shop_id?: string;\r\n  first_name: string;\r\n  last_name: string;\r\n  phone?: string | null;\r\n  email?: string | null;\r\n  role?: string | null;\r\n  is_active?: boolean;\r\n}\r\n\r\ninterface Booking {\r\n  id: string;\r\n  shop_id?: string;\r\n  customer_name?: string | null;\r\n  customer_email?: string | null;\r\n  customer_phone?: string | null;\r\n  start_time: string;\r\n  end_time: string;\r\n  status?: string | null;\r\n  services?: { name: string } | null;\r\n}\r\n\r\nconst MyShopPage = () => {\r\n  const { user, loading } = useAuth();\r\n  const authLoading = Boolean(loading); // Ensure it's always a boolean for stable dependency array\r\n  const router = useRouter();\r\n  const apiUrl = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3000';\r\n  const t = useTranslations();\r\n\r\n  const [shop, setShop] = useState<Shop | null>(null);\r\n  const [pageLoading, setPageLoading] = useState(true);\r\n  const [activeTab, setActiveTab] = useState<'overview' | 'services' | 'staff' | 'bookings' | 'photos' | 'reviews'>('overview');\r\n  \r\n  // Form states\r\n  const [editingShop, setEditingShop] = useState(false);\r\n  const [shopForm, setShopForm] = useState<Partial<Shop>>({\r\n    name: '',\r\n    address: '',\r\n    phone: '',\r\n    email: '',\r\n    website: '',\r\n    google_place_id: '',\r\n    city: '',\r\n    country: '',\r\n    zip_code: '',\r\n    description: '',\r\n    language_code: '',\r\n  });\r\n  const [showCreateShop, setShowCreateShop] = useState(false);\r\n  const [showClaimShop, setShowClaimShop] = useState(false);\r\n  const [unclaimedShops, setUnclaimedShops] = useState<Shop[]>([]);\r\n  const [claimLoading, setClaimLoading] = useState(false);\r\n\r\n  // Data states\r\n  const [services, setServices] = useState<Service[]>([]);\r\n  const [staff, setStaff] = useState<Staff[]>([]);\r\n  const [bookings, setBookings] = useState<Booking[]>([]);\r\n  const [photos, setPhotos] = useState<Array<{ id: string; shop_id: string; type: string; url: string; created_at: string }>>([]);\r\n  \r\n  // Reviews state\r\n  const [reviews, setReviews] = useState<any[]>([]);\r\n  const [reviewStats, setReviewStats] = useState<any>(null);\r\n  const [loadingReviews, setLoadingReviews] = useState(false);\r\n  const [ownerResponse, setOwnerResponse] = useState<Record<string, string>>({});\r\n  \r\n  // Service form state\r\n  const [editingService, setEditingService] = useState<Service | null>(null);\r\n  const [serviceForm, setServiceForm] = useState({\r\n    name: '',\r\n    description: '',\r\n    price: 0,\r\n    duration_minutes: 0,\r\n  });\r\n  const [serviceError, setServiceError] = useState<string | null>(null);\r\n  \r\n  // Staff form state\r\n  const [editingStaff, setEditingStaff] = useState<Staff | null>(null);\r\n  const [staffForm, setStaffForm] = useState({\r\n    first_name: '',\r\n    last_name: '',\r\n    phone: '',\r\n    email: '',\r\n  });\r\n  const [staffError, setStaffError] = useState<string | null>(null);\r\n\r\n  // Booking status update state\r\n  const [statusUpdateModal, setStatusUpdateModal] = useState<{\r\n    isOpen: boolean;\r\n    bookingId: string | null;\r\n    newStatus: 'confirmed' | 'rejected' | null;\r\n    bookingCustomerName: string | null;\r\n  }>({\r\n    isOpen: false,\r\n    bookingId: null,\r\n    newStatus: null,\r\n    bookingCustomerName: null,\r\n  });\r\n  const [statusUpdateLoading, setStatusUpdateLoading] = useState(false);\r\n  const [statusUpdateMessage, setStatusUpdateMessage] = useState<{ type: 'success' | 'error'; text: string } | null>(null);\r\n  \r\n  // Cancel booking modal state\r\n  const [cancelModal, setCancelModal] = useState<{\r\n    isOpen: boolean;\r\n    bookingId: string | null;\r\n    bookingCustomerName: string | null;\r\n  }>({\r\n    isOpen: false,\r\n    bookingId: null,\r\n    bookingCustomerName: null,\r\n  });\r\n  const [cancelLoading, setCancelLoading] = useState(false);\r\n  const [cancelMessage, setCancelMessage] = useState<{ type: 'success' | 'error'; text: string } | null>(null);\r\n  \r\n  // Reschedule booking modal state\r\n  const [rescheduleModal, setRescheduleModal] = useState<{\r\n    isOpen: boolean;\r\n    bookingId: string | null;\r\n    bookingCustomerName: string | null;\r\n    currentDateTime: string | null;\r\n  }>({\r\n    isOpen: false,\r\n    bookingId: null,\r\n    bookingCustomerName: null,\r\n    currentDateTime: null,\r\n  });\r\n  const [rescheduleLoading, setRescheduleLoading] = useState(false);\r\n  const [rescheduleMessage, setRescheduleMessage] = useState<{ type: 'success' | 'error'; text: string } | null>(null);\r\n  const [newDateTime, setNewDateTime] = useState('');\r\n  \r\n  // Photo upload toast notification\r\n  const [photoToast, setPhotoToast] = useState<{ type: 'success' | 'error'; message: string } | null>(null);\r\n\r\n  // Fetch unclaimed shops when claim modal opens\r\n  useEffect(() => {\r\n    if (showClaimShop && user && !authLoading) {\r\n      const fetchUnclaimedShops = async () => {\r\n        try {\r\n          setClaimLoading(true);\r\n          const res = await fetch(`${apiUrl}/shops?unclaimed=true`, {\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n            },\r\n          });\r\n          \r\n          if (res.ok) {\r\n            const contentType = res.headers.get('content-type');\r\n            if (contentType && contentType.includes('application/json')) {\r\n              const data = await res.json();\r\n              setUnclaimedShops(Array.isArray(data) ? data : []);\r\n            } else {\r\n              console.error('Expected JSON but received:', contentType);\r\n              setUnclaimedShops([]);\r\n            }\r\n          } else {\r\n            console.error('Failed to fetch unclaimed shops:', res.status, res.statusText);\r\n            setUnclaimedShops([]);\r\n          }\r\n        } catch (error: any) {\r\n          // Silently handle connection errors (API server not running)\r\n          if (!error?.message?.includes('Failed to fetch') && !error?.message?.includes('ERR_CONNECTION_REFUSED')) {\r\n            console.error('Error fetching unclaimed shops:', error);\r\n          }\r\n          setUnclaimedShops([]);\r\n        } finally {\r\n          setClaimLoading(false);\r\n        }\r\n      };\r\n      fetchUnclaimedShops();\r\n    }\r\n  }, [showClaimShop, user, authLoading, apiUrl]);\r\n\r\n  // Fetch user's shop\r\n  useEffect(() => {\r\n    // Wait for auth to finish loading and ensure user exists with valid ID\r\n    if (authLoading || !user || !user.id) {\r\n      if (authLoading) {\r\n        setPageLoading(true);\r\n      } else if (!user) {\r\n        setPageLoading(false);\r\n      }\r\n      return;\r\n    }\r\n\r\n    const fetchMyShop = async () => {\r\n      try {\r\n        setPageLoading(true);\r\n        // Validate user.id is a valid UUID before making request\r\n        if (!user.id || typeof user.id !== 'string' || user.id === 'undefined' || user.id === 'null') {\r\n          console.error('Invalid user ID:', user.id);\r\n          setShop(null);\r\n          setShopForm({});\r\n          setPageLoading(false);\r\n          return;\r\n        }\r\n\r\n        // Fetch shops owned by user - backend now filters by owner_user_id\r\n        const url = `${apiUrl}/shops?owner_user_id=${encodeURIComponent(user.id)}`;\r\n        console.log('Fetching shop from:', url);\r\n        console.log('User ID:', user.id);\r\n        \r\n        let res;\r\n        try {\r\n          res = await fetch(url, {\r\n            headers: {\r\n              'x-user-id': user.id,\r\n              'Content-Type': 'application/json',\r\n            },\r\n          });\r\n        } catch (fetchError: any) {\r\n          // Handle connection errors gracefully\r\n          if (fetchError?.message?.includes('Failed to fetch') || fetchError?.message?.includes('ERR_CONNECTION_REFUSED')) {\r\n            // API server is not running - silently handle\r\n            setShop(null);\r\n            setShopForm({});\r\n            setPageLoading(false);\r\n            return;\r\n          }\r\n          throw fetchError;\r\n        }\r\n        \r\n        if (res.status === 404) {\r\n          // User owns no shop\r\n          console.log('No shop found for user');\r\n          setShop(null);\r\n          setShopForm({});\r\n          return;\r\n        }\r\n        \r\n        if (res.ok) {\r\n          const contentType = res.headers.get('content-type');\r\n          if (contentType && contentType.includes('application/json')) {\r\n            const data = await res.json();\r\n            if (Array.isArray(data) && data.length > 0) {\r\n              // Use the first shop if multiple exist\r\n              const userShop = data[0];\r\n              setShop(userShop);\r\n              setShopForm({\r\n                name: userShop.name || '',\r\n                address: userShop.address || '',\r\n                phone: userShop.phone || '',\r\n                email: userShop.email || '',\r\n                website: userShop.website || '',\r\n                google_place_id: userShop.google_place_id || '',\r\n                city: userShop.city || '',\r\n                country: userShop.country || '',\r\n                zip_code: userShop.zip_code || '',\r\n                description: userShop.description || '',\r\n                language_code: userShop.language_code || '',\r\n                category: userShop.category || null,\r\n                subcategory: userShop.subcategory || null,\r\n                logo_url: userShop.logo_url || null,\r\n                cover_photo_url: userShop.cover_photo_url || null,\r\n              });\r\n              // Fetch related data\r\n              fetchServices(userShop.id);\r\n              fetchStaff(userShop.id);\r\n              fetchBookings(userShop.id);\r\n              fetchPhotos(userShop.id);\r\n            } else {\r\n              setShop(null);\r\n              setShopForm({});\r\n            }\r\n          } else {\r\n            console.error('Expected JSON but received:', contentType);\r\n            setShop(null);\r\n            setShopForm({});\r\n          }\r\n        } else {\r\n          const errorText = await res.text().catch(() => 'Unknown error');\r\n          console.error('Error fetching shop:', res.status, res.statusText, errorText);\r\n          setShop(null);\r\n          setShopForm({});\r\n        }\r\n      } catch (error: any) {\r\n        // Silently handle connection errors (API server not running)\r\n        if (!error?.message?.includes('Failed to fetch') && !error?.message?.includes('ERR_CONNECTION_REFUSED')) {\r\n          console.error('Error fetching shop:', error);\r\n        }\r\n        setShop(null);\r\n        setShopForm({});\r\n      } finally {\r\n        setPageLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchMyShop();\r\n  }, [user, authLoading, apiUrl]);\r\n\r\n  const fetchServices = async (shopId: string) => {\r\n    if (!shopId || !user) return;\r\n    try {\r\n      const res = await fetch(`${apiUrl}/shops/${shopId}/services`, {\r\n        headers: {\r\n          'x-user-id': user.id,\r\n        },\r\n      });\r\n      if (res.ok) {\r\n        const data = await res.json();\r\n        setServices(Array.isArray(data) ? data : []);\r\n      }\r\n    } catch (error: any) {\r\n      // Silently handle connection errors (API server not running)\r\n      if (!error?.message?.includes('Failed to fetch') && !error?.message?.includes('ERR_CONNECTION_REFUSED')) {\r\n        console.error('Error fetching services:', error);\r\n      }\r\n      setServices([]);\r\n    }\r\n  };\r\n\r\n  const fetchStaff = async (shopId: string) => {\r\n    if (!shopId || !user) return;\r\n    try {\r\n      const res = await fetch(`${apiUrl}/shops/${shopId}/staff`, {\r\n        headers: {\r\n          'x-user-id': user.id,\r\n        },\r\n      });\r\n      if (res.ok) {\r\n        const data = await res.json();\r\n        setStaff(Array.isArray(data) ? data : []);\r\n      }\r\n    } catch (error: any) {\r\n      // Silently handle connection errors (API server not running)\r\n      if (!error?.message?.includes('Failed to fetch') && !error?.message?.includes('ERR_CONNECTION_REFUSED')) {\r\n        console.error('Error fetching staff:', error);\r\n      }\r\n      setStaff([]);\r\n    }\r\n  };\r\n\r\n  const fetchBookings = async (shopId: string) => {\r\n    if (!shopId || !user) return;\r\n    try {\r\n      const res = await fetch(`${apiUrl}/bookings`, {\r\n        headers: {\r\n          'x-user-id': user.id,\r\n        },\r\n      });\r\n      if (res.ok) {\r\n        const data = await res.json();\r\n        // Filter to only this shop's bookings\r\n        const shopBookings = Array.isArray(data) \r\n          ? data.filter((b: any) => b.shop_id === shopId)\r\n          : [];\r\n        setBookings(shopBookings);\r\n      }\r\n    } catch (error: any) {\r\n      // Silently handle connection errors (API server not running)\r\n      if (!error?.message?.includes('Failed to fetch') && !error?.message?.includes('ERR_CONNECTION_REFUSED')) {\r\n        console.error('Error fetching bookings:', error);\r\n      }\r\n      setBookings([]);\r\n    }\r\n  };\r\n\r\n  const fetchPhotos = async (shopId: string) => {\r\n    if (!shopId || !user) return;\r\n    try {\r\n      const res = await fetch(`${apiUrl}/shops/${shopId}/photos`, {\r\n        headers: {\r\n          'x-user-id': user.id,\r\n        },\r\n      });\r\n      if (res.ok) {\r\n        const data = await res.json();\r\n        setPhotos(Array.isArray(data) ? data : []);\r\n      }\r\n    } catch (error: any) {\r\n      // Silently handle connection errors (API server not running)\r\n      if (!error?.message?.includes('Failed to fetch') && !error?.message?.includes('ERR_CONNECTION_REFUSED')) {\r\n        console.error('Error fetching photos:', error);\r\n      }\r\n      setPhotos([]);\r\n    }\r\n  };\r\n\r\n  const fetchReviews = async (shopId: string) => {\r\n    if (!shopId || !user) return;\r\n    try {\r\n      setLoadingReviews(true);\r\n      const reviewsRes = await fetch(`${apiUrl}/reviews?shop_id=${shopId}`, {\r\n        headers: { 'x-user-id': user.id },\r\n      });\r\n      if (reviewsRes.ok) {\r\n        const reviewsData = await reviewsRes.json();\r\n        setReviews(Array.isArray(reviewsData) ? reviewsData : []);\r\n      }\r\n      const statsRes = await fetch(`${apiUrl}/reviews/shop/${shopId}/stats`, {\r\n        headers: { 'x-user-id': user.id },\r\n      });\r\n      if (statsRes.ok) {\r\n        const statsData = await statsRes.json();\r\n        setReviewStats(statsData);\r\n      }\r\n    } catch (error: any) {\r\n      if (!error?.message?.includes('Failed to fetch') && !error?.message?.includes('ERR_CONNECTION_REFUSED')) {\r\n        console.error('Error fetching reviews:', error);\r\n      }\r\n      setReviews([]);\r\n    } finally {\r\n      setLoadingReviews(false);\r\n    }\r\n  };\r\n\r\n  const handleOwnerResponse = async (reviewId: string, response: string) => {\r\n    if (!user || !shop) return;\r\n    try {\r\n      const res = await fetch(`${apiUrl}/reviews/${reviewId}`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'x-user-id': user.id,\r\n        },\r\n        body: JSON.stringify({ owner_response: response }),\r\n      });\r\n      if (res.ok) {\r\n        await fetchReviews(shop.id);\r\n        setOwnerResponse((prev) => ({ ...prev, [reviewId]: '' }));\r\n      } else {\r\n        alert('Failed to submit response');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error submitting owner response:', error);\r\n      alert('Failed to submit response');\r\n    }\r\n  };\r\n  \r\n  // Service handlers\r\n  const handleCreateService = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!shop || !user) return;\r\n    \r\n    setServiceError(null);\r\n    try {\r\n      const res = await fetch(`${apiUrl}/services`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'x-user-id': user.id,\r\n        },\r\n        body: JSON.stringify({\r\n          shop_id: shop.id,\r\n          name: serviceForm.name,\r\n          description: serviceForm.description,\r\n          price: serviceForm.price,\r\n          duration: serviceForm.duration_minutes,\r\n        }),\r\n      });\r\n      \r\n      if (res.ok) {\r\n        await fetchServices(shop.id);\r\n        setServiceForm({ name: '', description: '', price: 0, duration_minutes: 0 });\r\n      } else {\r\n        const errorData = await res.json().catch(() => ({ error: 'Failed to create service' }));\r\n        setServiceError(errorData.error || 'Failed to create service');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error creating service:', error);\r\n      setServiceError('Failed to create service');\r\n    }\r\n  };\r\n  \r\n  const handleUpdateService = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!shop || !user || !editingService) return;\r\n    \r\n    setServiceError(null);\r\n    try {\r\n      const res = await fetch(`${apiUrl}/services/${editingService.id}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'x-user-id': user.id,\r\n        },\r\n        body: JSON.stringify({\r\n          name: serviceForm.name,\r\n          description: serviceForm.description,\r\n          price: serviceForm.price,\r\n          duration_minutes: serviceForm.duration_minutes,\r\n        }),\r\n      });\r\n      \r\n      if (res.ok) {\r\n        await fetchServices(shop.id);\r\n        setEditingService(null);\r\n        setServiceForm({ name: '', description: '', price: 0, duration_minutes: 0 });\r\n      } else {\r\n        const errorData = await res.json().catch(() => ({ error: 'Failed to update service' }));\r\n        setServiceError(errorData.error || 'Failed to update service');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating service:', error);\r\n      setServiceError('Failed to update service');\r\n    }\r\n  };\r\n  \r\n  const handleDeleteService = async (serviceId: string) => {\r\n    if (!shop || !user || !confirm('Are you sure you want to delete this service?')) return;\r\n    \r\n    try {\r\n      const res = await fetch(`${apiUrl}/services/${serviceId}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'x-user-id': user.id,\r\n        },\r\n      });\r\n      \r\n      if (res.ok) {\r\n        await fetchServices(shop.id);\r\n      } else {\r\n        alert('Failed to delete service');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting service:', error);\r\n      alert('Failed to delete service');\r\n    }\r\n  };\r\n  \r\n  const startEditService = (service: Service) => {\r\n    setEditingService(service);\r\n    setServiceForm({\r\n      name: service.name,\r\n      description: service.description || '',\r\n      price: service.price,\r\n      duration_minutes: service.duration_minutes || 0,\r\n    });\r\n  };\r\n  \r\n  // Staff handlers\r\n  const handleCreateStaff = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!shop || !user) return;\r\n    \r\n    setStaffError(null);\r\n    try {\r\n      const res = await fetch(`${apiUrl}/staff`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'x-user-id': user.id,\r\n        },\r\n        body: JSON.stringify({\r\n          shop_id: shop.id,\r\n          first_name: staffForm.first_name,\r\n          last_name: staffForm.last_name,\r\n          phone: staffForm.phone,\r\n          email: staffForm.email,\r\n        }),\r\n      });\r\n      \r\n      if (res.ok) {\r\n        await fetchStaff(shop.id);\r\n        setStaffForm({ first_name: '', last_name: '', phone: '', email: '' });\r\n      } else {\r\n        const errorData = await res.json().catch(() => ({ error: 'Failed to create staff' }));\r\n        setStaffError(errorData.error || 'Failed to create staff');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error creating staff:', error);\r\n      setStaffError('Failed to create staff');\r\n    }\r\n  };\r\n  \r\n  const handleUpdateStaff = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!shop || !user || !editingStaff) return;\r\n    \r\n    setStaffError(null);\r\n    try {\r\n      const res = await fetch(`${apiUrl}/staff/${editingStaff.id}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'x-user-id': user.id,\r\n        },\r\n        body: JSON.stringify({\r\n          first_name: staffForm.first_name,\r\n          last_name: staffForm.last_name,\r\n          phone: staffForm.phone,\r\n          email: staffForm.email,\r\n        }),\r\n      });\r\n      \r\n      if (res.ok) {\r\n        await fetchStaff(shop.id);\r\n        setEditingStaff(null);\r\n        setStaffForm({ first_name: '', last_name: '', phone: '', email: '' });\r\n      } else {\r\n        const errorData = await res.json().catch(() => ({ error: 'Failed to update staff' }));\r\n        setStaffError(errorData.error || 'Failed to update staff');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating staff:', error);\r\n      setStaffError('Failed to update staff');\r\n    }\r\n  };\r\n  \r\n  const handleDeleteStaff = async (staffId: string) => {\r\n    if (!shop || !user || !confirm('Are you sure you want to delete this staff member?')) return;\r\n    \r\n    try {\r\n      const res = await fetch(`${apiUrl}/staff/${staffId}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'x-user-id': user.id,\r\n        },\r\n      });\r\n      \r\n      if (res.ok) {\r\n        await fetchStaff(shop.id);\r\n      } else {\r\n        alert('Failed to delete staff');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting staff:', error);\r\n      alert('Failed to delete staff');\r\n    }\r\n  };\r\n  \r\n  const startEditStaff = (staffMember: Staff) => {\r\n    setEditingStaff(staffMember);\r\n    setStaffForm({\r\n      first_name: staffMember.first_name,\r\n      last_name: staffMember.last_name || '',\r\n      phone: staffMember.phone || '',\r\n      email: staffMember.email || '',\r\n    });\r\n  };\r\n\r\n  // Booking status handlers\r\n  const openStatusUpdateModal = (bookingId: string, newStatus: 'confirmed' | 'rejected', customerName: string | null) => {\r\n    setStatusUpdateModal({\r\n      isOpen: true,\r\n      bookingId,\r\n      newStatus,\r\n      bookingCustomerName: customerName,\r\n    });\r\n    setStatusUpdateMessage(null);\r\n  };\r\n\r\n  const closeStatusUpdateModal = () => {\r\n    setStatusUpdateModal({\r\n      isOpen: false,\r\n      bookingId: null,\r\n      newStatus: null,\r\n      bookingCustomerName: null,\r\n    });\r\n    setStatusUpdateMessage(null);\r\n  };\r\n\r\n  const handleUpdateBookingStatus = async () => {\r\n    if (!shop || !user || !statusUpdateModal.bookingId || !statusUpdateModal.newStatus) return;\r\n\r\n    setStatusUpdateLoading(true);\r\n    setStatusUpdateMessage(null);\r\n\r\n    try {\r\n      const res = await fetch(`${apiUrl}/bookings/${statusUpdateModal.bookingId}/status`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'x-user-id': user.id,\r\n        },\r\n        body: JSON.stringify({\r\n          status: statusUpdateModal.newStatus,\r\n        }),\r\n      });\r\n\r\n      if (res.ok) {\r\n        setStatusUpdateMessage({\r\n          type: 'success',\r\n          text: statusUpdateModal.newStatus === 'confirmed' ? t('myShop.bookingConfirmed') : t('myShop.bookingRejected'),\r\n        });\r\n        \r\n        // Refresh bookings list\r\n        await fetchBookings(shop.id);\r\n        \r\n        // Close modal after a short delay\r\n        setTimeout(() => {\r\n          closeStatusUpdateModal();\r\n        }, 1500);\r\n      } else {\r\n        const errorData = await res.json().catch(() => ({ error: t('myShop.failedToUpdateStatus') }));\r\n        setStatusUpdateMessage({\r\n          type: 'error',\r\n          text: errorData.error || t('myShop.failedToUpdateStatus'),\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating booking status:', error);\r\n      setStatusUpdateMessage({\r\n        type: 'error',\r\n        text: t('myShop.failedToUpdateStatus'),\r\n      });\r\n    } finally {\r\n      setStatusUpdateLoading(false);\r\n    }\r\n  };\r\n\r\n  // Cancel booking handlers\r\n  const openCancelModal = (bookingId: string, customerName: string | null) => {\r\n    setCancelModal({\r\n      isOpen: true,\r\n      bookingId,\r\n      bookingCustomerName: customerName,\r\n    });\r\n    setCancelMessage(null);\r\n  };\r\n\r\n  const closeCancelModal = () => {\r\n    setCancelModal({\r\n      isOpen: false,\r\n      bookingId: null,\r\n      bookingCustomerName: null,\r\n    });\r\n    setCancelMessage(null);\r\n  };\r\n\r\n  const handleCancelBooking = async () => {\r\n    if (!shop || !user || !cancelModal.bookingId) return;\r\n\r\n    setCancelLoading(true);\r\n    setCancelMessage(null);\r\n\r\n    try {\r\n      const res = await fetch(`${apiUrl}/bookings/${cancelModal.bookingId}/cancel`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'x-user-id': user.id,\r\n        },\r\n      });\r\n\r\n      if (res.ok) {\r\n        setCancelMessage({\r\n          type: 'success',\r\n          text: t('booking.cancelled'),\r\n        });\r\n        \r\n        // Refresh bookings list\r\n        await fetchBookings(shop.id);\r\n        \r\n        // Close modal after a short delay\r\n        setTimeout(() => {\r\n          closeCancelModal();\r\n        }, 1500);\r\n      } else {\r\n        const errorData = await res.json().catch(() => ({ error: t('booking.failedToCancel') }));\r\n        setCancelMessage({\r\n          type: 'error',\r\n          text: errorData.error || t('booking.failedToCancel'),\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error cancelling booking:', error);\r\n      setCancelMessage({\r\n        type: 'error',\r\n        text: t('booking.failedToCancel'),\r\n      });\r\n    } finally {\r\n      setCancelLoading(false);\r\n    }\r\n  };\r\n\r\n  // Reschedule booking handlers\r\n  const openRescheduleModal = (bookingId: string, customerName: string | null, currentStartTime: string) => {\r\n    const currentDate = new Date(currentStartTime);\r\n    const localDateTime = new Date(currentDate.getTime() - currentDate.getTimezoneOffset() * 60000)\r\n      .toISOString()\r\n      .slice(0, 16); // Format: YYYY-MM-DDTHH:mm\r\n    \r\n    setRescheduleModal({\r\n      isOpen: true,\r\n      bookingId,\r\n      bookingCustomerName: customerName,\r\n      currentDateTime: currentStartTime,\r\n    });\r\n    setNewDateTime(localDateTime);\r\n    setRescheduleMessage(null);\r\n  };\r\n\r\n  const closeRescheduleModal = () => {\r\n    setRescheduleModal({\r\n      isOpen: false,\r\n      bookingId: null,\r\n      bookingCustomerName: null,\r\n      currentDateTime: null,\r\n    });\r\n    setNewDateTime('');\r\n    setRescheduleMessage(null);\r\n  };\r\n\r\n  const handleRescheduleBooking = async () => {\r\n    if (!shop || !user || !rescheduleModal.bookingId || !newDateTime) return;\r\n\r\n    setRescheduleLoading(true);\r\n    setRescheduleMessage(null);\r\n\r\n    try {\r\n      // Convert local datetime to ISO string\r\n      const dateTimeISO = new Date(newDateTime).toISOString();\r\n\r\n      const res = await fetch(`${apiUrl}/bookings/${rescheduleModal.bookingId}/reschedule`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'x-user-id': user.id,\r\n        },\r\n        body: JSON.stringify({\r\n          date_time: dateTimeISO,\r\n        }),\r\n      });\r\n\r\n      if (res.ok) {\r\n        setRescheduleMessage({\r\n          type: 'success',\r\n          text: t('booking.rescheduled'),\r\n        });\r\n        \r\n        // Refresh bookings list\r\n        await fetchBookings(shop.id);\r\n        \r\n        // Close modal after a short delay\r\n        setTimeout(() => {\r\n          closeRescheduleModal();\r\n        }, 1500);\r\n      } else {\r\n        const errorData = await res.json().catch(() => ({ error: t('booking.failedToReschedule') }));\r\n        setRescheduleMessage({\r\n          type: 'error',\r\n          text: errorData.error || t('booking.failedToReschedule'),\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error rescheduling booking:', error);\r\n      setRescheduleMessage({\r\n        type: 'error',\r\n        text: t('booking.failedToReschedule'),\r\n      });\r\n    } finally {\r\n      setRescheduleLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleCreateShop = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!user) return;\r\n\r\n    try {\r\n      const res = await fetch(`${apiUrl}/shops`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'x-user-id': user.id,\r\n        },\r\n        body: JSON.stringify(shopForm),\r\n      });\r\n\r\n      if (res.ok) {\r\n        const newShop = await res.json();\r\n        setShop(newShop);\r\n        setShopForm(newShop);\r\n        setShowCreateShop(false);\r\n        router.refresh();\r\n      } else {\r\n        const error = await res.json();\r\n        alert(`Error: ${error.error || 'Failed to create shop'}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error creating shop:', error);\r\n      alert('Failed to create shop');\r\n    }\r\n  };\r\n\r\n  const handleUpdateShop = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!shop || !user) return;\r\n\r\n    try {\r\n      // Send all fields that exist in the database schema\r\n      const updateData: Record<string, any> = {};\r\n      if (shopForm.name !== undefined && shopForm.name !== null) updateData.name = shopForm.name;\r\n      if (shopForm.address !== undefined && shopForm.address !== null) updateData.address = shopForm.address;\r\n      if (shopForm.phone !== undefined && shopForm.phone !== null) updateData.phone = shopForm.phone;\r\n      if (shopForm.email !== undefined && shopForm.email !== null) updateData.email = shopForm.email;\r\n      if (shopForm.website !== undefined && shopForm.website !== null) updateData.website = shopForm.website;\r\n      if (shopForm.google_place_id !== undefined && shopForm.google_place_id !== null) updateData.google_place_id = shopForm.google_place_id;\r\n      if (shopForm.city !== undefined && shopForm.city !== null) updateData.city = shopForm.city;\r\n      if (shopForm.country !== undefined && shopForm.country !== null) updateData.country = shopForm.country;\r\n      if (shopForm.zip_code !== undefined && shopForm.zip_code !== null) updateData.zip_code = shopForm.zip_code;\r\n      if (shopForm.description !== undefined && shopForm.description !== null) updateData.description = shopForm.description;\r\n      if (shopForm.language_code !== undefined && shopForm.language_code !== null) updateData.language_code = shopForm.language_code;\r\n\r\n      const res = await fetch(`${apiUrl}/shops/${shop.id}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'x-user-id': user.id,\r\n        },\r\n        body: JSON.stringify(updateData),\r\n      });\r\n\r\n      if (res.ok) {\r\n        const updatedShop = await res.json();\r\n        setShop(updatedShop);\r\n        setShopForm(updatedShop);\r\n        setEditingShop(false);\r\n      } else {\r\n        const error = await res.json();\r\n        alert(`Error: ${error.error || 'Failed to update shop'}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating shop:', error);\r\n      alert('Failed to update shop');\r\n    }\r\n  };\r\n\r\n  const handlePhotoUpload = async (e: React.ChangeEvent<HTMLInputElement>, type: 'logo' | 'cover' | 'gallery') => {\r\n    if (!shop || !user || !e.target.files || e.target.files.length === 0) return;\r\n\r\n    const file = e.target.files[0];\r\n    if (file.size > 10 * 1024 * 1024) {\r\n      alert('File size must be less than 10MB');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Create FormData\r\n      const formData = new FormData();\r\n      formData.append('file', file);\r\n      formData.append('shopId', shop.id);\r\n      formData.append('type', type);\r\n\r\n      // Ensure API URL is set correctly\r\n      const uploadUrl = `${apiUrl || 'http://localhost:3000'}/photos/upload`;\r\n      \r\n      // Upload to API using multipart/form-data\r\n      const res = await fetch(uploadUrl, {\r\n        method: 'POST',\r\n        headers: {\r\n          'x-user-id': user.id,\r\n          // Don't set Content-Type - browser will set it with boundary\r\n        },\r\n        body: formData,\r\n      });\r\n\r\n      // Validate response is JSON before parsing\r\n      const contentType = res.headers.get('content-type');\r\n      if (!contentType || !contentType.includes('application/json')) {\r\n        const errorText = await res.text();\r\n        console.error('Non-JSON response:', errorText);\r\n        throw new Error(`Server returned non-JSON response: ${res.status} ${res.statusText}`);\r\n      }\r\n\r\n      if (res.ok) {\r\n        const data = await res.json();\r\n        const photoUrl = data.url;\r\n        const photoRecord = data.photo;\r\n        \r\n        if (!photoUrl) {\r\n          throw new Error('No URL returned from upload');\r\n        }\r\n        \r\n        // Show success toast\r\n        setPhotoToast({ type: 'success', message: t('myShop.photoUploaded') });\r\n        setTimeout(() => setPhotoToast(null), 3000);\r\n        \r\n        // Immediately add the new photo to the photos state (optimistic update)\r\n        if (photoRecord) {\r\n          setPhotos(prev => {\r\n            // Remove any existing photo of the same type (for logo/cover) or add to gallery\r\n            if (type === 'logo' || type === 'cover') {\r\n              return prev.filter(p => !(p.type === type && p.shop_id === shop.id)).concat([photoRecord]);\r\n            } else {\r\n              // For gallery, just add the new photo immediately\r\n              return [...prev, photoRecord];\r\n            }\r\n          });\r\n        } else {\r\n          // Fallback: refresh photos list if no record returned\r\n          await fetchPhotos(shop.id);\r\n        }\r\n        \r\n        // Update shop with new URL (for logo/cover backward compatibility)\r\n        if (type === 'logo' || type === 'cover') {\r\n          const updateField = type === 'logo' ? 'logo_url' : 'cover_photo_url';\r\n          const updateRes = await fetch(`${apiUrl}/shops/${shop.id}`, {\r\n            method: 'PATCH',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'x-user-id': user.id,\r\n            },\r\n            body: JSON.stringify({\r\n              [updateField]: photoUrl,\r\n            }),\r\n          });\r\n\r\n          if (updateRes.ok) {\r\n            const updatedShop = await updateRes.json();\r\n            setShop(updatedShop);\r\n          }\r\n          // Only refresh for logo/cover to update shop data\r\n          router.refresh();\r\n        }\r\n        // Gallery photos don't need router.refresh() since we update state directly\r\n      } else {\r\n        const errorText = await res.text();\r\n        let errorMessage = t('myShop.failedToUpload');\r\n        try {\r\n          const errorJson = JSON.parse(errorText);\r\n          errorMessage = errorJson.error || errorMessage;\r\n        } catch {\r\n          errorMessage = errorText || errorMessage;\r\n        }\r\n        setPhotoToast({ type: 'error', message: errorMessage });\r\n        setTimeout(() => setPhotoToast(null), 5000);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error uploading photo:', error);\r\n      const errorMessage = error instanceof Error ? error.message : t('common.unknown');\r\n      setPhotoToast({ type: 'error', message: `${t('myShop.failedToUpload')}: ${errorMessage}` });\r\n      setTimeout(() => setPhotoToast(null), 5000);\r\n    }\r\n    \r\n    // Reset the input\r\n    e.target.value = '';\r\n  };\r\n\r\n  const handleSavePhotos = async () => {\r\n    if (!shop || !user) return;\r\n    \r\n    try {\r\n      // Refresh photos list to ensure we have the latest data\r\n      await fetchPhotos(shop.id);\r\n      setPhotoToast({ type: 'success', message: t('myShop.photoUploaded') });\r\n      setTimeout(() => setPhotoToast(null), 3000);\r\n      router.refresh();\r\n    } catch (error) {\r\n      console.error('Error saving photos:', error);\r\n      setPhotoToast({ type: 'error', message: 'Failed to save photos' });\r\n      setTimeout(() => setPhotoToast(null), 5000);\r\n    }\r\n  };\r\n\r\n  const handlePhotoDelete = async (photoId: string, type: 'logo' | 'cover' | 'gallery') => {\r\n    if (!shop || !user) return;\r\n    if (!confirm(`Are you sure you want to delete this ${type} photo?`)) return;\r\n\r\n    try {\r\n      const res = await fetch(`${apiUrl}/shops/${shop.id}/photos/${photoId}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'x-user-id': user.id,\r\n        },\r\n      });\r\n\r\n      if (res.ok) {\r\n        // Remove photo from state immediately\r\n        setPhotos(prev => prev.filter(p => p.id !== photoId));\r\n        \r\n        // Refresh photos list to ensure consistency\r\n        await fetchPhotos(shop.id);\r\n        \r\n        // Update shop if it was logo or cover\r\n        if (type === 'logo' || type === 'cover') {\r\n          const updateField = type === 'logo' ? 'logo_url' : 'cover_photo_url';\r\n          const updateRes = await fetch(`${apiUrl}/shops/${shop.id}`, {\r\n            method: 'PATCH',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'x-user-id': user.id,\r\n            },\r\n            body: JSON.stringify({\r\n              [updateField]: null,\r\n            }),\r\n          });\r\n\r\n          if (updateRes.ok) {\r\n            const updatedShop = await updateRes.json();\r\n            setShop(updatedShop);\r\n          }\r\n        }\r\n        \r\n        router.refresh();\r\n      } else {\r\n        const error = await res.json();\r\n        alert(`${t('common.error')}: ${error.error || t('myShop.failedToDelete')}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting photo:', error);\r\n      alert(t('myShop.failedToDelete'));\r\n    }\r\n  };\r\n\r\n  if (pageLoading) {\r\n    return (\r\n      <div className=\"p-8 flex items-center justify-center min-h-screen\">\r\n        <div className=\"text-center\">\r\n          <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n          <p className=\"mt-4 text-gray-600\">{t('common.loading')}</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // User doesn't own a shop - show create/claim options\r\n  if (!shop) {\r\n    return (\r\n      <div className=\"p-8 max-w-4xl mx-auto\">\r\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-8\">{t('myShop.title')}</h1>\r\n        \r\n        <div className=\"bg-white rounded-xl shadow-md border border-gray-100 p-8 mb-6\">\r\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">{t('myShop.getStarted')}</h2>\r\n          <p className=\"text-gray-600 mb-6\">\r\n            {t('myShop.noShop')} {t('myShop.createShop')} {t('common.or')} {t('myShop.claimShop')}.\r\n          </p>\r\n          \r\n          <div className=\"grid md:grid-cols-2 gap-6\">\r\n            {/* Create Shop */}\r\n            <div className=\"border border-gray-200 rounded-lg p-6\">\r\n              <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">{t('myShop.createNewShop')}</h3>\r\n              <p className=\"text-gray-600 mb-4\">{t('myShop.startFresh')}</p>\r\n              <button\r\n                onClick={() => setShowCreateShop(true)}\r\n                className=\"w-full px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors\"\r\n              >\r\n                {t('myShop.createShop')}\r\n              </button>\r\n            </div>\r\n\r\n            {/* Claim Shop */}\r\n            <div className=\"border border-gray-200 rounded-lg p-6\">\r\n              <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">{t('myShop.claimExistingShop')}</h3>\r\n              <p className=\"text-gray-600 mb-4\">{t('myShop.claimOwnership')}</p>\r\n              <button\r\n                onClick={() => setShowClaimShop(true)}\r\n                className=\"w-full px-4 py-2 bg-gray-600 text-white font-medium rounded-lg hover:bg-gray-700 transition-colors\"\r\n              >\r\n                {t('myShop.claimShop')}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Create Shop Form */}\r\n        {showCreateShop && (\r\n          <div className=\"bg-white rounded-xl shadow-md border border-gray-100 p-8\">\r\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">{t('myShop.createNewShop')}</h2>\r\n            <form onSubmit={handleCreateShop}>\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">{t('myShop.shopName')}</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    required\r\n                    value={shopForm.name || ''}\r\n                    onChange={(e) => setShopForm(prev => ({ ...prev, name: e.target.value }))}\r\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">{t('myShop.address')}</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    required\r\n                    value={shopForm.address || ''}\r\n                    onChange={(e) => setShopForm(prev => ({ ...prev, address: e.target.value }))}\r\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">{t('myShop.phone')}</label>\r\n                  <input\r\n                    type=\"tel\"\r\n                    required\r\n                    value={shopForm.phone || ''}\r\n                    onChange={(e) => setShopForm(prev => ({ ...prev, phone: e.target.value }))}\r\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">{t('myShop.email')}</label>\r\n                  <input\r\n                    type=\"email\"\r\n                    required\r\n                    value={shopForm.email || ''}\r\n                    onChange={(e) => setShopForm(prev => ({ ...prev, email: e.target.value }))}\r\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\r\n                  />\r\n                </div>\r\n                <div className=\"flex gap-4\">\r\n                  <button\r\n                    type=\"submit\"\r\n                    className=\"px-6 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors\"\r\n                  >\r\n                    {t('myShop.createShop')}\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setShowCreateShop(false)}\r\n                    className=\"px-6 py-2 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors\"\r\n                  >\r\n                    {t('common.cancel')}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        )}\r\n\r\n        {/* Claim Shop Form */}\r\n        {showClaimShop && (\r\n          <div className=\"bg-white rounded-xl shadow-md border border-gray-100 p-8\">\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n              <h2 className=\"text-2xl font-bold text-gray-900\">{t('myShop.claimShop')}</h2>\r\n              <button\r\n                onClick={() => setShowClaimShop(false)}\r\n                className=\"px-4 py-2 text-gray-600 hover:text-gray-900\"\r\n              >\r\n                ×\r\n              </button>\r\n            </div>\r\n            <p className=\"text-gray-600 mb-6\">\r\n              {t('myShop.selectUnclaimedShop')}\r\n            </p>\r\n            \r\n            {claimLoading ? (\r\n              <div className=\"text-center py-8\">\r\n                <div className=\"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n                <p className=\"mt-2 text-gray-600\">{t('shops.loading')}</p>\r\n              </div>\r\n            ) : unclaimedShops.length === 0 ? (\r\n              <div className=\"text-center py-8 text-gray-500\">\r\n                <p>{t('myShop.noUnclaimedShops')}</p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-3 max-h-96 overflow-y-auto\">\r\n                {unclaimedShops.map((unclaimedShop) => (\r\n                  <div\r\n                    key={unclaimedShop.id}\r\n                    className=\"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors\"\r\n                  >\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div>\r\n                        <h3 className=\"font-semibold text-gray-900\">{unclaimedShop.name}</h3>\r\n                        {unclaimedShop.address && (\r\n                          <p className=\"text-sm text-gray-600 mt-1\">{unclaimedShop.address}</p>\r\n                        )}\r\n                      </div>\r\n                      <button\r\n                        onClick={async () => {\r\n                          if (!user) return;\r\n                          try {\r\n                            setClaimLoading(true);\r\n                            const res = await fetch(`${apiUrl}/shops/${unclaimedShop.id}/claim`, {\r\n                              method: 'POST',\r\n                              headers: {\r\n                                'Content-Type': 'application/json',\r\n                                'x-user-id': user.id,\r\n                              },\r\n                            });\r\n                            \r\n                            if (res.ok) {\r\n                              const claimedShop = await res.json();\r\n                              setShop(claimedShop);\r\n                              setShopForm(claimedShop);\r\n                              setShowClaimShop(false);\r\n                              router.refresh();\r\n                            } else {\r\n                              const error = await res.json();\r\n                              alert(`Error: ${error.error || 'Failed to claim shop'}`);\r\n                            }\r\n                          } catch (error) {\r\n                            console.error('Error claiming shop:', error);\r\n                            alert('Failed to claim shop');\r\n                          } finally {\r\n                            setClaimLoading(false);\r\n                          }\r\n                        }}\r\n                        className=\"px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors\"\r\n                      >\r\n                        {t('myShop.claimShop')}\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // User owns a shop - show management UI\r\n  return (\r\n    <div className=\"max-w-5xl mx-auto px-4 py-6\">\r\n      {/* Section Header */}\r\n      <div className=\"mb-8\">\r\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">{t('myShop.title')}</h1>\r\n        <p className=\"text-lg text-gray-600\">{shop.name}</p>\r\n      </div>\r\n\r\n      {/* Tabs */}\r\n      <div className=\"mb-6 border-b border-gray-200\">\r\n        <div className=\"flex gap-1\">\r\n          {(['overview', 'services', 'bookings', 'photos', 'reviews'] as const).map((tab) => (\r\n            <button\r\n              key={tab}\r\n              onClick={() => {\r\n                setActiveTab(tab);\r\n                // Fetch data when tab is clicked\r\n                if (shop && user) {\r\n                  if (tab === 'services') {\r\n                    fetchServices(shop.id);\r\n                  } else if (tab === 'bookings') {\r\n                    fetchBookings(shop.id);\r\n                  } else if (tab === 'photos') {\r\n                    fetchPhotos(shop.id);\r\n                  } else if (tab === 'reviews') {\r\n                    fetchReviews(shop.id);\r\n                  }\r\n                }\r\n              }}\r\n              className={`px-6 py-3 font-medium transition-colors relative ${\r\n                activeTab === tab\r\n                  ? 'text-blue-600 font-bold'\r\n                  : 'text-gray-600 hover:text-gray-900'\r\n              }`}\r\n            >\r\n              {t(`myShop.${tab}`)}\r\n              {activeTab === tab && (\r\n                <span className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600\"></span>\r\n              )}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Tab Content */}\r\n      {activeTab === 'overview' && (\r\n        <div className=\"bg-white rounded-xl border border-gray-200 shadow-sm p-6\">\r\n          <div className=\"mb-6\">\r\n            <h2 className=\"text-2xl font-bold text-gray-900\">{t('myShop.shopOverview')}</h2>\r\n            {!editingShop && (\r\n              <button\r\n                onClick={() => setEditingShop(true)}\r\n                className=\"mt-2 text-sm text-blue-600 hover:text-blue-700 font-medium\"\r\n              >\r\n                {t('myShop.editShop')}\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {editingShop ? (\r\n            <form onSubmit={handleUpdateShop}>\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">{t('myShop.shopName')}</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    required\r\n                    value={shopForm.name || ''}\r\n                    onChange={(e) => setShopForm(prev => ({ ...prev, name: e.target.value }))}\r\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">{t('myShop.address')}</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    required\r\n                    value={shopForm.address || ''}\r\n                    onChange={(e) => setShopForm(prev => ({ ...prev, address: e.target.value }))}\r\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\r\n                  />\r\n                </div>\r\n                <div className=\"grid md:grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">{t('myShop.phone')}</label>\r\n                    <input\r\n                      type=\"tel\"\r\n                      required\r\n                      value={shopForm.phone || ''}\r\n                      onChange={(e) => setShopForm(prev => ({ ...prev, phone: e.target.value }))}\r\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">{t('myShop.email')}</label>\r\n                    <input\r\n                      type=\"email\"\r\n                      required\r\n                      value={shopForm.email || ''}\r\n                      onChange={(e) => setShopForm(prev => ({ ...prev, email: e.target.value }))}\r\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">{t('myShop.website')}</label>\r\n                  <input\r\n                    type=\"url\"\r\n                    value={shopForm.website || ''}\r\n                    onChange={(e) => setShopForm(prev => ({ ...prev, website: e.target.value }))}\r\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\r\n                  />\r\n                </div>\r\n                <div className=\"flex gap-4\">\r\n                  <button\r\n                    type=\"submit\"\r\n                    className=\"px-6 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors\"\r\n                  >\r\n                    {t('common.save')}\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      setEditingShop(false);\r\n                      setShopForm(shop ? {\r\n                        name: shop.name || '',\r\n                        address: shop.address || '',\r\n                        phone: shop.phone || '',\r\n                        email: shop.email || '',\r\n                        website: shop.website || '',\r\n                        google_place_id: shop.google_place_id || '',\r\n                        city: shop.city || '',\r\n                        country: shop.country || '',\r\n                        zip_code: shop.zip_code || '',\r\n                        description: shop.description || '',\r\n                        language_code: shop.language_code || '',\r\n                        category: shop.category || null,\r\n                        subcategory: shop.subcategory || null,\r\n                        logo_url: shop.logo_url || null,\r\n                        cover_photo_url: shop.cover_photo_url || null,\r\n                      } : {\r\n                        name: '',\r\n                        address: '',\r\n                        phone: '',\r\n                        email: '',\r\n                        website: '',\r\n                        google_place_id: '',\r\n                        city: '',\r\n                        country: '',\r\n                        zip_code: '',\r\n                        description: '',\r\n                        language_code: '',\r\n                      });\r\n                    }}\r\n                    className=\"px-6 py-2 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors\"\r\n                  >\r\n                    {t('common.cancel')}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          ) : (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"grid md:grid-cols-2 gap-6\">\r\n                <div>\r\n                  <dt className=\"text-sm font-medium text-gray-500 mb-1\">{t('common.name')}</dt>\r\n                  <dd className=\"text-lg text-gray-900\">{shop.name}</dd>\r\n                </div>\r\n                <div>\r\n                  <dt className=\"text-sm font-medium text-gray-500 mb-1\">{t('myShop.address')}</dt>\r\n                  <dd className=\"text-lg text-gray-900\">{shop.address}</dd>\r\n                </div>\r\n                <div>\r\n                  <dt className=\"text-sm font-medium text-gray-500 mb-1\">{t('myShop.phone')}</dt>\r\n                  <dd className=\"text-lg text-gray-900\">{shop.phone}</dd>\r\n                </div>\r\n                <div>\r\n                  <dt className=\"text-sm font-medium text-gray-500 mb-1\">{t('myShop.email')}</dt>\r\n                  <dd className=\"text-lg text-gray-900\">{shop.email}</dd>\r\n                </div>\r\n              </div>\r\n              {shop.website && (\r\n                <div>\r\n                  <dt className=\"text-sm font-medium text-gray-500 mb-1\">{t('myShop.website')}</dt>\r\n                  <dd>\r\n                    <a href={shop.website} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-lg text-blue-600 hover:underline\">\r\n                      {shop.website}\r\n                    </a>\r\n                  </dd>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* LINE QR Code Section */}\r\n          {shop && (\r\n            <div className=\"mt-8 p-6 bg-gray-50 rounded-lg border border-gray-200\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">LINE QR Code</h3>\r\n              <LineQrSection shopId={shop.id} shop={shop} user={user} />\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {activeTab === 'services' && (\r\n        <div className=\"bg-white rounded-xl border border-gray-200 shadow-sm p-6\">\r\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">{t('myShop.services')}</h2>\r\n          \r\n          {/* Create/Edit Service Form */}\r\n          <div className=\"mb-6 border border-gray-200 rounded-lg p-6\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">\r\n              {editingService ? t('myShop.editService') : t('myShop.createNewService')}\r\n            </h3>\r\n            {serviceError && (\r\n              <div className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm\">\r\n                {serviceError}\r\n              </div>\r\n            )}\r\n            <form onSubmit={editingService ? handleUpdateService : handleCreateService} className=\"space-y-4\">\r\n              <div className=\"grid md:grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">{t('myShop.serviceName')} *</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={serviceForm.name}\r\n                    onChange={(e) => setServiceForm(prev => ({ ...prev, name: e.target.value }))}\r\n                    required\r\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\r\n                    placeholder={t('myShop.serviceName')}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">{t('myShop.servicePrice')} *</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={serviceForm.price}\r\n                    onChange={(e) => setServiceForm(prev => ({ ...prev, price: parseFloat(e.target.value) || 0 }))}\r\n                    required\r\n                    min=\"0\"\r\n                    step=\"0.01\"\r\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">{t('myShop.serviceDescription')}</label>\r\n                <textarea\r\n                  value={serviceForm.description}\r\n                  onChange={(e) => setServiceForm(prev => ({ ...prev, description: e.target.value }))}\r\n                  rows={3}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\r\n                  placeholder={t('myShop.serviceDescription')}\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">{t('myShop.serviceDuration')} *</label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={serviceForm.duration_minutes}\r\n                  onChange={(e) => setServiceForm(prev => ({ ...prev, duration_minutes: parseInt(e.target.value) || 0 }))}\r\n                  required\r\n                  min=\"1\"\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\r\n                />\r\n              </div>\r\n              <div className=\"flex gap-4\">\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"px-6 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors\"\r\n                >\r\n                  {editingService ? t('common.update') : t('common.create')}\r\n                </button>\r\n                {editingService && (\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      setEditingService(null);\r\n                      setServiceForm({ name: '', description: '', price: 0, duration_minutes: 0 });\r\n                    }}\r\n                    className=\"px-6 py-2 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors\"\r\n                  >\r\n                    {t('common.cancel')}\r\n                  </button>\r\n                )}\r\n              </div>\r\n            </form>\r\n          </div>\r\n          \r\n          {/* Services List */}\r\n          {services.length === 0 ? (\r\n            <div className=\"border border-gray-200 rounded-lg p-8 text-center\">\r\n              <div className=\"text-4xl mb-4\">⚙️</div>\r\n              <p className=\"text-gray-600 mb-2\">{t('myShop.noServices')}</p>\r\n              <p className=\"text-sm text-gray-500\">{t('myShop.createFirstService')}</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"w-full\">\r\n                <thead>\r\n                  <tr className=\"border-b border-gray-200\">\r\n                    <th className=\"text-left py-3 px-4 font-semibold text-gray-700\">{t('common.name')}</th>\r\n                    <th className=\"text-left py-3 px-4 font-semibold text-gray-700\">{t('common.description')}</th>\r\n                    <th className=\"text-left py-3 px-4 font-semibold text-gray-700\">{t('common.price')}</th>\r\n                    <th className=\"text-left py-3 px-4 font-semibold text-gray-700\">{t('common.duration')}</th>\r\n                    <th className=\"text-left py-3 px-4 font-semibold text-gray-700\">{t('common.actions')}</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {services.map((service) => (\r\n                    <tr key={service.id} className=\"border-b border-gray-100 hover:bg-gray-50 transition-colors\">\r\n                      <td className=\"py-3 px-4 text-gray-900 font-medium\">{service.name}</td>\r\n                      <td className=\"py-3 px-4 text-gray-600\">{service.description || 'N/A'}</td>\r\n                      <td className=\"py-3 px-4 text-gray-700\">${service.price}</td>\r\n                      <td className=\"py-3 px-4 text-gray-700\">{service.duration_minutes || 0} min</td>\r\n                      <td className=\"py-3 px-4\">\r\n                        <div className=\"flex gap-2\">\r\n                          <button\r\n                            onClick={() => startEditService(service)}\r\n                            className=\"text-blue-600 hover:text-blue-800 text-sm font-medium\"\r\n                          >\r\n                            {t('common.edit')}\r\n                          </button>\r\n                          <button\r\n                            onClick={() => handleDeleteService(service.id)}\r\n                            className=\"text-red-600 hover:text-red-800 text-sm font-medium\"\r\n                          >\r\n                            {t('common.delete')}\r\n                          </button>\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n\r\n      {activeTab === 'bookings' && (\r\n        <div className=\"bg-white rounded-xl border border-gray-200 shadow-sm p-6\">\r\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">{t('myShop.bookings')}</h2>\r\n          {bookings.length === 0 ? (\r\n            <div className=\"border border-gray-200 rounded-lg p-8 text-center\">\r\n              <div className=\"text-4xl mb-4\">📅</div>\r\n              <p className=\"text-gray-600 mb-2\">{t('myShop.noBookings')}</p>\r\n              <p className=\"text-sm text-gray-500\">{t('myShop.bookingsWillAppear')}</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"w-full\">\r\n                <thead>\r\n                  <tr className=\"border-b border-gray-200\">\r\n                    <th className=\"text-left py-3 px-4 font-semibold text-gray-700\">{t('myShop.customer')}</th>\r\n                    <th className=\"text-left py-3 px-4 font-semibold text-gray-700\">{t('common.email')}</th>\r\n                    <th className=\"text-left py-3 px-4 font-semibold text-gray-700\">{t('common.phone')}</th>\r\n                    <th className=\"text-left py-3 px-4 font-semibold text-gray-700\">{t('myShop.dateTime')}</th>\r\n                    <th className=\"text-left py-3 px-4 font-semibold text-gray-700\">{t('myShop.service')}</th>\r\n                    <th className=\"text-left py-3 px-4 font-semibold text-gray-700\">{t('common.status')}</th>\r\n                    <th className=\"text-left py-3 px-4 font-semibold text-gray-700\">{t('common.actions')}</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {bookings.map((booking) => (\r\n                    <tr key={booking.id} className=\"border-b border-gray-100 hover:bg-gray-50 transition-colors\">\r\n                      <td className=\"py-3 px-4 text-gray-900 font-medium\">\r\n                        {booking.customer_name || t('common.unknown')}\r\n                      </td>\r\n                      <td className=\"py-3 px-4 text-gray-600\">{booking.customer_email || 'N/A'}</td>\r\n                      <td className=\"py-3 px-4 text-gray-600\">{booking.customer_phone || 'N/A'}</td>\r\n                      <td className=\"py-3 px-4 text-gray-700\">\r\n                        {booking.start_time ? new Date(booking.start_time).toLocaleString() : 'N/A'}\r\n                      </td>\r\n                      <td className=\"py-3 px-4 text-gray-600\">\r\n                        {(booking as any).services?.name || 'N/A'}\r\n                      </td>\r\n                      <td className=\"py-3 px-4\">\r\n                        <span className={`px-3 py-1 rounded-full text-sm font-medium ${\r\n                          booking.status === 'confirmed' ? 'bg-green-100 text-green-700' :\r\n                          booking.status === 'rejected' ? 'bg-red-100 text-red-700' :\r\n                          booking.status === 'cancelled' ? 'bg-gray-100 text-gray-700' :\r\n                          booking.status === 'completed' ? 'bg-blue-100 text-blue-700' :\r\n                          'bg-yellow-100 text-yellow-700'\r\n                        }`}>\r\n                          {t(`status.${booking.status || 'pending'}`)}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"py-3 px-4\">\r\n                        <div className=\"flex gap-2 flex-wrap\">\r\n                          {(!booking.status || booking.status === 'pending') && (\r\n                            <>\r\n                              <button\r\n                                onClick={() => openStatusUpdateModal(booking.id, 'confirmed', booking.customer_name || null)}\r\n                                className=\"px-3 py-1.5 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors font-medium\"\r\n                              >\r\n                                {t('common.confirm')}\r\n                              </button>\r\n                              <button\r\n                                onClick={() => openStatusUpdateModal(booking.id, 'rejected', booking.customer_name || null)}\r\n                                className=\"px-3 py-1.5 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors font-medium\"\r\n                              >\r\n                                {t('common.reject')}\r\n                              </button>\r\n                            </>\r\n                          )}\r\n                          {booking.status && booking.status !== 'cancelled' && booking.status !== 'completed' && (\r\n                            <>\r\n                              <button\r\n                                onClick={() => openCancelModal(booking.id, booking.customer_name || null)}\r\n                                className=\"px-3 py-1.5 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors font-medium\"\r\n                              >\r\n                                {t('booking.cancelBooking')}\r\n                              </button>\r\n                              <button\r\n                                onClick={() => openRescheduleModal(booking.id, booking.customer_name || null, booking.start_time)}\r\n                                className=\"px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors font-medium\"\r\n                              >\r\n                                {t('booking.rescheduleBooking')}\r\n                              </button>\r\n                            </>\r\n                          )}\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {activeTab === 'reviews' && (\r\n        <div className=\"bg-white rounded-xl border border-gray-200 shadow-sm p-6\">\r\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-6\">{t('reviews.title')}</h2>\r\n          {loadingReviews ? (\r\n            <p className=\"text-gray-500\">{t('common.loading')}</p>\r\n          ) : (\r\n            <>\r\n              {reviewStats && (\r\n                <div className=\"mb-6\">\r\n                  <ReviewStats\r\n                    averageRating={reviewStats.averageRating}\r\n                    totalReviews={reviewStats.totalReviews}\r\n                    ratingDistribution={reviewStats.ratingDistribution}\r\n                  />\r\n                </div>\r\n              )}\r\n              {reviews.length === 0 ? (\r\n                <p className=\"text-gray-500\">{t('reviews.noReviews')}</p>\r\n              ) : (\r\n                <div className=\"space-y-4\">\r\n                  {reviews.map((review) => (\r\n                    <div key={review.id} className=\"border border-gray-200 rounded-lg p-4\">\r\n                      <ReviewCard review={review} />\r\n                      {!review.owner_response && (\r\n                        <div className=\"mt-4 pt-4 border-t border-gray-200\">\r\n                          <textarea\r\n                            value={ownerResponse[review.id] || ''}\r\n                            onChange={(e) =>\r\n                              setOwnerResponse((prev) => ({\r\n                                ...prev,\r\n                                [review.id]: e.target.value,\r\n                              }))\r\n                            }\r\n                            placeholder={t('reviews.respond')}\r\n                            className=\"w-full px-3 py-2 border border-gray-300 rounded-md mb-2\"\r\n                            rows={3}\r\n                          />\r\n                          <button\r\n                            onClick={() => handleOwnerResponse(review.id, ownerResponse[review.id] || '')}\r\n                            className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700\"\r\n                          >\r\n                            {t('reviews.respond')}\r\n                          </button>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {activeTab === 'photos' && (\r\n        <div className=\"bg-white rounded-xl border border-gray-200 shadow-sm p-6\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <h2 className=\"text-2xl font-bold text-gray-900\">{t('myShop.photos')}</h2>\r\n            <button\r\n              onClick={handleSavePhotos}\r\n              className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium\"\r\n            >\r\n              {t('common.save')}\r\n            </button>\r\n          </div>\r\n          \r\n          {/* Toast Notification */}\r\n          {photoToast && (\r\n            <div className={`mb-4 p-3 rounded-lg ${\r\n              photoToast.type === 'success' \r\n                ? 'bg-green-100 text-green-700 border border-green-300' \r\n                : 'bg-red-100 text-red-700 border border-red-300'\r\n            }`}>\r\n              {photoToast.message}\r\n            </div>\r\n          )}\r\n          \r\n          {/* Logo Upload */}\r\n          <div className=\"mb-8\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-3\">{t('myShop.shopLogo')}</h3>\r\n            <div className=\"flex items-center gap-4\">\r\n              {(() => {\r\n                const logoPhoto = photos.find(p => p.type === 'logo');\r\n                const logoUrl = logoPhoto?.url || shop.logo_url;\r\n                return logoUrl ? (\r\n                  <img src={logoUrl} alt=\"Logo\" className=\"w-24 h-24 object-cover rounded-lg border border-gray-200\" />\r\n                ) : (\r\n                  <div className=\"w-24 h-24 bg-gray-100 rounded-lg border border-gray-200 flex items-center justify-center text-gray-400\">\r\n                    {t('myShop.noLogo')}\r\n                  </div>\r\n                );\r\n              })()}\r\n              <input\r\n                type=\"file\"\r\n                accept=\"image/jpeg,image/png\"\r\n                onChange={(e) => handlePhotoUpload(e, 'logo')}\r\n                className=\"hidden\"\r\n                id=\"logo-upload\"\r\n              />\r\n              <label\r\n                htmlFor=\"logo-upload\"\r\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer transition-colors\"\r\n              >\r\n                {photos.find(p => p.type === 'logo') || shop.logo_url ? t('myShop.changeLogo') : t('myShop.uploadLogo')}\r\n              </label>\r\n              {(() => {\r\n                const logoPhoto = photos.find(p => p.type === 'logo');\r\n                if (logoPhoto) {\r\n                  return (\r\n                    <button\r\n                      onClick={() => handlePhotoDelete(logoPhoto.id, 'logo')}\r\n                      className=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\"\r\n                    >\r\n                      {t('common.delete')}\r\n                    </button>\r\n                  );\r\n                }\r\n                return null;\r\n              })()}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Cover Photo Upload */}\r\n          <div className=\"mb-8\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-3\">{t('myShop.coverPhoto')}</h3>\r\n            <div className=\"flex items-center gap-4\">\r\n              {(() => {\r\n                const coverPhoto = photos.find(p => p.type === 'cover');\r\n                const coverUrl = coverPhoto?.url || shop.cover_photo_url;\r\n                return coverUrl ? (\r\n                  <img src={coverUrl} alt=\"Cover\" className=\"w-48 h-32 object-cover rounded-lg border border-gray-200\" />\r\n                ) : (\r\n                  <div className=\"w-48 h-32 bg-gray-100 rounded-lg border border-gray-200 flex items-center justify-center text-gray-400\">\r\n                    {t('myShop.noCoverPhoto')}\r\n                  </div>\r\n                );\r\n              })()}\r\n              <input\r\n                type=\"file\"\r\n                accept=\"image/jpeg,image/png\"\r\n                onChange={(e) => handlePhotoUpload(e, 'cover')}\r\n                className=\"hidden\"\r\n                id=\"cover-upload\"\r\n              />\r\n              <label\r\n                htmlFor=\"cover-upload\"\r\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer transition-colors\"\r\n              >\r\n                {photos.find(p => p.type === 'cover') || shop.cover_photo_url ? t('myShop.changeCover') : t('myShop.uploadCover')}\r\n              </label>\r\n              {(() => {\r\n                const coverPhoto = photos.find(p => p.type === 'cover');\r\n                if (coverPhoto) {\r\n                  return (\r\n                    <button\r\n                      onClick={() => handlePhotoDelete(coverPhoto.id, 'cover')}\r\n                      className=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\"\r\n                    >\r\n                      {t('common.delete')}\r\n                    </button>\r\n                  );\r\n                }\r\n                return null;\r\n              })()}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Gallery Photos */}\r\n          <div>\r\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-3\">{t('myShop.galleryPhotos')}</h3>\r\n            <input\r\n              type=\"file\"\r\n              accept=\"image/jpeg,image/png,image/jpg\"\r\n              onChange={(e) => handlePhotoUpload(e, 'gallery')}\r\n              className=\"hidden\"\r\n              id=\"gallery-upload\"\r\n            />\r\n            <label\r\n              htmlFor=\"gallery-upload\"\r\n              className=\"inline-block px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer transition-colors mb-4\"\r\n            >\r\n              {t('myShop.uploadGalleryPhoto')}\r\n            </label>\r\n            {photos.filter(p => p.type === 'gallery').length === 0 ? (\r\n              <div className=\"border border-gray-200 rounded-lg p-8 text-center bg-gray-50\">\r\n                <div className=\"text-2xl mb-2\">📸</div>\r\n                <p className=\"text-sm text-gray-500\">{t('myShop.noGalleryPhotos')}</p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\r\n                {photos.filter(p => p.type === 'gallery').map((photo) => (\r\n                  <div key={photo.id} className=\"relative group\">\r\n                    <img \r\n                      src={photo.url} \r\n                      alt=\"Gallery\" \r\n                      className=\"w-full h-48 object-cover rounded-lg border border-gray-200\"\r\n                      onError={(e) => {\r\n                        console.error('Error loading image:', photo.url);\r\n                        (e.target as HTMLImageElement).src = 'data:image/svg+xml,%3Csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"200\" height=\"200\"%3E%3Crect fill=\"%23ddd\" width=\"200\" height=\"200\"/%3E%3Ctext fill=\"%23999\" font-family=\"sans-serif\" font-size=\"14\" x=\"50%25\" y=\"50%25\" text-anchor=\"middle\" dy=\".3em\"%3EImage not found%3C/text%3E%3C/svg%3E';\r\n                      }}\r\n                    />\r\n                    <button\r\n                      onClick={() => handlePhotoDelete(photo.id, 'gallery')}\r\n                      className=\"absolute top-2 right-2 px-3 py-1 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors opacity-0 group-hover:opacity-100 shadow-lg\"\r\n                    >\r\n                      {t('common.delete')}\r\n                    </button>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Status Update Confirmation Modal */}\r\n      {statusUpdateModal.isOpen && (\r\n        <div \r\n          className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50\" \r\n          onClick={closeStatusUpdateModal}\r\n          onMouseDown={(e) => {\r\n            if (e.target === e.currentTarget) {\r\n              closeStatusUpdateModal();\r\n            }\r\n          }}\r\n        >\r\n          <div \r\n            className=\"bg-white rounded-xl shadow-2xl max-w-md w-full p-6 relative\" \r\n            onClick={(e) => e.stopPropagation()}\r\n            onMouseDown={(e) => e.stopPropagation()}\r\n          >\r\n            <button\r\n              type=\"button\"\r\n              onClick={closeStatusUpdateModal}\r\n              className=\"absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-2xl leading-none\"\r\n            >\r\n              ×\r\n            </button>\r\n            \r\n            <h3 className=\"text-xl font-bold text-gray-900 mb-4\">\r\n              {statusUpdateModal.newStatus === 'confirmed' ? t('myShop.confirmBooking') : t('myShop.rejectBooking')}\r\n            </h3>\r\n            \r\n            <p className=\"text-gray-600 mb-6\">\r\n              {statusUpdateModal.newStatus === 'confirmed' ? t('myShop.areYouSureConfirm') : t('myShop.areYouSureReject')} {statusUpdateModal.bookingCustomerName ? `${t('common.for')} ${statusUpdateModal.bookingCustomerName}` : ''}?\r\n            </p>\r\n\r\n            {statusUpdateMessage && (\r\n              <div className={`mb-4 p-3 rounded-lg ${\r\n                statusUpdateMessage.type === 'success' \r\n                  ? 'bg-green-100 text-green-700' \r\n                  : 'bg-red-100 text-red-700'\r\n              }`}>\r\n                {statusUpdateMessage.text}\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"flex gap-3 justify-end\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={closeStatusUpdateModal}\r\n                disabled={statusUpdateLoading}\r\n                className=\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              >\r\n                {t('common.cancel')}\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                onClick={handleUpdateBookingStatus}\r\n                disabled={statusUpdateLoading}\r\n                className={`px-4 py-2 rounded-lg text-white font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${\r\n                  statusUpdateModal.newStatus === 'confirmed'\r\n                    ? 'bg-green-600 hover:bg-green-700'\r\n                    : 'bg-red-600 hover:bg-red-700'\r\n                }`}\r\n              >\r\n                {statusUpdateLoading ? t('common.updating') : statusUpdateModal.newStatus === 'confirmed' ? t('common.confirm') : t('common.reject')}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Cancel Booking Confirmation Modal */}\r\n      {cancelModal.isOpen && (\r\n        <div \r\n          className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50\" \r\n          onClick={closeCancelModal}\r\n          onMouseDown={(e) => {\r\n            if (e.target === e.currentTarget) {\r\n              closeCancelModal();\r\n            }\r\n          }}\r\n        >\r\n          <div \r\n            className=\"bg-white rounded-xl shadow-2xl max-w-md w-full p-6 relative\" \r\n            onClick={(e) => e.stopPropagation()}\r\n            onMouseDown={(e) => e.stopPropagation()}\r\n          >\r\n            <button\r\n              type=\"button\"\r\n              onClick={closeCancelModal}\r\n              className=\"absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-2xl leading-none\"\r\n            >\r\n              ×\r\n            </button>\r\n            \r\n            <h3 className=\"text-xl font-bold text-gray-900 mb-4\">\r\n              {t('booking.cancelBooking')}\r\n            </h3>\r\n            \r\n            <p className=\"text-gray-600 mb-6\">\r\n              {t('booking.cancelConfirm')} {cancelModal.bookingCustomerName ? `${t('common.for')} ${cancelModal.bookingCustomerName}` : ''}?\r\n            </p>\r\n\r\n            {cancelMessage && (\r\n              <div className={`mb-4 p-3 rounded-lg ${\r\n                cancelMessage.type === 'success' \r\n                  ? 'bg-green-100 text-green-700' \r\n                  : 'bg-red-100 text-red-700'\r\n              }`}>\r\n                {cancelMessage.text}\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"flex gap-3 justify-end\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={closeCancelModal}\r\n                disabled={cancelLoading}\r\n                className=\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              >\r\n                {t('common.no')}, {t('common.keepIt')}\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                onClick={handleCancelBooking}\r\n                disabled={cancelLoading}\r\n                className=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              >\r\n                {cancelLoading ? t('common.cancelling') : `${t('common.yes')}, ${t('booking.cancelBooking')}`}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Reschedule Booking Modal */}\r\n      {rescheduleModal.isOpen && (\r\n        <div \r\n          className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50\" \r\n          onClick={closeRescheduleModal}\r\n          onMouseDown={(e) => {\r\n            if (e.target === e.currentTarget) {\r\n              closeRescheduleModal();\r\n            }\r\n          }}\r\n        >\r\n          <div \r\n            className=\"bg-white rounded-xl shadow-2xl max-w-md w-full p-6 relative\" \r\n            onClick={(e) => e.stopPropagation()}\r\n            onMouseDown={(e) => e.stopPropagation()}\r\n          >\r\n            <button\r\n              type=\"button\"\r\n              onClick={closeRescheduleModal}\r\n              className=\"absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-2xl leading-none\"\r\n            >\r\n              ×\r\n            </button>\r\n            \r\n            <h3 className=\"text-xl font-bold text-gray-900 mb-4\">\r\n              {t('booking.rescheduleBooking')}\r\n            </h3>\r\n            \r\n            <p className=\"text-gray-600 mb-4\">\r\n              {rescheduleModal.bookingCustomerName ? `${t('booking.rescheduleConfirm')} ${rescheduleModal.bookingCustomerName}` : t('booking.rescheduleBooking')}:\r\n            </p>\r\n\r\n            {rescheduleModal.currentDateTime && (\r\n              <p className=\"text-sm text-gray-500 mb-4\">\r\n                {t('booking.current')}: {new Date(rescheduleModal.currentDateTime).toLocaleString()}\r\n              </p>\r\n            )}\r\n\r\n            <div className=\"mb-4\">\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                {t('booking.newDateTime')}\r\n              </label>\r\n              <input\r\n                type=\"datetime-local\"\r\n                value={newDateTime}\r\n                onChange={(e) => setNewDateTime(e.target.value)}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            {rescheduleMessage && (\r\n              <div className={`mb-4 p-3 rounded-lg ${\r\n                rescheduleMessage.type === 'success' \r\n                  ? 'bg-green-100 text-green-700' \r\n                  : 'bg-red-100 text-red-700'\r\n              }`}>\r\n                {rescheduleMessage.text}\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"flex gap-3 justify-end\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={closeRescheduleModal}\r\n                disabled={rescheduleLoading}\r\n                className=\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              >\r\n                {t('common.cancel')}\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                onClick={handleRescheduleBooking}\r\n                disabled={rescheduleLoading || !newDateTime}\r\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              >\r\n                {rescheduleLoading ? t('common.rescheduling') : t('booking.rescheduleBooking')}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MyShopPage;\r\n\r\n"],"names":[],"mappings":"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"}