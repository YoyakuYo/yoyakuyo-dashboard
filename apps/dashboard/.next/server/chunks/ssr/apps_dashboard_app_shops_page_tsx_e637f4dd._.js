module.exports=[86416,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(67254),e=a.i(50944),f=a.i(15925),g=a.i(94043),h=a.i(3554);function i({shopId:a,shop:d,user:e}){let[f,g]=(0,c.useState)(!1),h=d?.line_destination_id?`https://line.me/R/ti/p/${d.line_destination_id}`:null,i=async()=>{if(e?.id&&a)try{g(!0);let b=await fetch(`http://localhost:3000/line/shop-auth-url?shopId=${a}`,{headers:{"x-user-id":e.id}});if(b.ok){let a=await b.json();a.authUrl?window.location.href=a.authUrl:alert("Failed to get LINE OAuth URL")}else{let a=await b.json();alert(a.error||"Failed to connect LINE account")}}catch(a){console.error("Error connecting LINE:",a),alert("Failed to connect LINE account")}finally{g(!1)}};return((0,c.useEffect)(()=>{let a=new URLSearchParams(window.location.search);"success"===a.get("line_connected")?(alert("LINE account connected successfully!"),window.history.replaceState({},"",window.location.pathname),window.location.reload()):a.get("line_error")&&(alert(`LINE connection error: ${a.get("line_error")}`),window.history.replaceState({},"",window.location.pathname))},[]),d?.line_qr_code_url&&d?.line_destination_id)?(0,b.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,b.jsx)("img",{src:d.line_qr_code_url,alt:"LINE QR Code",className:"w-48 h-48 border-2 border-gray-300 rounded-lg"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 text-center",children:"LINEã§äºˆç´„ã¯ã“ã¡ã‚‰"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>{h&&(navigator.clipboard.writeText(h),alert("LINE link copied to clipboard!"))},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Copy LINE Link"}),(0,b.jsx)("button",{onClick:()=>{if(d?.line_qr_code_url){let b=document.createElement("a");b.href=d.line_qr_code_url,b.download=`line-qr-${a}.png`,b.click()}},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Download QR Code"})]})]}):(0,b.jsxs)("div",{className:"text-center space-y-4 py-4",children:[(0,b.jsx)("p",{className:"text-gray-500",children:"Connect LINE to generate QR code"}),(0,b.jsx)("button",{onClick:i,disabled:f,className:"px-6 py-3 bg-green-500 text-white font-semibold rounded-lg hover:bg-green-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Connecting...":"Connect LINE Account"})]})}a.s(["default",0,()=>{let a,j,k,l,m,n,{user:o,loading:p}=(0,d.useAuth)(),q=!!p,r=(0,e.useRouter)(),s="http://localhost:3000",t=(0,f.useTranslations)(),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(!0),[y,z]=(0,c.useState)("overview"),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)({name:"",address:"",phone:"",email:"",website:"",google_place_id:"",city:"",country:"",zip_code:"",description:"",language_code:""}),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)([]),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)([]),[O,P]=(0,c.useState)([]),[Q,R]=(0,c.useState)([]),[S,T]=(0,c.useState)([]),[U,V]=(0,c.useState)([]),[W,X]=(0,c.useState)(null),[Y,Z]=(0,c.useState)(!1),[$,_]=(0,c.useState)({}),[aa,ab]=(0,c.useState)(null),[ac,ad]=(0,c.useState)({name:"",description:"",price:0,duration_minutes:0}),[ae,af]=(0,c.useState)(null),[ag,ah]=(0,c.useState)(null),[ai,aj]=(0,c.useState)({first_name:"",last_name:"",phone:"",email:""}),[ak,al]=(0,c.useState)(null),[am,an]=(0,c.useState)({isOpen:!1,bookingId:null,newStatus:null,bookingCustomerName:null}),[ao,ap]=(0,c.useState)(!1),[aq,ar]=(0,c.useState)(null),[as,at]=(0,c.useState)({isOpen:!1,bookingId:null,bookingCustomerName:null}),[au,av]=(0,c.useState)(!1),[aw,ax]=(0,c.useState)(null),[ay,az]=(0,c.useState)({isOpen:!1,bookingId:null,bookingCustomerName:null,currentDateTime:null}),[aA,aB]=(0,c.useState)(!1),[aC,aD]=(0,c.useState)(null),[aE,aF]=(0,c.useState)(""),[aG,aH]=(0,c.useState)(null);(0,c.useEffect)(()=>{G&&o&&!q&&(async()=>{try{L(!0);let a=await fetch(`${s}/shops?unclaimed=true`,{headers:{"Content-Type":"application/json"}});if(a.ok){let b=a.headers.get("content-type");if(b&&b.includes("application/json")){let b=await a.json();J(Array.isArray(b)?b:[])}else console.error("Expected JSON but received:",b),J([])}else console.error("Failed to fetch unclaimed shops:",a.status,a.statusText),J([])}catch(a){a?.message?.includes("Failed to fetch")||a?.message?.includes("ERR_CONNECTION_REFUSED")||console.error("Error fetching unclaimed shops:",a),J([])}finally{L(!1)}})()},[G,o,q,s]),(0,c.useEffect)(()=>{!q&&o&&o.id?(async()=>{try{let a;if(x(!0),!o.id||"string"!=typeof o.id||"undefined"===o.id||"null"===o.id){console.error("Invalid user ID:",o.id),v(null),D({}),x(!1);return}let b=`${s}/shops?owner_user_id=${encodeURIComponent(o.id)}`;console.log("Fetching shop from:",b),console.log("User ID:",o.id);try{a=await fetch(b,{headers:{"x-user-id":o.id,"Content-Type":"application/json"}})}catch(a){if(a?.message?.includes("Failed to fetch")||a?.message?.includes("ERR_CONNECTION_REFUSED")){v(null),D({}),x(!1);return}throw a}if(404===a.status){console.log("No shop found for user"),v(null),D({});return}if(a.ok){let b=a.headers.get("content-type");if(b&&b.includes("application/json")){let b=await a.json();if(Array.isArray(b)&&b.length>0){let a=b[0];v(a),D({name:a.name||"",address:a.address||"",phone:a.phone||"",email:a.email||"",website:a.website||"",google_place_id:a.google_place_id||"",city:a.city||"",country:a.country||"",zip_code:a.zip_code||"",description:a.description||"",language_code:a.language_code||"",category:a.category||null,subcategory:a.subcategory||null,logo_url:a.logo_url||null,cover_photo_url:a.cover_photo_url||null}),aI(a.id),aJ(a.id),aK(a.id),aL(a.id)}else v(null),D({})}else console.error("Expected JSON but received:",b),v(null),D({})}else{let b=await a.text().catch(()=>"Unknown error");console.error("Error fetching shop:",a.status,a.statusText,b),v(null),D({})}}catch(a){a?.message?.includes("Failed to fetch")||a?.message?.includes("ERR_CONNECTION_REFUSED")||console.error("Error fetching shop:",a),v(null),D({})}finally{x(!1)}})():q?x(!0):o||x(!1)},[o,q,s]);let aI=async a=>{if(a&&o)try{let b=await fetch(`${s}/shops/${a}/services`,{headers:{"x-user-id":o.id}});if(b.ok){let a=await b.json();N(Array.isArray(a)?a:[])}}catch(a){a?.message?.includes("Failed to fetch")||a?.message?.includes("ERR_CONNECTION_REFUSED")||console.error("Error fetching services:",a),N([])}},aJ=async a=>{if(a&&o)try{let b=await fetch(`${s}/shops/${a}/staff`,{headers:{"x-user-id":o.id}});if(b.ok){let a=await b.json();P(Array.isArray(a)?a:[])}}catch(a){a?.message?.includes("Failed to fetch")||a?.message?.includes("ERR_CONNECTION_REFUSED")||console.error("Error fetching staff:",a),P([])}},aK=async a=>{if(a&&o)try{let b=await fetch(`${s}/bookings`,{headers:{"x-user-id":o.id}});if(b.ok){let c=await b.json(),d=Array.isArray(c)?c.filter(b=>b.shop_id===a):[];R(d)}}catch(a){a?.message?.includes("Failed to fetch")||a?.message?.includes("ERR_CONNECTION_REFUSED")||console.error("Error fetching bookings:",a),R([])}},aL=async a=>{if(a&&o)try{let b=await fetch(`${s}/shops/${a}/photos`,{headers:{"x-user-id":o.id}});if(b.ok){let a=await b.json();T(Array.isArray(a)?a:[])}}catch(a){a?.message?.includes("Failed to fetch")||a?.message?.includes("ERR_CONNECTION_REFUSED")||console.error("Error fetching photos:",a),T([])}},aM=async a=>{if(a&&o)try{Z(!0);let b=await fetch(`${s}/reviews?shop_id=${a}`,{headers:{"x-user-id":o.id}});if(b.ok){let a=await b.json();V(Array.isArray(a)?a:[])}let c=await fetch(`${s}/reviews/shop/${a}/stats`,{headers:{"x-user-id":o.id}});if(c.ok){let a=await c.json();X(a)}}catch(a){a?.message?.includes("Failed to fetch")||a?.message?.includes("ERR_CONNECTION_REFUSED")||console.error("Error fetching reviews:",a),V([])}finally{Z(!1)}},aN=async(a,b)=>{if(o&&u)try{(await fetch(`${s}/reviews/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json","x-user-id":o.id},body:JSON.stringify({owner_response:b})})).ok?(await aM(u.id),_(b=>({...b,[a]:""}))):alert("Failed to submit response")}catch(a){console.error("Error submitting owner response:",a),alert("Failed to submit response")}},aO=async a=>{if(a.preventDefault(),u&&o){af(null);try{let a=await fetch(`${s}/services`,{method:"POST",headers:{"Content-Type":"application/json","x-user-id":o.id},body:JSON.stringify({shop_id:u.id,name:ac.name,description:ac.description,price:ac.price,duration:ac.duration_minutes})});if(a.ok)await aI(u.id),ad({name:"",description:"",price:0,duration_minutes:0});else{let b=await a.json().catch(()=>({error:"Failed to create service"}));af(b.error||"Failed to create service")}}catch(a){console.error("Error creating service:",a),af("Failed to create service")}}},aP=async a=>{if(a.preventDefault(),u&&o&&aa){af(null);try{let a=await fetch(`${s}/services/${aa.id}`,{method:"PUT",headers:{"Content-Type":"application/json","x-user-id":o.id},body:JSON.stringify({name:ac.name,description:ac.description,price:ac.price,duration_minutes:ac.duration_minutes})});if(a.ok)await aI(u.id),ab(null),ad({name:"",description:"",price:0,duration_minutes:0});else{let b=await a.json().catch(()=>({error:"Failed to update service"}));af(b.error||"Failed to update service")}}catch(a){console.error("Error updating service:",a),af("Failed to update service")}}},aQ=async a=>{if(u&&o&&confirm("Are you sure you want to delete this service?"))try{(await fetch(`${s}/services/${a}`,{method:"DELETE",headers:{"x-user-id":o.id}})).ok?await aI(u.id):alert("Failed to delete service")}catch(a){console.error("Error deleting service:",a),alert("Failed to delete service")}},aR=(a,b,c)=>{an({isOpen:!0,bookingId:a,newStatus:b,bookingCustomerName:c}),ar(null)},aS=()=>{an({isOpen:!1,bookingId:null,newStatus:null,bookingCustomerName:null}),ar(null)},aT=async()=>{if(u&&o&&am.bookingId&&am.newStatus){ap(!0),ar(null);try{let a=await fetch(`${s}/bookings/${am.bookingId}/status`,{method:"PATCH",headers:{"Content-Type":"application/json","x-user-id":o.id},body:JSON.stringify({status:am.newStatus})});if(a.ok)ar({type:"success",text:"confirmed"===am.newStatus?t("myShop.bookingConfirmed"):t("myShop.bookingRejected")}),await aK(u.id),setTimeout(()=>{aS()},1500);else{let b=await a.json().catch(()=>({error:t("myShop.failedToUpdateStatus")}));ar({type:"error",text:b.error||t("myShop.failedToUpdateStatus")})}}catch(a){console.error("Error updating booking status:",a),ar({type:"error",text:t("myShop.failedToUpdateStatus")})}finally{ap(!1)}}},aU=()=>{at({isOpen:!1,bookingId:null,bookingCustomerName:null}),ax(null)},aV=async()=>{if(u&&o&&as.bookingId){av(!0),ax(null);try{let a=await fetch(`${s}/bookings/${as.bookingId}/cancel`,{method:"POST",headers:{"Content-Type":"application/json","x-user-id":o.id}});if(a.ok)ax({type:"success",text:t("booking.cancelled")}),await aK(u.id),setTimeout(()=>{aU()},1500);else{let b=await a.json().catch(()=>({error:t("booking.failedToCancel")}));ax({type:"error",text:b.error||t("booking.failedToCancel")})}}catch(a){console.error("Error cancelling booking:",a),ax({type:"error",text:t("booking.failedToCancel")})}finally{av(!1)}}},aW=()=>{az({isOpen:!1,bookingId:null,bookingCustomerName:null,currentDateTime:null}),aF(""),aD(null)},aX=async()=>{if(u&&o&&ay.bookingId&&aE){aB(!0),aD(null);try{let a=new Date(aE).toISOString(),b=await fetch(`${s}/bookings/${ay.bookingId}/reschedule`,{method:"POST",headers:{"Content-Type":"application/json","x-user-id":o.id},body:JSON.stringify({date_time:a})});if(b.ok)aD({type:"success",text:t("booking.rescheduled")}),await aK(u.id),setTimeout(()=>{aW()},1500);else{let a=await b.json().catch(()=>({error:t("booking.failedToReschedule")}));aD({type:"error",text:a.error||t("booking.failedToReschedule")})}}catch(a){console.error("Error rescheduling booking:",a),aD({type:"error",text:t("booking.failedToReschedule")})}finally{aB(!1)}}},aY=async a=>{if(a.preventDefault(),o)try{let a=await fetch(`${s}/shops`,{method:"POST",headers:{"Content-Type":"application/json","x-user-id":o.id},body:JSON.stringify(C)});if(a.ok){let b=await a.json();v(b),D(b),F(!1),r.refresh()}else{let b=await a.json();alert(`Error: ${b.error||"Failed to create shop"}`)}}catch(a){console.error("Error creating shop:",a),alert("Failed to create shop")}},aZ=async a=>{if(a.preventDefault(),u&&o)try{let a={};void 0!==C.name&&null!==C.name&&(a.name=C.name),void 0!==C.address&&null!==C.address&&(a.address=C.address),void 0!==C.phone&&null!==C.phone&&(a.phone=C.phone),void 0!==C.email&&null!==C.email&&(a.email=C.email),void 0!==C.website&&null!==C.website&&(a.website=C.website),void 0!==C.google_place_id&&null!==C.google_place_id&&(a.google_place_id=C.google_place_id),void 0!==C.city&&null!==C.city&&(a.city=C.city),void 0!==C.country&&null!==C.country&&(a.country=C.country),void 0!==C.zip_code&&null!==C.zip_code&&(a.zip_code=C.zip_code),void 0!==C.description&&null!==C.description&&(a.description=C.description),void 0!==C.language_code&&null!==C.language_code&&(a.language_code=C.language_code);let b=await fetch(`${s}/shops/${u.id}`,{method:"PUT",headers:{"Content-Type":"application/json","x-user-id":o.id},body:JSON.stringify(a)});if(b.ok){let a=await b.json();v(a),D(a),B(!1)}else{let a=await b.json();alert(`Error: ${a.error||"Failed to update shop"}`)}}catch(a){console.error("Error updating shop:",a),alert("Failed to update shop")}},a$=async(a,b)=>{if(!u||!o||!a.target.files||0===a.target.files.length)return;let c=a.target.files[0];if(c.size>0xa00000)return void alert("File size must be less than 10MB");try{let a=new FormData;a.append("file",c),a.append("shopId",u.id),a.append("type",b);let d=`${s||"http://localhost:3000"}/photos/upload`,e=await fetch(d,{method:"POST",headers:{"x-user-id":o.id},body:a}),f=e.headers.get("content-type");if(!f||!f.includes("application/json")){let a=await e.text();throw console.error("Non-JSON response:",a),Error(`Server returned non-JSON response: ${e.status} ${e.statusText}`)}if(e.ok){let a=await e.json(),c=a.url,d=a.photo;if(!c)throw Error("No URL returned from upload");if(aH({type:"success",message:t("myShop.photoUploaded")}),setTimeout(()=>aH(null),3e3),d?T(a=>"logo"===b||"cover"===b?a.filter(a=>a.type!==b||a.shop_id!==u.id).concat([d]):[...a,d]):await aL(u.id),"logo"===b||"cover"===b){let a="logo"===b?"logo_url":"cover_photo_url",d=await fetch(`${s}/shops/${u.id}`,{method:"PATCH",headers:{"Content-Type":"application/json","x-user-id":o.id},body:JSON.stringify({[a]:c})});if(d.ok){let a=await d.json();v(a)}r.refresh()}}else{let a=await e.text(),b=t("myShop.failedToUpload");try{b=JSON.parse(a).error||b}catch{b=a||b}aH({type:"error",message:b}),setTimeout(()=>aH(null),5e3)}}catch(b){console.error("Error uploading photo:",b);let a=b instanceof Error?b.message:t("common.unknown");aH({type:"error",message:`${t("myShop.failedToUpload")}: ${a}`}),setTimeout(()=>aH(null),5e3)}a.target.value=""},a_=async()=>{if(u&&o)try{await aL(u.id),aH({type:"success",message:t("myShop.photoUploaded")}),setTimeout(()=>aH(null),3e3),r.refresh()}catch(a){console.error("Error saving photos:",a),aH({type:"error",message:"Failed to save photos"}),setTimeout(()=>aH(null),5e3)}},a0=async(a,b)=>{if(u&&o&&confirm(`Are you sure you want to delete this ${b} photo?`))try{let c=await fetch(`${s}/shops/${u.id}/photos/${a}`,{method:"DELETE",headers:{"x-user-id":o.id}});if(c.ok){if(T(b=>b.filter(b=>b.id!==a)),await aL(u.id),"logo"===b||"cover"===b){let a=await fetch(`${s}/shops/${u.id}`,{method:"PATCH",headers:{"Content-Type":"application/json","x-user-id":o.id},body:JSON.stringify({["logo"===b?"logo_url":"cover_photo_url"]:null})});if(a.ok){let b=await a.json();v(b)}}r.refresh()}else{let a=await c.json();alert(`${t("common.error")}: ${a.error||t("myShop.failedToDelete")}`)}}catch(a){console.error("Error deleting photo:",a),alert(t("myShop.failedToDelete"))}};return w?(0,b.jsx)("div",{className:"p-8 flex items-center justify-center min-h-screen",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),(0,b.jsx)("p",{className:"mt-4 text-gray-600",children:t("common.loading")})]})}):u?(0,b.jsxs)("div",{className:"max-w-5xl mx-auto px-4 py-6",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:t("myShop.title")}),(0,b.jsx)("p",{className:"text-lg text-gray-600",children:u.name})]}),(0,b.jsx)("div",{className:"mb-6 border-b border-gray-200",children:(0,b.jsx)("div",{className:"flex gap-1",children:["overview","services","bookings","photos","reviews"].map(a=>(0,b.jsxs)("button",{onClick:()=>{z(a),u&&o&&("services"===a?aI(u.id):"bookings"===a?aK(u.id):"photos"===a?aL(u.id):"reviews"===a&&aM(u.id))},className:`px-6 py-3 font-medium transition-colors relative ${y===a?"text-blue-600 font-bold":"text-gray-600 hover:text-gray-900"}`,children:[t(`myShop.${a}`),y===a&&(0,b.jsx)("span",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600"})]},a))})}),"overview"===y&&(0,b.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:t("myShop.shopOverview")}),!A&&(0,b.jsx)("button",{onClick:()=>B(!0),className:"mt-2 text-sm text-blue-600 hover:text-blue-700 font-medium",children:t("myShop.editShop")})]}),A?(0,b.jsx)("form",{onSubmit:aZ,children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("myShop.shopName")}),(0,b.jsx)("input",{type:"text",required:!0,value:C.name||"",onChange:a=>D(b=>({...b,name:a.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("myShop.address")}),(0,b.jsx)("input",{type:"text",required:!0,value:C.address||"",onChange:a=>D(b=>({...b,address:a.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("myShop.phone")}),(0,b.jsx)("input",{type:"tel",required:!0,value:C.phone||"",onChange:a=>D(b=>({...b,phone:a.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("myShop.email")}),(0,b.jsx)("input",{type:"email",required:!0,value:C.email||"",onChange:a=>D(b=>({...b,email:a.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("myShop.website")}),(0,b.jsx)("input",{type:"url",value:C.website||"",onChange:a=>D(b=>({...b,website:a.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:t("common.save")}),(0,b.jsx)("button",{type:"button",onClick:()=>{B(!1),D(u?{name:u.name||"",address:u.address||"",phone:u.phone||"",email:u.email||"",website:u.website||"",google_place_id:u.google_place_id||"",city:u.city||"",country:u.country||"",zip_code:u.zip_code||"",description:u.description||"",language_code:u.language_code||"",category:u.category||null,subcategory:u.subcategory||null,logo_url:u.logo_url||null,cover_photo_url:u.cover_photo_url||null}:{name:"",address:"",phone:"",email:"",website:"",google_place_id:"",city:"",country:"",zip_code:"",description:"",language_code:""})},className:"px-6 py-2 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors",children:t("common.cancel")})]})]})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("dt",{className:"text-sm font-medium text-gray-500 mb-1",children:t("common.name")}),(0,b.jsx)("dd",{className:"text-lg text-gray-900",children:u.name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("dt",{className:"text-sm font-medium text-gray-500 mb-1",children:t("myShop.address")}),(0,b.jsx)("dd",{className:"text-lg text-gray-900",children:u.address})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("dt",{className:"text-sm font-medium text-gray-500 mb-1",children:t("myShop.phone")}),(0,b.jsx)("dd",{className:"text-lg text-gray-900",children:u.phone})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("dt",{className:"text-sm font-medium text-gray-500 mb-1",children:t("myShop.email")}),(0,b.jsx)("dd",{className:"text-lg text-gray-900",children:u.email})]})]}),u.website&&(0,b.jsxs)("div",{children:[(0,b.jsx)("dt",{className:"text-sm font-medium text-gray-500 mb-1",children:t("myShop.website")}),(0,b.jsx)("dd",{children:(0,b.jsx)("a",{href:u.website,target:"_blank",rel:"noopener noreferrer",className:"text-lg text-blue-600 hover:underline",children:u.website})})]})]}),u&&(0,b.jsxs)("div",{className:"mt-8 p-6 bg-gray-50 rounded-lg border border-gray-200",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"LINE QR Code"}),(0,b.jsx)(i,{shopId:u.id,shop:u,user:o})]})]}),"services"===y&&(0,b.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:t("myShop.services")}),(0,b.jsxs)("div",{className:"mb-6 border border-gray-200 rounded-lg p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:aa?t("myShop.editService"):t("myShop.createNewService")}),ae&&(0,b.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:ae}),(0,b.jsxs)("form",{onSubmit:aa?aP:aO,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[t("myShop.serviceName")," *"]}),(0,b.jsx)("input",{type:"text",value:ac.name,onChange:a=>ad(b=>({...b,name:a.target.value})),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:t("myShop.serviceName")})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[t("myShop.servicePrice")," *"]}),(0,b.jsx)("input",{type:"number",value:ac.price,onChange:a=>ad(b=>({...b,price:parseFloat(a.target.value)||0})),required:!0,min:"0",step:"0.01",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("myShop.serviceDescription")}),(0,b.jsx)("textarea",{value:ac.description,onChange:a=>ad(b=>({...b,description:a.target.value})),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:t("myShop.serviceDescription")})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[t("myShop.serviceDuration")," *"]}),(0,b.jsx)("input",{type:"number",value:ac.duration_minutes,onChange:a=>ad(b=>({...b,duration_minutes:parseInt(a.target.value)||0})),required:!0,min:"1",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:aa?t("common.update"):t("common.create")}),aa&&(0,b.jsx)("button",{type:"button",onClick:()=>{ab(null),ad({name:"",description:"",price:0,duration_minutes:0})},className:"px-6 py-2 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors",children:t("common.cancel")})]})]})]}),0===M.length?(0,b.jsxs)("div",{className:"border border-gray-200 rounded-lg p-8 text-center",children:[(0,b.jsx)("div",{className:"text-4xl mb-4",children:"âš™ï¸"}),(0,b.jsx)("p",{className:"text-gray-600 mb-2",children:t("myShop.noServices")}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:t("myShop.createFirstService")})]}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:t("common.name")}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:t("common.description")}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:t("common.price")}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:t("common.duration")}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:t("common.actions")})]})}),(0,b.jsx)("tbody",{children:M.map(a=>(0,b.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[(0,b.jsx)("td",{className:"py-3 px-4 text-gray-900 font-medium",children:a.name}),(0,b.jsx)("td",{className:"py-3 px-4 text-gray-600",children:a.description||"N/A"}),(0,b.jsxs)("td",{className:"py-3 px-4 text-gray-700",children:["$",a.price]}),(0,b.jsxs)("td",{className:"py-3 px-4 text-gray-700",children:[a.duration_minutes||0," min"]}),(0,b.jsx)("td",{className:"py-3 px-4",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>{ab(a),ad({name:a.name,description:a.description||"",price:a.price,duration_minutes:a.duration_minutes||0})},className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:t("common.edit")}),(0,b.jsx)("button",{onClick:()=>aQ(a.id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:t("common.delete")})]})})]},a.id))})]})})]}),"bookings"===y&&(0,b.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:t("myShop.bookings")}),0===Q.length?(0,b.jsxs)("div",{className:"border border-gray-200 rounded-lg p-8 text-center",children:[(0,b.jsx)("div",{className:"text-4xl mb-4",children:"ðŸ“…"}),(0,b.jsx)("p",{className:"text-gray-600 mb-2",children:t("myShop.noBookings")}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:t("myShop.bookingsWillAppear")})]}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:t("myShop.customer")}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:t("common.email")}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:t("common.phone")}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:t("myShop.dateTime")}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:t("myShop.service")}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:t("common.status")}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:t("common.actions")})]})}),(0,b.jsx)("tbody",{children:Q.map(a=>(0,b.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[(0,b.jsx)("td",{className:"py-3 px-4 text-gray-900 font-medium",children:a.customer_name||t("common.unknown")}),(0,b.jsx)("td",{className:"py-3 px-4 text-gray-600",children:a.customer_email||"N/A"}),(0,b.jsx)("td",{className:"py-3 px-4 text-gray-600",children:a.customer_phone||"N/A"}),(0,b.jsx)("td",{className:"py-3 px-4 text-gray-700",children:a.start_time?new Date(a.start_time).toLocaleString():"N/A"}),(0,b.jsx)("td",{className:"py-3 px-4 text-gray-600",children:a.services?.name||"N/A"}),(0,b.jsx)("td",{className:"py-3 px-4",children:(0,b.jsx)("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${"confirmed"===a.status?"bg-green-100 text-green-700":"rejected"===a.status?"bg-red-100 text-red-700":"cancelled"===a.status?"bg-gray-100 text-gray-700":"completed"===a.status?"bg-blue-100 text-blue-700":"bg-yellow-100 text-yellow-700"}`,children:t(`status.${a.status||"pending"}`)})}),(0,b.jsx)("td",{className:"py-3 px-4",children:(0,b.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(!a.status||"pending"===a.status)&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>aR(a.id,"confirmed",a.customer_name||null),className:"px-3 py-1.5 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors font-medium",children:t("common.confirm")}),(0,b.jsx)("button",{onClick:()=>aR(a.id,"rejected",a.customer_name||null),className:"px-3 py-1.5 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors font-medium",children:t("common.reject")})]}),a.status&&"cancelled"!==a.status&&"completed"!==a.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>{at({isOpen:!0,bookingId:a.id,bookingCustomerName:a.customer_name||null}),ax(null)},className:"px-3 py-1.5 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors font-medium",children:t("booking.cancelBooking")}),(0,b.jsx)("button",{onClick:()=>{var b,c,d;let e,f;return b=a.id,c=a.customer_name||null,f=new Date((e=new Date(d=a.start_time)).getTime()-6e4*e.getTimezoneOffset()).toISOString().slice(0,16),void(az({isOpen:!0,bookingId:b,bookingCustomerName:c,currentDateTime:d}),aF(f),aD(null))},className:"px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors font-medium",children:t("booking.rescheduleBooking")})]})]})})]},a.id))})]})})]}),"reviews"===y&&(0,b.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:t("reviews.title")}),Y?(0,b.jsx)("p",{className:"text-gray-500",children:t("common.loading")}):(0,b.jsxs)(b.Fragment,{children:[W&&(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)(h.default,{averageRating:W.averageRating,totalReviews:W.totalReviews,ratingDistribution:W.ratingDistribution})}),0===U.length?(0,b.jsx)("p",{className:"text-gray-500",children:t("reviews.noReviews")}):(0,b.jsx)("div",{className:"space-y-4",children:U.map(a=>(0,b.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,b.jsx)(g.default,{review:a}),!a.owner_response&&(0,b.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,b.jsx)("textarea",{value:$[a.id]||"",onChange:b=>_(c=>({...c,[a.id]:b.target.value})),placeholder:t("reviews.respond"),className:"w-full px-3 py-2 border border-gray-300 rounded-md mb-2",rows:3}),(0,b.jsx)("button",{onClick:()=>aN(a.id,$[a.id]||""),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:t("reviews.respond")})]})]},a.id))})]})]}),"photos"===y&&(0,b.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:t("myShop.photos")}),(0,b.jsx)("button",{onClick:a_,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:t("common.save")})]}),aG&&(0,b.jsx)("div",{className:`mb-4 p-3 rounded-lg ${"success"===aG.type?"bg-green-100 text-green-700 border border-green-300":"bg-red-100 text-red-700 border border-red-300"}`,children:aG.message}),(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:t("myShop.shopLogo")}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(a=S.find(a=>"logo"===a.type),(j=a?.url||u.logo_url)?(0,b.jsx)("img",{src:j,alt:"Logo",className:"w-24 h-24 object-cover rounded-lg border border-gray-200"}):(0,b.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-lg border border-gray-200 flex items-center justify-center text-gray-400",children:t("myShop.noLogo")})),(0,b.jsx)("input",{type:"file",accept:"image/jpeg,image/png",onChange:a=>a$(a,"logo"),className:"hidden",id:"logo-upload"}),(0,b.jsx)("label",{htmlFor:"logo-upload",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer transition-colors",children:S.find(a=>"logo"===a.type)||u.logo_url?t("myShop.changeLogo"):t("myShop.uploadLogo")}),(k=S.find(a=>"logo"===a.type))?(0,b.jsx)("button",{onClick:()=>a0(k.id,"logo"),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:t("common.delete")}):null]})]}),(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:t("myShop.coverPhoto")}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(l=S.find(a=>"cover"===a.type),(m=l?.url||u.cover_photo_url)?(0,b.jsx)("img",{src:m,alt:"Cover",className:"w-48 h-32 object-cover rounded-lg border border-gray-200"}):(0,b.jsx)("div",{className:"w-48 h-32 bg-gray-100 rounded-lg border border-gray-200 flex items-center justify-center text-gray-400",children:t("myShop.noCoverPhoto")})),(0,b.jsx)("input",{type:"file",accept:"image/jpeg,image/png",onChange:a=>a$(a,"cover"),className:"hidden",id:"cover-upload"}),(0,b.jsx)("label",{htmlFor:"cover-upload",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer transition-colors",children:S.find(a=>"cover"===a.type)||u.cover_photo_url?t("myShop.changeCover"):t("myShop.uploadCover")}),(n=S.find(a=>"cover"===a.type))?(0,b.jsx)("button",{onClick:()=>a0(n.id,"cover"),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:t("common.delete")}):null]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:t("myShop.galleryPhotos")}),(0,b.jsx)("input",{type:"file",accept:"image/jpeg,image/png,image/jpg",onChange:a=>a$(a,"gallery"),className:"hidden",id:"gallery-upload"}),(0,b.jsx)("label",{htmlFor:"gallery-upload",className:"inline-block px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer transition-colors mb-4",children:t("myShop.uploadGalleryPhoto")}),0===S.filter(a=>"gallery"===a.type).length?(0,b.jsxs)("div",{className:"border border-gray-200 rounded-lg p-8 text-center bg-gray-50",children:[(0,b.jsx)("div",{className:"text-2xl mb-2",children:"ðŸ“¸"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:t("myShop.noGalleryPhotos")})]}):(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:S.filter(a=>"gallery"===a.type).map(a=>(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)("img",{src:a.url,alt:"Gallery",className:"w-full h-48 object-cover rounded-lg border border-gray-200",onError:b=>{console.error("Error loading image:",a.url),b.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="200" height="200"%3E%3Crect fill="%23ddd" width="200" height="200"/%3E%3Ctext fill="%23999" font-family="sans-serif" font-size="14" x="50%25" y="50%25" text-anchor="middle" dy=".3em"%3EImage not found%3C/text%3E%3C/svg%3E'}}),(0,b.jsx)("button",{onClick:()=>a0(a.id,"gallery"),className:"absolute top-2 right-2 px-3 py-1 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors opacity-0 group-hover:opacity-100 shadow-lg",children:t("common.delete")})]},a.id))})]})]}),am.isOpen&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",onClick:aS,onMouseDown:a=>{a.target===a.currentTarget&&aS()},children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6 relative",onClick:a=>a.stopPropagation(),onMouseDown:a=>a.stopPropagation(),children:[(0,b.jsx)("button",{type:"button",onClick:aS,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-2xl leading-none",children:"Ã—"}),(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"confirmed"===am.newStatus?t("myShop.confirmBooking"):t("myShop.rejectBooking")}),(0,b.jsxs)("p",{className:"text-gray-600 mb-6",children:["confirmed"===am.newStatus?t("myShop.areYouSureConfirm"):t("myShop.areYouSureReject")," ",am.bookingCustomerName?`${t("common.for")} ${am.bookingCustomerName}`:"","?"]}),aq&&(0,b.jsx)("div",{className:`mb-4 p-3 rounded-lg ${"success"===aq.type?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:aq.text}),(0,b.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,b.jsx)("button",{type:"button",onClick:aS,disabled:ao,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:t("common.cancel")}),(0,b.jsx)("button",{type:"button",onClick:aT,disabled:ao,className:`px-4 py-2 rounded-lg text-white font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${"confirmed"===am.newStatus?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"}`,children:ao?t("common.updating"):"confirmed"===am.newStatus?t("common.confirm"):t("common.reject")})]})]})}),as.isOpen&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",onClick:aU,onMouseDown:a=>{a.target===a.currentTarget&&aU()},children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6 relative",onClick:a=>a.stopPropagation(),onMouseDown:a=>a.stopPropagation(),children:[(0,b.jsx)("button",{type:"button",onClick:aU,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-2xl leading-none",children:"Ã—"}),(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:t("booking.cancelBooking")}),(0,b.jsxs)("p",{className:"text-gray-600 mb-6",children:[t("booking.cancelConfirm")," ",as.bookingCustomerName?`${t("common.for")} ${as.bookingCustomerName}`:"","?"]}),aw&&(0,b.jsx)("div",{className:`mb-4 p-3 rounded-lg ${"success"===aw.type?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:aw.text}),(0,b.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,b.jsxs)("button",{type:"button",onClick:aU,disabled:au,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[t("common.no"),", ",t("common.keepIt")]}),(0,b.jsx)("button",{type:"button",onClick:aV,disabled:au,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:au?t("common.cancelling"):`${t("common.yes")}, ${t("booking.cancelBooking")}`})]})]})}),ay.isOpen&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",onClick:aW,onMouseDown:a=>{a.target===a.currentTarget&&aW()},children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6 relative",onClick:a=>a.stopPropagation(),onMouseDown:a=>a.stopPropagation(),children:[(0,b.jsx)("button",{type:"button",onClick:aW,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-2xl leading-none",children:"Ã—"}),(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:t("booking.rescheduleBooking")}),(0,b.jsxs)("p",{className:"text-gray-600 mb-4",children:[ay.bookingCustomerName?`${t("booking.rescheduleConfirm")} ${ay.bookingCustomerName}`:t("booking.rescheduleBooking"),":"]}),ay.currentDateTime&&(0,b.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:[t("booking.current"),": ",new Date(ay.currentDateTime).toLocaleString()]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("booking.newDateTime")}),(0,b.jsx)("input",{type:"datetime-local",value:aE,onChange:a=>aF(a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",required:!0})]}),aC&&(0,b.jsx)("div",{className:`mb-4 p-3 rounded-lg ${"success"===aC.type?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:aC.text}),(0,b.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,b.jsx)("button",{type:"button",onClick:aW,disabled:aA,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:t("common.cancel")}),(0,b.jsx)("button",{type:"button",onClick:aX,disabled:aA||!aE,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:aA?t("common.rescheduling"):t("booking.rescheduleBooking")})]})]})})]}):(0,b.jsxs)("div",{className:"p-8 max-w-4xl mx-auto",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:t("myShop.title")}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 p-8 mb-6",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:t("myShop.getStarted")}),(0,b.jsxs)("p",{className:"text-gray-600 mb-6",children:[t("myShop.noShop")," ",t("myShop.createShop")," ",t("common.or")," ",t("myShop.claimShop"),"."]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:t("myShop.createNewShop")}),(0,b.jsx)("p",{className:"text-gray-600 mb-4",children:t("myShop.startFresh")}),(0,b.jsx)("button",{onClick:()=>F(!0),className:"w-full px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:t("myShop.createShop")})]}),(0,b.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:t("myShop.claimExistingShop")}),(0,b.jsx)("p",{className:"text-gray-600 mb-4",children:t("myShop.claimOwnership")}),(0,b.jsx)("button",{onClick:()=>H(!0),className:"w-full px-4 py-2 bg-gray-600 text-white font-medium rounded-lg hover:bg-gray-700 transition-colors",children:t("myShop.claimShop")})]})]})]}),E&&(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 p-8",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:t("myShop.createNewShop")}),(0,b.jsx)("form",{onSubmit:aY,children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("myShop.shopName")}),(0,b.jsx)("input",{type:"text",required:!0,value:C.name||"",onChange:a=>D(b=>({...b,name:a.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("myShop.address")}),(0,b.jsx)("input",{type:"text",required:!0,value:C.address||"",onChange:a=>D(b=>({...b,address:a.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("myShop.phone")}),(0,b.jsx)("input",{type:"tel",required:!0,value:C.phone||"",onChange:a=>D(b=>({...b,phone:a.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("myShop.email")}),(0,b.jsx)("input",{type:"email",required:!0,value:C.email||"",onChange:a=>D(b=>({...b,email:a.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:t("myShop.createShop")}),(0,b.jsx)("button",{type:"button",onClick:()=>F(!1),className:"px-6 py-2 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors",children:t("common.cancel")})]})]})})]}),G&&(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 p-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:t("myShop.claimShop")}),(0,b.jsx)("button",{onClick:()=>H(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-900",children:"Ã—"})]}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:t("myShop.selectUnclaimedShop")}),K?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,b.jsx)("p",{className:"mt-2 text-gray-600",children:t("shops.loading")})]}):0===I.length?(0,b.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,b.jsx)("p",{children:t("myShop.noUnclaimedShops")})}):(0,b.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:I.map(a=>(0,b.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900",children:a.name}),a.address&&(0,b.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:a.address})]}),(0,b.jsx)("button",{onClick:async()=>{if(o)try{L(!0);let b=await fetch(`${s}/shops/${a.id}/claim`,{method:"POST",headers:{"Content-Type":"application/json","x-user-id":o.id}});if(b.ok){let a=await b.json();v(a),D(a),H(!1),r.refresh()}else{let a=await b.json();alert(`Error: ${a.error||"Failed to claim shop"}`)}}catch(a){console.error("Error claiming shop:",a),alert("Failed to claim shop")}finally{L(!1)}},className:"px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:t("myShop.claimShop")})]})},a.id))})]})]})}])}];

//# sourceMappingURL=apps_dashboard_app_shops_page_tsx_e637f4dd._.js.map