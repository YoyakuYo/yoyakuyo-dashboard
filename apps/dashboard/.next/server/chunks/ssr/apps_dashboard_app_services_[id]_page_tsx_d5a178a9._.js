module.exports=[4823,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(50944),f=a.i(67254);a.s(["default",0,()=>{let a=(0,e.useParams)(),{user:g}=(0,f.useAuth)(),[h,i]=(0,c.useState)(null),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)({shop_id:"",name:"",description:"",price:0,duration:0}),[r,s]=(0,c.useState)(null),t="http://localhost:3000",u=a=>null==a?"":"string"==typeof a?a:isNaN(a)?"":a;(0,c.useEffect)(()=>{let b=a?.id;b&&"string"==typeof b&&i(b)},[a]);let v=(0,c.useCallback)(async()=>{if(h)try{let a=await fetch(`${t}/services/${h}`);if(a.ok){let b=await a.json();k(b);let c=void 0!==b.duration_minutes?b.duration_minutes:b.duration||0;if(q({shop_id:b.shop_id||"",name:b.name||"",description:b.description||"",price:b.price||0,duration:c}),b.shop_id){let a=await fetch(`${t}/shops/${b.shop_id}`);if(a.ok){let b=await a.json();m(b)}}}else s("Failed to load service")}catch(a){a?.message?.includes("Failed to fetch")||a?.message?.includes("ERR_CONNECTION_REFUSED")||(console.error("Failed to fetch service data:",a),s("Failed to load service data"))}},[h,t]);(0,c.useEffect)(()=>{h&&v()},[h,v]);let w=a=>{let{name:b,value:c,type:d}=a.target,e=c;if("number"===d){let a=parseFloat(c);e=isNaN(a)?"":a}q(a=>({...a,[b]:e}))},x=async()=>{if(!h)return void s("Invalid service ID");if(!g)return void s("You must be logged in to update a service");s(null);try{let a=p.duration,b="string"==typeof a&&""!==a?parseFloat(a):"number"==typeof a?a:0,c={name:p.name,description:p.description,price:p.price,duration_minutes:!isNaN(b)&&b>=0?b:p.duration};p.shop_id&&p.shop_id!==j?.shop_id&&(c.shop_id=p.shop_id);let d=await fetch(`${t}/services/${h}`,{method:"PUT",headers:{"Content-Type":"application/json","x-user-id":g.id},body:JSON.stringify(c)});if(d.ok){let a=await d.json();k(a),o(!1),s(null),await v()}else{let a=await d.json().catch(()=>({error:"Unknown error"}));s(a.error||`Failed to update service: ${d.status}`)}}catch(a){a?.message?.includes("Failed to fetch")||a?.message?.includes("ERR_CONNECTION_REFUSED")||(console.error("Failed to update service:",a),s("Failed to update service. Please try again."))}};return r&&!j?(0,b.jsx)("div",{className:"p-8",children:(0,b.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-6 py-4 rounded-xl",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Error"}),(0,b.jsx)("p",{children:r}),(0,b.jsx)(d.default,{href:"/shops/services",className:"text-blue-600 hover:underline mt-4 inline-block",children:"← Back to Services List"})]})}):h&&j?(0,b.jsxs)("div",{className:"p-8",children:[(0,b.jsxs)(d.default,{href:"/shops/services",className:"text-blue-600 hover:text-blue-800 hover:underline mb-6 inline-flex items-center gap-2",children:[(0,b.jsx)("span",{children:"←"})," Back to Services List"]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Service Details"}),(0,b.jsx)("p",{className:"text-gray-600",children:"View and edit service information"})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Service Information"}),(0,b.jsx)("button",{onClick:()=>o(!n),className:"bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:shadow-lg transition-all duration-200",children:n?"Cancel":"Edit"})]}),r&&(0,b.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:r}),n?(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service Name"}),(0,b.jsx)("input",{type:"text",name:"name",placeholder:"Service Name",value:p.name,onChange:w,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,b.jsx)("textarea",{name:"description",placeholder:"Description",value:p.description,onChange:w,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition",rows:3})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price ($)"}),(0,b.jsx)("input",{type:"number",name:"price",placeholder:"Price",value:u(p.price),onChange:w,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition",min:"0",step:"0.01"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes)"}),(0,b.jsx)("input",{type:"number",name:"duration",placeholder:"Duration",value:u(p.duration),onChange:w,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition",min:"1"})]})]}),(0,b.jsx)("button",{onClick:x,className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 px-4 rounded-lg shadow-md hover:shadow-lg transition-all duration-200",children:"Update Service"})]}):(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Name"}),(0,b.jsx)("p",{className:"text-lg font-semibold text-gray-800",children:j.name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Shop"}),(0,b.jsx)("p",{className:"text-lg text-gray-800",children:l?.name||"Unknown"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Description"}),(0,b.jsx)("p",{className:"text-lg text-gray-800",children:j.description||"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Price"}),(0,b.jsxs)("p",{className:"text-lg font-semibold text-gray-800",children:["$",j.price]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Duration"}),(0,b.jsxs)("p",{className:"text-lg text-gray-800",children:[(void 0!==j.duration_minutes?j.duration_minutes:j.duration)||0," minutes"]})]})]})]})]}):(0,b.jsx)("div",{className:"p-8",children:(0,b.jsx)("div",{className:"text-center py-12",children:(0,b.jsx)("div",{className:"text-gray-500",children:"Loading service details..."})})})}])}];

//# sourceMappingURL=apps_dashboard_app_services_%5Bid%5D_page_tsx_d5a178a9._.js.map